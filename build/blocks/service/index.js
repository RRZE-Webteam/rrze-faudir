(()=>{var e,t,n={252:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;0!==r--;){var l=a[r];if(!e(t[l],n[l]))return!1}return!0}return t!=t&&n!=n}},493:(e,t,n)=>{"use strict";var i=n(609),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useState,l=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=a({inst:{value:n,getSnapshot:t}}),r=i[0].inst,c=i[1];return s(function(){r.value=n,r.getSnapshot=t,u(r)&&c({inst:r})},[e,n,t]),l(function(){return u(r)&&c({inst:r}),e(function(){u(r)&&c({inst:r})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},609:e=>{"use strict";e.exports=window.React},731:e=>{var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},n=Object.keys(t).join("|"),i=new RegExp(n,"g"),r=new RegExp(n,"");function a(e){return t[e]}var l=function(e){return e.replace(i,a)};e.exports=l,e.exports.has=function(e){return!!e.match(r)},e.exports.remove=l},888:(e,t,n)=>{"use strict";e.exports=n(493)}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var a=Object.create(null);r.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>l[e]=()=>n[e]);return l.default=()=>n,r.d(a,l),a},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=window.ReactJSXRuntime,t=window.wp.blocks,n=window.wp.blockEditor,i=window.wp.components,a=window.wp.element,l=window.wp.apiFetch;var s=r.n(l);const o=window.wp.i18n;function u({attributes:t,setAttributes:n,label:r,helpText:l}){const[s,u]=(0,a.useState)(t.orgid||""),[c,d]=(0,a.useState)("");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.__experimentalHeading,{level:3,children:(0,o.__)("Select organization by FAUdir Identifier","rrze-faudir")}),(0,e.jsx)(i.TextControl,{label:r||(0,o.__)("Via FAUdir-ID or FAUdir-URL","rrze-faudir"),value:s,onChange:e=>{const t=e.trim(),i=t.match(/^https?:\/\/faudir\.fau\.de\/public\/org\/([^/]+)\/?$/);let r=i?i[1]:t;r?(n({orgid:r}),d("")):(n({orgid:""}),d((0,o.__)("Please enter a valid FAUdir-URL or the FAUdir-identifier.","rrze-faudir"))),u(e)},type:"text",help:c||l||(0,o.__)('Please enter either the complete FAUdir-URL ("https://faudir.fau.de/public/org/…"), or the FAUdir-Identifier (the last part of the URL after "org/".',"rrze-faudir")})]})}const c=window.wp.compose,d=window.wp.primitives;var f=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})}),m=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})});const v="is",p="isNot",h="isAny",g="isNone",b="isAll",x="isNotAll",w="lessThan",y="greaterThan",_="lessThanOrEqual",j="greaterThanOrEqual",C="before",S="after",k="beforeInc",V="afterInc",I="contains",E="notContains",N="startsWith",M="between",F="on",O="notOn",P="inThePast",A="over",L=[v,p,h,g,b,x,w,y,_,j,C,S,k,V,I,E,N,M,F,O,P,A],T=[v,p,w,y,_,j,C,S,k,V,I,E,N,F,O],z={[v]:{key:"is-filter",label:(0,o.__)("Is")},[p]:{key:"is-not-filter",label:(0,o.__)("Is not")},[h]:{key:"is-any-filter",label:(0,o.__)("Is any")},[g]:{key:"is-none-filter",label:(0,o.__)("Is none")},[b]:{key:"is-all-filter",label:(0,o.__)("Is all")},[x]:{key:"is-not-all-filter",label:(0,o.__)("Is not all")},[w]:{key:"less-than-filter",label:(0,o.__)("Less than")},[y]:{key:"greater-than-filter",label:(0,o.__)("Greater than")},[_]:{key:"less-than-or-equal-filter",label:(0,o.__)("Less than or equal")},[j]:{key:"greater-than-or-equal-filter",label:(0,o.__)("Greater than or equal")},[C]:{key:"before-filter",label:(0,o.__)("Before")},[S]:{key:"after-filter",label:(0,o.__)("After")},[k]:{key:"before-inc-filter",label:(0,o.__)("Before (inc)")},[V]:{key:"after-inc-filter",label:(0,o.__)("After (inc)")},[I]:{key:"contains-filter",label:(0,o.__)("Contains")},[E]:{key:"not-contains-filter",label:(0,o.__)("Doesn't contain")},[N]:{key:"starts-with-filter",label:(0,o.__)("Starts with")},[M]:{key:"between-filter",label:(0,o.__)("Between (inc)")},[F]:{key:"on-filter",label:(0,o.__)("On")},[O]:{key:"not-on-filter",label:(0,o.__)("Not on")},[P]:{key:"in-the-past-filter",label:(0,o.__)("In the past")},[A]:{key:"over-filter",label:(0,o.__)("Over")}},D=["asc","desc"],B={asc:"↑",desc:"↓"},H={asc:"ascending",desc:"descending"},R={asc:(0,o.__)("Sort ascending"),desc:(0,o.__)("Sort descending")},q={asc:f,desc:m},$="table",W="grid",U=(0,a.createContext)({view:{type:$},onChangeView:()=>{},fields:[],data:[],paginationInfo:{totalItems:0,totalPages:0},selection:[],onChangeSelection:()=>{},setOpenedFilter:()=>{},openedFilter:null,getItemId:e=>e.id,isItemClickable:()=>!0,renderItemLink:void 0,containerWidth:0,containerRef:(0,a.createRef)(),resizeObserverRef:()=>{},defaultLayouts:{list:{},grid:{},table:{}},filters:[],isShowingFilter:!1,setIsShowingFilter:()=>{},hasInfiniteScrollHandler:!1,config:{perPageSizes:[]}});U.displayName="DataViewsContext";var K=U,G=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})}),Y=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),Z=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M4 8.8h8.9V7.2H4v1.6zm0 7h8.9v-1.5H4v1.5zM18 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})}),X=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})});function Q(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Q(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const J=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Q(e))&&(i&&(i+=" "),i+=t);return i},ee=window.wp.keycodes;function te({selection:t,onChangeSelection:n,item:r,getItemId:a,titleField:l,disabled:s,...u}){const c=a(r),d=!s&&t.includes(c),f=l?.getValue?.({item:r})||(0,o.__)("(no title)");return(0,e.jsx)(i.CheckboxControl,{className:"dataviews-selection-checkbox",__nextHasNoMarginBottom:!0,"aria-label":f,"aria-disabled":s,checked:d,onChange:()=>{s||n(t.includes(c)?t.filter(e=>c!==e):[...t,c])},...u})}var ne=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})});const ie=window.wp.data,re=window.wp.privateApis,{lock:ae,unlock:le}=(0,re.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/dataviews"),{Menu:se,kebabCase:oe}=le(i.privateApis);function ue({action:t,onClick:n,items:r}){const a="string"==typeof t.label?t.label:t.label(r);return(0,e.jsx)(i.Button,{disabled:!!t.disabled,accessibleWhenDisabled:!0,size:"compact",onClick:n,children:a})}function ce({action:t,onClick:n,items:i}){const r="string"==typeof t.label?t.label:t.label(i);return(0,e.jsx)(se.Item,{disabled:t.disabled,onClick:n,children:(0,e.jsx)(se.ItemLabel,{children:r})})}function de({action:t,items:n,closeModal:r}){const a="string"==typeof t.label?t.label:t.label(n),l="function"==typeof t.modalHeader?t.modalHeader(n):t.modalHeader;return(0,e.jsx)(i.Modal,{title:l||a,__experimentalHideHeader:!!t.hideModalHeader,onRequestClose:r,focusOnMount:t.modalFocusOnMount??!0,size:t.modalSize||"medium",overlayClassName:`dataviews-action-modal dataviews-action-modal__${oe(t.id)}`,children:(0,e.jsx)(t.RenderModal,{items:n,closeModal:r})})}function fe({actions:t,item:n,registry:i,setActiveModalAction:r}){return(0,e.jsx)(se.Group,{children:t.map(t=>(0,e.jsx)(ce,{action:t,onClick:()=>{"RenderModal"in t?r(t):t.callback([n],{registry:i})},items:[n]},t.id))})}function me({item:t,actions:n,isCompact:r}){const l=(0,ie.useRegistry)(),{primaryActions:s,eligibleActions:o}=(0,a.useMemo)(()=>{const e=n.filter(e=>!e.isEligible||e.isEligible(t));return{primaryActions:e.filter(e=>e.isPrimary),eligibleActions:e}},[n,t]);return r?(0,e.jsx)(ve,{item:t,actions:o,isSmall:!0,registry:l}):(0,e.jsxs)(i.__experimentalHStack,{spacing:0,justify:"flex-end",className:"dataviews-item-actions",style:{flexShrink:0,width:"auto"},children:[(0,e.jsx)(pe,{item:t,actions:s,registry:l}),s.length<o.length&&(0,e.jsx)(ve,{item:t,actions:o,registry:l})]})}function ve({item:t,actions:n,isSmall:r,registry:l}){const[s,u]=(0,a.useState)(null);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(se,{placement:"bottom-end",children:[(0,e.jsx)(se.TriggerButton,{render:(0,e.jsx)(i.Button,{size:r?"small":"compact",icon:ne,label:(0,o.__)("Actions"),accessibleWhenDisabled:!0,disabled:!n.length,className:"dataviews-all-actions-button"})}),(0,e.jsx)(se.Popover,{children:(0,e.jsx)(fe,{actions:n,item:t,registry:l,setActiveModalAction:u})})]}),!!s&&(0,e.jsx)(de,{action:s,items:[t],closeModal:()=>u(null)})]})}function pe({item:t,actions:n,registry:i}){const[r,l]=(0,a.useState)(null);return(0,c.useViewportMatch)("medium","<")?null:Array.isArray(n)&&0!==n.length?(0,e.jsxs)(e.Fragment,{children:[n.map(n=>(0,e.jsx)(ue,{action:n,onClick:()=>{"RenderModal"in n?l(n):n.callback([t],{registry:i})},items:[t]},n.id)),!!r&&(0,e.jsx)(de,{action:r,items:[t],closeModal:()=>l(null)})]}):null}var he=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function ge({action:t,items:n,ActionTriggerComponent:i}){const[r,l]=(0,a.useState)(!1),s={action:t,onClick:()=>{l(!0)},items:n};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i,{...s}),r&&(0,e.jsx)(de,{action:t,items:n,closeModal:()=>l(!1)})]})}function be(e,t){return(0,a.useMemo)(()=>e.some(e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t))),[e,t])}function xe(e,t){return(0,a.useMemo)(()=>t.some(t=>e.some(e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t)))),[e,t])}function we({selection:t,onChangeSelection:n,data:r,actions:l,getItemId:s}){const u=(0,a.useMemo)(()=>r.filter(e=>l.some(t=>t.supportsBulk&&(!t.isEligible||t.isEligible(e)))),[r,l]),c=r.filter(e=>t.includes(s(e))&&u.includes(e)),d=c.length===u.length;return(0,e.jsx)(i.CheckboxControl,{className:"dataviews-view-table-selection-checkbox",__nextHasNoMarginBottom:!0,checked:d,indeterminate:!d&&!!c.length,onChange:()=>{n(d?[]:u.map(e=>s(e)))},"aria-label":d?(0,o.__)("Deselect all"):(0,o.__)("Select all")})}function ye({action:t,onClick:n,isBusy:r,items:a}){const l="string"==typeof t.label?t.label:t.label(a);return(0,c.useViewportMatch)("medium","<")?(0,e.jsx)(i.Button,{disabled:r,accessibleWhenDisabled:!0,label:l,icon:t.icon,size:"compact",onClick:n,isBusy:r}):(0,e.jsx)(i.Button,{disabled:r,accessibleWhenDisabled:!0,size:"compact",onClick:n,isBusy:r,children:l})}const _e=[];function je({action:t,selectedItems:n,actionInProgress:i,setActionInProgress:r}){const l=(0,ie.useRegistry)(),s=(0,a.useMemo)(()=>n.filter(e=>!t.isEligible||t.isEligible(e)),[t,n]);return"RenderModal"in t?(0,e.jsx)(ge,{action:t,items:s,ActionTriggerComponent:ye},t.id):(0,e.jsx)(ye,{action:t,onClick:async()=>{r(t.id),await t.callback(n,{registry:l}),r(null)},items:s,isBusy:i===t.id},t.id)}function Ce(t,n,r,a,l,s,u,c,d){const f=s.length>0?(0,o.sprintf)(
/* translators: %d: number of items. */
/* translators: %d: number of items. */
(0,o._n)("%d Item selected","%d Items selected",s.length),s.length):(0,o.sprintf)(
/* translators: %d: number of items. */
/* translators: %d: number of items. */
(0,o._n)("%d Item","%d Items",t.length),t.length);return(0,e.jsxs)(i.__experimentalHStack,{expanded:!1,className:"dataviews-bulk-actions-footer__container",spacing:3,children:[(0,e.jsx)(we,{selection:a,onChangeSelection:d,data:t,actions:n,getItemId:r}),(0,e.jsx)("span",{className:"dataviews-bulk-actions-footer__item-count",children:f}),(0,e.jsxs)(i.__experimentalHStack,{className:"dataviews-bulk-actions-footer__action-buttons",expanded:!1,spacing:1,children:[l.map(t=>(0,e.jsx)(je,{action:t,selectedItems:s,actionInProgress:u,setActionInProgress:c},t.id)),s.length>0&&(0,e.jsx)(i.Button,{icon:he,showTooltip:!0,tooltipPosition:"top",size:"compact",label:(0,o.__)("Cancel"),disabled:!!u,accessibleWhenDisabled:!1,onClick:()=>{d(_e)}})]})]})}function Se({selection:e,actions:t,onChangeSelection:n,data:i,getItemId:r}){const[l,s]=(0,a.useState)(null),o=(0,a.useRef)(null),u=(0,c.useViewportMatch)("medium","<"),d=(0,a.useMemo)(()=>t.filter(e=>e.supportsBulk),[t]),f=(0,a.useMemo)(()=>i.filter(e=>d.some(t=>!t.isEligible||t.isEligible(e))),[i,d]),m=(0,a.useMemo)(()=>i.filter(t=>e.includes(r(t))&&f.includes(t)),[e,i,r,f]),v=(0,a.useMemo)(()=>t.filter(e=>e.supportsBulk&&(!u||e.icon)&&m.some(t=>!e.isEligible||e.isEligible(t))),[t,m,u]);return l?(o.current||(o.current=Ce(i,t,r,e,v,m,l,s,n)),o.current):(o.current&&(o.current=null),Ce(i,t,r,e,v,m,l,s,n))}function ke(){const{data:t,selection:n,actions:i=_e,onChangeSelection:r,getItemId:l}=(0,a.useContext)(K);return(0,e.jsx)(Se,{selection:n,onChangeSelection:r,data:t,actions:i,getItemId:l})}var Ve=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z"})}),Ie=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})}),Ee=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})}),Ne=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M20.7 12.7s0-.1-.1-.2c0-.2-.2-.4-.4-.6-.3-.5-.9-1.2-1.6-1.8-.7-.6-1.5-1.3-2.6-1.8l-.6 1.4c.9.4 1.6 1 2.1 1.5.6.6 1.1 1.2 1.4 1.6.1.2.3.4.3.5v.1l.7-.3.7-.3Zm-5.2-9.3-1.8 4c-.5-.1-1.1-.2-1.7-.2-3 0-5.2 1.4-6.6 2.7-.7.7-1.2 1.3-1.6 1.8-.2.3-.3.5-.4.6 0 0 0 .1-.1.2s0 0 .7.3l.7.3V13c0-.1.2-.3.3-.5.3-.4.7-1 1.4-1.6 1.2-1.2 3-2.3 5.5-2.3H13v.3c-.4 0-.8-.1-1.1-.1-1.9 0-3.5 1.6-3.5 3.5s.6 2.3 1.6 2.9l-2 4.4.9.4 7.6-16.2-.9-.4Zm-3 12.6c1.7-.2 3-1.7 3-3.5s-.2-1.4-.6-1.9L12.4 16Z"})});const{Menu:Me}=le(i.privateApis);function Fe({children:t}){return a.Children.toArray(t).filter(Boolean).map((t,n)=>(0,e.jsxs)(a.Fragment,{children:[n>0&&(0,e.jsx)(Me.Separator,{}),t]},n))}const Oe=(0,a.forwardRef)(function({fieldId:t,view:n,fields:r,onChangeView:a,onHide:l,setOpenedFilter:s,canMove:u=!0},c){const d=n.fields??[],f=d?.indexOf(t),m=n.sort?.field===t;let v=!1,p=!1,h=!1,g=[];const b=r.find(e=>e.id===t);if(!b)return null;v=!1!==b.enableHiding,p=!1!==b.enableSorting;const x=b.header;return g=!!b.filterBy&&b.filterBy?.operators||[],h=!(n.filters?.some(e=>t===e.field)||!b.hasElements&&!b.Edit||!1===b.filterBy||b.filterBy?.isPrimary),p||u||v||h?(0,e.jsxs)(Me,{children:[(0,e.jsxs)(Me.TriggerButton,{render:(0,e.jsx)(i.Button,{size:"compact",className:"dataviews-view-table-header-button",ref:c,variant:"tertiary"}),children:[x,n.sort&&m&&(0,e.jsx)("span",{"aria-hidden":"true",children:B[n.sort.direction]})]}),(0,e.jsx)(Me.Popover,{style:{minWidth:"240px"},children:(0,e.jsxs)(Fe,{children:[p&&(0,e.jsx)(Me.Group,{children:D.map(i=>{const r=n.sort&&m&&n.sort.direction===i,l=`${t}-${i}`;return(0,e.jsx)(Me.RadioItem,{name:"view-table-sorting",value:l,checked:r,onChange:()=>{a({...n,sort:{field:t,direction:i},showLevels:!1})},children:(0,e.jsx)(Me.ItemLabel,{children:R[i]})},l)})}),h&&(0,e.jsx)(Me.Group,{children:(0,e.jsx)(Me.Item,{prefix:(0,e.jsx)(i.Icon,{icon:Ve}),onClick:()=>{s(t),a({...n,page:1,filters:[...n.filters||[],{field:t,value:void 0,operator:g[0]}]})},children:(0,e.jsx)(Me.ItemLabel,{children:(0,o.__)("Add filter")})})}),(u||v)&&b&&(0,e.jsxs)(Me.Group,{children:[u&&(0,e.jsx)(Me.Item,{prefix:(0,e.jsx)(i.Icon,{icon:Ie}),disabled:f<1,onClick:()=>{a({...n,fields:[...d.slice(0,f-1)??[],t,d[f-1],...d.slice(f+1)]})},children:(0,e.jsx)(Me.ItemLabel,{children:(0,o.__)("Move left")})}),u&&(0,e.jsx)(Me.Item,{prefix:(0,e.jsx)(i.Icon,{icon:Ee}),disabled:f>=d.length-1,onClick:()=>{a({...n,fields:[...d.slice(0,f)??[],d[f+1],t,...d.slice(f+2)]})},children:(0,e.jsx)(Me.ItemLabel,{children:(0,o.__)("Move right")})}),v&&b&&(0,e.jsx)(Me.Item,{prefix:(0,e.jsx)(i.Icon,{icon:Ne}),onClick:()=>{l(b),a({...n,fields:d.filter(e=>e!==t)})},children:(0,e.jsx)(Me.ItemLabel,{children:(0,o.__)("Hide column")})})]})]})})]}):x});var Pe=Oe;function Ae({item:t,isItemClickable:n,onClickItem:i,renderItemLink:r,className:l,children:s,...o}){if(!n(t))return(0,e.jsx)("div",{className:l,...o,children:s});if(r){const e=r({item:t,className:`${l} ${l}--clickable`,...o,children:s});return(0,a.cloneElement)(e,{onClick:t=>{t.stopPropagation(),e.props.onClick&&e.props.onClick(t)},onKeyDown:t=>{"Enter"!==t.key&&""!==t.key&&" "!==t.key||(t.stopPropagation(),e.props.onKeyDown&&e.props.onKeyDown(t))}})}const u=function({item:e,isItemClickable:t,onClickItem:n,className:i}){return t(e)&&n?{className:i?`${i} ${i}--clickable`:void 0,role:"button",tabIndex:0,onClick:t=>{t.stopPropagation(),n(e)},onKeyDown:t=>{"Enter"!==t.key&&""!==t.key&&" "!==t.key||(t.stopPropagation(),n(e))}}:{className:i}}({item:t,isItemClickable:n,onClickItem:i,className:l});return(0,e.jsx)("div",{...u,...o,children:s})}var Le=function({item:t,level:n,titleField:r,mediaField:a,descriptionField:l,onClickItem:s,renderItemLink:u,isItemClickable:c}){return(0,e.jsxs)(i.__experimentalHStack,{spacing:3,justify:"flex-start",children:[a&&(0,e.jsx)(Ae,{item:t,isItemClickable:c,onClickItem:s,renderItemLink:u,className:"dataviews-view-table__cell-content-wrapper dataviews-column-primary__media","aria-label":r?(0,o.sprintf)(
// translators: %s is the item title.
// translators: %s is the item title.
(0,o.__)("Click item: %s"),r.getValue?.({item:t})):void 0,children:(0,e.jsx)(a.render,{item:t,field:a,config:{sizes:"32px"}})}),(0,e.jsxs)(i.__experimentalVStack,{spacing:0,alignment:"flex-start",className:"dataviews-view-table__primary-column-content",children:[r&&(0,e.jsxs)(Ae,{item:t,isItemClickable:c,onClickItem:s,renderItemLink:u,className:"dataviews-view-table__cell-content-wrapper dataviews-title-field",children:[void 0!==n&&n>0&&(0,e.jsxs)("span",{className:"dataviews-view-table__level",children:["—".repeat(n)," "]}),(0,e.jsx)(r.render,{item:t,field:r})]}),l&&(0,e.jsx)(l.render,{item:t,field:l})]})]})};function Te(e,t){return e.reduce((e,n)=>{const i=t.getValue({item:n});return e.has(i)||e.set(i,[]),e.get(i)?.push(n),e},new Map)}function ze({item:t,fields:n,column:i,align:r}){const a=n.find(e=>e.id===i);if(!a)return null;const l=J("dataviews-view-table__cell-content-wrapper",{"dataviews-view-table__cell-align-end":"end"===r,"dataviews-view-table__cell-align-center":"center"===r});return(0,e.jsx)("div",{className:l,children:(0,e.jsx)(a.render,{item:t,field:a})})}function De({hasBulkActions:t,item:n,level:i,actions:r,fields:l,id:s,view:o,titleField:u,mediaField:c,descriptionField:d,selection:f,getItemId:m,isItemClickable:v,onClickItem:p,renderItemLink:h,onChangeSelection:g,isActionsColumnSticky:b,posinset:x}){const{paginationInfo:w}=(0,a.useContext)(K),y=be(r,n),_=y&&f.includes(s),[j,C]=(0,a.useState)(!1),{showTitle:S=!0,showMedia:k=!0,showDescription:V=!0,infiniteScrollEnabled:I}=o,E=(0,a.useRef)(!1),N=o.fields??[],M=u&&S||c&&k||d&&V;return(0,e.jsxs)("tr",{className:J("dataviews-view-table__row",{"is-selected":y&&_,"is-hovered":j,"has-bulk-actions":y}),onMouseEnter:()=>{C(!0)},onMouseLeave:()=>{C(!1)},onTouchStart:()=>{E.current=!0},"aria-setsize":I?w.totalItems:void 0,"aria-posinset":x,role:I?"article":void 0,onClick:e=>{y&&(E.current||"Range"===document.getSelection()?.type||(((0,ee.isAppleOS)()?e.metaKey:e.ctrlKey)?g(f.includes(s)?f.filter(e=>s!==e):[...f,s]):g(f.includes(s)?f.filter(e=>s!==e):[s])))},children:[t&&(0,e.jsx)("td",{className:"dataviews-view-table__checkbox-column",children:(0,e.jsx)("div",{className:"dataviews-view-table__cell-content-wrapper",children:(0,e.jsx)(te,{item:n,selection:f,onChangeSelection:g,getItemId:m,titleField:u,disabled:!y})})}),M&&(0,e.jsx)("td",{children:(0,e.jsx)(Le,{item:n,level:i,titleField:S?u:void 0,mediaField:k?c:void 0,descriptionField:V?d:void 0,isItemClickable:v,onClickItem:p,renderItemLink:h})}),N.map(t=>{const{width:i,maxWidth:r,minWidth:a,align:s}=o.layout?.styles?.[t]??{};return(0,e.jsx)("td",{style:{width:i,maxWidth:r,minWidth:a},children:(0,e.jsx)(ze,{fields:l,item:n,column:t,align:s})},t)}),!!r?.length&&(0,e.jsx)("td",{className:J("dataviews-view-table__actions-column",{"dataviews-view-table__actions-column--sticky":!0,"dataviews-view-table__actions-column--stuck":b}),onClick:e=>e.stopPropagation(),children:(0,e.jsx)(me,{item:n,actions:r})})]})}const Be=(0,a.forwardRef)(({className:t,previewSize:n,...i},r)=>(0,e.jsx)("div",{ref:r,className:J("dataviews-view-grid-items",t),style:{gridTemplateColumns:n&&`repeat(auto-fill, minmax(${n}px, 1fr))`},...i})),{Badge:He}=le(i.privateApis);function Re({view:t,selection:n,onChangeSelection:r,onClickItem:l,isItemClickable:s,renderItemLink:u,getItemId:d,item:f,actions:m,mediaField:v,titleField:p,descriptionField:h,regularFields:g,badgeFields:b,hasBulkActions:x,config:w,posinset:y}){const{showTitle:_=!0,showMedia:j=!0,showDescription:C=!0,infiniteScrollEnabled:S}=t,k=be(m,f),V=d(f),I=(0,c.useInstanceId)(Re),E=n.includes(V),N=v?.render?(0,e.jsx)(v.render,{item:f,field:v,config:w}):null,M=_&&p?.render?(0,e.jsx)(p.render,{item:f,field:p}):null,F=j&&N;let O,P;s(f)&&l&&(M?(O={"aria-labelledby":`dataviews-view-grid__title-field-${I}`},P={id:`dataviews-view-grid__title-field-${I}`}):O={"aria-label":(0,o.__)("Navigate to item")});const{paginationInfo:A}=(0,a.useContext)(K);return(0,e.jsxs)(i.__experimentalVStack,{spacing:0,className:J("dataviews-view-grid__card",{"is-selected":k&&E}),onClickCapture:e=>{if((0,ee.isAppleOS)()?e.metaKey:e.ctrlKey){if(e.stopPropagation(),e.preventDefault(),!k)return;r(n.includes(V)?n.filter(e=>V!==e):[...n,V])}},role:S?"article":void 0,"aria-setsize":S?A.totalItems:void 0,"aria-posinset":y,children:[F&&(0,e.jsx)(Ae,{item:f,isItemClickable:s,onClickItem:l,renderItemLink:u,className:"dataviews-view-grid__media",...O,children:N}),x&&F&&(0,e.jsx)(te,{item:f,selection:n,onChangeSelection:r,getItemId:d,titleField:p,disabled:!k}),!_&&F&&!!m?.length&&(0,e.jsx)("div",{className:"dataviews-view-grid__media-actions",children:(0,e.jsx)(me,{item:f,actions:m,isCompact:!0})}),_&&(0,e.jsxs)(i.__experimentalHStack,{justify:"space-between",className:"dataviews-view-grid__title-actions",children:[(0,e.jsx)(Ae,{item:f,isItemClickable:s,onClickItem:l,renderItemLink:u,className:"dataviews-view-grid__title-field dataviews-title-field",...P,children:M}),!!m?.length&&(0,e.jsx)(me,{item:f,actions:m,isCompact:!0})]}),(0,e.jsxs)(i.__experimentalVStack,{spacing:1,children:[C&&h?.render&&(0,e.jsx)(h.render,{item:f,field:h}),!!b?.length&&(0,e.jsx)(i.__experimentalHStack,{className:"dataviews-view-grid__badge-fields",spacing:2,wrap:!0,alignment:"top",justify:"flex-start",children:b.map(t=>(0,e.jsx)(He,{className:"dataviews-view-grid__field-value",children:(0,e.jsx)(t.render,{item:f,field:t})},t.id))}),!!g?.length&&(0,e.jsx)(i.__experimentalVStack,{className:"dataviews-view-grid__fields",spacing:1,children:g.map(t=>(0,e.jsx)(i.Flex,{className:"dataviews-view-grid__field",gap:1,justify:"flex-start",expanded:!0,style:{height:"auto"},direction:"row",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Tooltip,{text:t.label,children:(0,e.jsx)(i.FlexItem,{className:"dataviews-view-grid__field-name",children:t.header})}),(0,e.jsx)(i.FlexItem,{className:"dataviews-view-grid__field-value",style:{maxHeight:"none"},children:(0,e.jsx)(t.render,{item:f,field:t})})]})},t.id))})]})]},V)}const{Menu:qe}=le(i.privateApis);function $e(e){return`${e}-item-wrapper`}function We(e){return`${e}-dropdown`}function Ue({idPrefix:t,primaryAction:n,item:r}){const l=(0,ie.useRegistry)(),[s,o]=(0,a.useState)(!1),u=function(e,t){return`${e}-primary-action-${t}`}(t,n.id),c="string"==typeof n.label?n.label:n.label([r]);return"RenderModal"in n?(0,e.jsx)("div",{role:"gridcell",children:(0,e.jsx)(i.Composite.Item,{id:u,render:(0,e.jsx)(i.Button,{disabled:!!n.disabled,accessibleWhenDisabled:!0,size:"small",onClick:()=>o(!0),variant:"link",children:c}),children:s&&(0,e.jsx)(de,{action:n,items:[r],closeModal:()=>o(!1)})})},n.id):(0,e.jsx)("div",{role:"gridcell",children:(0,e.jsx)(i.Composite.Item,{id:u,render:(0,e.jsx)(i.Button,{disabled:!!n.disabled,accessibleWhenDisabled:!0,size:"small",onClick:()=>{n.callback([r],{registry:l})},variant:"link",children:c})})},n.id)}function Ke({view:t,actions:n,idPrefix:r,isSelected:l,item:s,titleField:u,mediaField:c,descriptionField:d,onSelect:f,otherFields:m,onDropdownTriggerKeyDown:v,posinset:p}){const{showTitle:h=!0,showMedia:g=!0,showDescription:b=!0,infiniteScrollEnabled:x}=t,w=(0,a.useRef)(null),y=`${r}-label`,_=`${r}-description`,j=(0,ie.useRegistry)(),[C,S]=(0,a.useState)(!1),[k,V]=(0,a.useState)(null),I=({type:e})=>{S("mouseenter"===e)},{paginationInfo:E}=(0,a.useContext)(K);(0,a.useEffect)(()=>{l&&w.current?.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})},[l]);const{primaryAction:N,eligibleActions:M}=(0,a.useMemo)(()=>{const e=n.filter(e=>!e.isEligible||e.isEligible(s));return{primaryAction:e.filter(e=>e.isPrimary)[0],eligibleActions:e}},[n,s]),F=N&&1===n.length,O=g&&c?.render?(0,e.jsx)("div",{className:"dataviews-view-list__media-wrapper",children:(0,e.jsx)(c.render,{item:s,field:c,config:{sizes:"52px"}})}):null,P=h&&u?.render?(0,e.jsx)(u.render,{item:s,field:u}):null,A=M?.length>0&&(0,e.jsxs)(i.__experimentalHStack,{spacing:3,className:"dataviews-view-list__item-actions",children:[N&&(0,e.jsx)(Ue,{idPrefix:r,primaryAction:N,item:s}),!F&&(0,e.jsxs)("div",{role:"gridcell",children:[(0,e.jsxs)(qe,{placement:"bottom-end",children:[(0,e.jsx)(qe.TriggerButton,{render:(0,e.jsx)(i.Composite.Item,{id:We(r),render:(0,e.jsx)(i.Button,{size:"small",icon:ne,label:(0,o.__)("Actions"),accessibleWhenDisabled:!0,disabled:!n.length,onKeyDown:v})})}),(0,e.jsx)(qe.Popover,{children:(0,e.jsx)(fe,{actions:M,item:s,registry:j,setActiveModalAction:V})})]}),!!k&&(0,e.jsx)(de,{action:k,items:[s],closeModal:()=>V(null)})]})]});return(0,e.jsx)(i.Composite.Row,{ref:w,render:(0,e.jsx)("div",{"aria-posinset":p,"aria-setsize":x?E.totalItems:void 0}),role:x?"article":"row",className:J({"is-selected":l,"is-hovered":C}),onMouseEnter:I,onMouseLeave:I,children:(0,e.jsxs)(i.__experimentalHStack,{className:"dataviews-view-list__item-wrapper",spacing:0,children:[(0,e.jsx)("div",{role:"gridcell",children:(0,e.jsx)(i.Composite.Item,{id:$e(r),"aria-pressed":l,"aria-labelledby":y,"aria-describedby":_,className:"dataviews-view-list__item",onClick:()=>f(s)})}),(0,e.jsxs)(i.__experimentalHStack,{spacing:3,justify:"start",alignment:"flex-start",children:[O,(0,e.jsxs)(i.__experimentalVStack,{spacing:1,className:"dataviews-view-list__field-wrapper",children:[(0,e.jsxs)(i.__experimentalHStack,{spacing:0,children:[(0,e.jsx)("div",{className:"dataviews-title-field",id:y,children:P}),A]}),b&&d?.render&&(0,e.jsx)("div",{className:"dataviews-view-list__field",children:(0,e.jsx)(d.render,{item:s,field:d})}),(0,e.jsx)("div",{className:"dataviews-view-list__fields",id:_,children:m.map(t=>(0,e.jsxs)("div",{className:"dataviews-view-list__field",children:[(0,e.jsx)(i.VisuallyHidden,{as:"span",className:"dataviews-view-list__field-label",children:t.label}),(0,e.jsx)("span",{className:"dataviews-view-list__field-value",children:(0,e.jsx)(t.render,{item:s,field:t})})]},t.id))})]})]})]})})}function Ge(e){return!!e}const{Badge:Ye}=le(i.privateApis);function Ze({view:t,multiselect:n,selection:r,onChangeSelection:a,getItemId:l,item:s,mediaField:u,titleField:c,descriptionField:d,regularFields:f,badgeFields:m,config:v,posinset:p,setsize:h}){const{showTitle:g=!0,showMedia:b=!0,showDescription:x=!0}=t,w=l(s),y=r.includes(w),_=u?.render?(0,e.jsx)(u.render,{item:s,field:u,config:v}):null,j=g&&c?.render?(0,e.jsx)(c.render,{item:s,field:c}):null;return(0,e.jsxs)(i.Composite.Item,{"aria-label":c?c.getValue({item:s})||(0,o.__)("(no title)"):void 0,render:({children:t,...n})=>(0,e.jsx)(i.__experimentalVStack,{spacing:0,children:t,...n}),role:"option","aria-posinset":p,"aria-setsize":h,className:J("dataviews-view-picker-grid__card",{"is-selected":y}),"aria-selected":y,onClick:()=>{if(y)a(r.filter(e=>w!==e));else{const e=n?[...r,w]:[w];a(e)}},children:[b&&_&&(0,e.jsx)("div",{className:"dataviews-view-picker-grid__media",children:_}),b&&_&&(0,e.jsx)(te,{item:s,selection:r,onChangeSelection:a,getItemId:l,titleField:c,disabled:!1,"aria-hidden":!0,tabIndex:-1}),g&&(0,e.jsx)(i.__experimentalHStack,{justify:"space-between",className:"dataviews-view-picker-grid__title-actions",children:(0,e.jsx)("div",{className:"dataviews-view-picker-grid__title-field dataviews-title-field",children:j})}),(0,e.jsxs)(i.__experimentalVStack,{spacing:1,children:[x&&d?.render&&(0,e.jsx)(d.render,{item:s,field:d}),!!m?.length&&(0,e.jsx)(i.__experimentalHStack,{className:"dataviews-view-picker-grid__badge-fields",spacing:2,wrap:!0,alignment:"top",justify:"flex-start",children:m.map(t=>(0,e.jsx)(Ye,{className:"dataviews-view-picker-grid__field-value",children:(0,e.jsx)(t.render,{item:s,field:t})},t.id))}),!!f?.length&&(0,e.jsx)(i.__experimentalVStack,{className:"dataviews-view-picker-grid__fields",spacing:1,children:f.map(t=>(0,e.jsx)(i.Flex,{className:"dataviews-view-picker-grid__field",gap:1,justify:"flex-start",expanded:!0,style:{height:"auto"},direction:"row",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.FlexItem,{className:"dataviews-view-picker-grid__field-name",children:t.header}),(0,e.jsx)(i.FlexItem,{className:"dataviews-view-picker-grid__field-value",style:{maxHeight:"none"},children:(0,e.jsx)(t.render,{item:s,field:t})})]})},t.id))})]})]},w)}function Xe({groupName:t,groupField:n,children:r}){const a=(0,c.useInstanceId)(Xe,"dataviews-view-picker-grid-group__header");return(0,e.jsxs)(i.__experimentalVStack,{spacing:2,role:"group","aria-labelledby":a,children:[(0,e.jsx)("h3",{className:"dataviews-view-picker-grid-group__header",id:a,children:(0,o.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,o.__)("%1$s: %2$s"),n.label,t)}),r]},t)}const Qe=[{value:120,breakpoint:1},{value:170,breakpoint:1},{value:230,breakpoint:1},{value:290,breakpoint:1112},{value:350,breakpoint:1636},{value:430,breakpoint:588}];function Je(){const t=(0,a.useContext)(K),n=t.view,r=Qe.filter(e=>t.containerWidth>=e.breakpoint),l=n.layout?.previewSize??230,s=r.map((e,t)=>({...e,index:t})).filter(e=>e.value<=l).sort((e,t)=>t.value-e.value)[0]?.index??0,u=r.map((e,t)=>({value:t}));return(0,e.jsx)(i.RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,showTooltip:!1,label:(0,o.__)("Preview size"),value:s,min:0,max:r.length-1,withInputField:!1,onChange:(e=0)=>{t.onChangeView({...n,layout:{...n.layout,previewSize:r[e].value}})},step:1,marks:u})}const et=[{type:$,label:(0,o.__)("Table"),component:function({actions:t,data:n,fields:r,getItemId:l,getItemLevel:s,isLoading:u=!1,onChangeView:d,onChangeSelection:f,selection:m,setOpenedFilter:v,onClickItem:p,isItemClickable:h,renderItemLink:g,view:b,className:x,empty:w}){const{containerRef:y}=(0,a.useContext)(K),_=(0,a.useRef)(new Map),j=(0,a.useRef)(),[C,S]=(0,a.useState)(),k=xe(t,n);(0,a.useEffect)(()=>{j.current&&(j.current.focus(),j.current=void 0)});const V=(0,a.useId)(),I=function({scrollContainerRef:e,enabled:t=!1}){const[n,i]=(0,a.useState)(!1),r=(0,c.useDebounce)((0,a.useCallback)(()=>{const t=e.current;var n;t&&i((n=t,(0,o.isRTL)()?Math.abs(n.scrollLeft)<=1:n.scrollLeft+n.clientWidth>=n.scrollWidth-1))},[e,i]),200);return(0,a.useEffect)(()=>"undefined"!=typeof window&&t&&e.current?(r(),e.current.addEventListener("scroll",r),window.addEventListener("resize",r),()=>{e.current?.removeEventListener("scroll",r),window.removeEventListener("resize",r)}):()=>{},[e,t]),n}({scrollContainerRef:y,enabled:!!t?.length});if(C)return j.current=C,void S(void 0);const E=e=>{const t=_.current.get(e.id),n=t?_.current.get(t.fallback):void 0;S(n?.node)},N=!!n?.length,M=r.find(e=>e.id===b.titleField),F=r.find(e=>e.id===b.mediaField),O=r.find(e=>e.id===b.descriptionField),P=b.groupByField?r.find(e=>e.id===b.groupByField):null,A=P?Te(n,P):null,{showTitle:L=!0,showMedia:T=!0,showDescription:z=!0}=b,D=M&&L||F&&T||O&&z,B=b.fields??[],R=(e,t)=>n=>{n?_.current.set(e,{node:n,fallback:B[t>0?t-1:1]}):_.current.delete(e)},q=b.infiniteScrollEnabled&&!A;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("table",{className:J("dataviews-view-table",x,{[`has-${b.layout?.density}-density`]:b.layout?.density&&["compact","comfortable"].includes(b.layout.density)}),"aria-busy":u,"aria-describedby":V,role:q?"feed":void 0,children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"dataviews-view-table__row",children:[k&&(0,e.jsx)("th",{className:"dataviews-view-table__checkbox-column",scope:"col",children:(0,e.jsx)(we,{selection:m,onChangeSelection:f,data:n,actions:t,getItemId:l})}),D&&(0,e.jsx)("th",{scope:"col",children:M&&(0,e.jsx)(Pe,{ref:R(M.id,0),fieldId:M.id,view:b,fields:r,onChangeView:d,onHide:E,setOpenedFilter:v,canMove:!1})}),B.map((t,n)=>{const{width:i,maxWidth:a,minWidth:l,align:s}=b.layout?.styles?.[t]??{};return(0,e.jsx)("th",{style:{width:i,maxWidth:a,minWidth:l,textAlign:s},"aria-sort":b.sort?.direction&&b.sort?.field===t?H[b.sort.direction]:void 0,scope:"col",children:(0,e.jsx)(Pe,{ref:R(t,n),fieldId:t,view:b,fields:r,onChangeView:d,onHide:E,setOpenedFilter:v,canMove:b.layout?.enableMoving??!0})},t)}),!!t?.length&&(0,e.jsx)("th",{className:J("dataviews-view-table__actions-column",{"dataviews-view-table__actions-column--sticky":!0,"dataviews-view-table__actions-column--stuck":!I}),children:(0,e.jsx)("span",{className:"dataviews-view-table-header",children:(0,o.__)("Actions")})})]})}),N&&P&&A?Array.from(A.entries()).map(([n,i])=>(0,e.jsxs)("tbody",{children:[(0,e.jsx)("tr",{className:"dataviews-view-table__group-header-row",children:(0,e.jsx)("td",{colSpan:B.length+(D?1:0)+(k?1:0)+(t?.length?1:0),className:"dataviews-view-table__group-header-cell",children:(0,o.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,o.__)("%1$s: %2$s"),P.label,n)})}),i.map((n,i)=>(0,e.jsx)(De,{item:n,level:b.showLevels&&"function"==typeof s?s(n):void 0,hasBulkActions:k,actions:t,fields:r,id:l(n)||i.toString(),view:b,titleField:M,mediaField:F,descriptionField:O,selection:m,getItemId:l,onChangeSelection:f,onClickItem:p,renderItemLink:g,isItemClickable:h,isActionsColumnSticky:!I},l(n)))]},`group-${n}`)):(0,e.jsx)("tbody",{children:N&&n.map((n,i)=>(0,e.jsx)(De,{item:n,level:b.showLevels&&"function"==typeof s?s(n):void 0,hasBulkActions:k,actions:t,fields:r,id:l(n)||i.toString(),view:b,titleField:M,mediaField:F,descriptionField:O,selection:m,getItemId:l,onChangeSelection:f,onClickItem:p,renderItemLink:g,isItemClickable:h,isActionsColumnSticky:!I,posinset:q?i+1:void 0},l(n)))})]}),(0,e.jsxs)("div",{className:J({"dataviews-loading":u,"dataviews-no-results":!N&&!u}),id:V,children:[!N&&(u?(0,e.jsx)("p",{children:(0,e.jsx)(i.Spinner,{})}):w),N&&u&&(0,e.jsx)("p",{className:"dataviews-loading-more",children:(0,e.jsx)(i.Spinner,{})})]})]})},icon:G,viewConfigOptions:function(){const t=(0,a.useContext)(K),n=t.view;return(0,e.jsxs)(i.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,size:"__unstable-large",label:(0,o.__)("Density"),value:n.layout?.density||"balanced",onChange:e=>{t.onChangeView({...n,layout:{...n.layout,density:e}})},isBlock:!0,children:[(0,e.jsx)(i.__experimentalToggleGroupControlOption,{value:"comfortable",label:(0,o._x)("Comfortable","Density option for DataView layout")},"comfortable"),(0,e.jsx)(i.__experimentalToggleGroupControlOption,{value:"balanced",label:(0,o._x)("Balanced","Density option for DataView layout")},"balanced"),(0,e.jsx)(i.__experimentalToggleGroupControlOption,{value:"compact",label:(0,o._x)("Compact","Density option for DataView layout")},"compact")]})}},{type:W,label:(0,o.__)("Grid"),component:function({actions:t,data:n,fields:r,getItemId:l,isLoading:s,onChangeSelection:u,onClickItem:c,isItemClickable:d,renderItemLink:f,selection:m,view:v,className:p,empty:h}){const{resizeObserverRef:g}=(0,a.useContext)(K),b=r.find(e=>e.id===v?.titleField),x=r.find(e=>e.id===v?.mediaField),w=r.find(e=>e.id===v?.descriptionField),y=v.fields??[],{regularFields:_,badgeFields:j}=y.reduce((e,t)=>{const n=r.find(e=>e.id===t);return n?(e[v.layout?.badgeFields?.includes(t)?"badgeFields":"regularFields"].push(n),e):e},{regularFields:[],badgeFields:[]}),C=!!n?.length,S=xe(t,n),k=v.layout?.previewSize,V="900px",I=v.groupByField?r.find(e=>e.id===v.groupByField):null,E=I?Te(n,I):null,N=v.infiniteScrollEnabled&&!E;return(0,e.jsxs)(e.Fragment,{children:[C&&I&&E&&(0,e.jsx)(i.__experimentalVStack,{spacing:4,children:Array.from(E.entries()).map(([n,r])=>(0,e.jsxs)(i.__experimentalVStack,{spacing:2,children:[(0,e.jsx)("h3",{className:"dataviews-view-grid__group-header",children:(0,o.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,o.__)("%1$s: %2$s"),I.label,n)}),(0,e.jsx)(Be,{className:J("dataviews-view-grid",p),previewSize:k,"aria-busy":s,ref:g,children:r.map(n=>(0,e.jsx)(Re,{view:v,selection:m,onChangeSelection:u,onClickItem:c,isItemClickable:d,renderItemLink:f,getItemId:l,item:n,actions:t,mediaField:x,titleField:b,descriptionField:w,regularFields:_,badgeFields:j,hasBulkActions:S,config:{sizes:V}},l(n)))})]},n))}),C&&!E&&(0,e.jsx)(Be,{className:J("dataviews-view-grid",p),previewSize:k,"aria-busy":s,ref:g,role:N?"feed":void 0,children:n.map((n,i)=>(0,e.jsx)(Re,{view:v,selection:m,onChangeSelection:u,onClickItem:c,isItemClickable:d,renderItemLink:f,getItemId:l,item:n,actions:t,mediaField:x,titleField:b,descriptionField:w,regularFields:_,badgeFields:j,hasBulkActions:S,config:{sizes:V},posinset:N?i+1:void 0},l(n)))}),!C&&(0,e.jsx)("div",{className:J({"dataviews-loading":s,"dataviews-no-results":!s}),children:s?(0,e.jsx)("p",{children:(0,e.jsx)(i.Spinner,{})}):h}),C&&s&&(0,e.jsx)("p",{className:"dataviews-loading-more",children:(0,e.jsx)(i.Spinner,{})})]})},icon:Y,viewConfigOptions:Je},{type:"list",label:(0,o.__)("List"),component:function t(n){const{actions:r,data:l,fields:s,getItemId:u,isLoading:d,onChangeSelection:f,selection:m,view:v,className:p,empty:h}=n,g=(0,c.useInstanceId)(t,"view-list"),b=l?.findLast(e=>m.includes(u(e))),x=s.find(e=>e.id===v.titleField),w=s.find(e=>e.id===v.mediaField),y=s.find(e=>e.id===v.descriptionField),_=(v?.fields??[]).map(e=>s.find(t=>e===t.id)).filter(Ge),j=e=>f([u(e)]),C=(0,a.useCallback)(e=>`${g}-${u(e)}`,[g,u]),S=(0,a.useCallback)((e,t)=>t.startsWith(C(e)),[C]),[k,V]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{b&&V($e(C(b)))},[b,C]);const I=l.findIndex(e=>S(e,k??"")),E=(0,c.usePrevious)(I),N=-1!==I,M=(0,a.useCallback)((e,t)=>{const n=Math.min(l.length-1,Math.max(0,e));if(!l[n])return;const i=t(C(l[n]));V(i),document.getElementById(i)?.focus()},[l,C]);(0,a.useEffect)(()=>{!N&&void 0!==E&&-1!==E&&M(E,$e)},[N,M,E]);const F=(0,a.useCallback)(e=>{"ArrowDown"===e.key&&(e.preventDefault(),M(I+1,We)),"ArrowUp"===e.key&&(e.preventDefault(),M(I-1,We))},[M,I]),O=l?.length;if(!O)return(0,e.jsx)("div",{className:J({"dataviews-loading":d,"dataviews-no-results":!O&&!d}),children:!O&&(d?(0,e.jsx)("p",{children:(0,e.jsx)(i.Spinner,{})}):h)});const P=v.groupByField?s.find(e=>e.id===v.groupByField):null,A=P?Te(l,P):null;return O&&P&&A?(0,e.jsx)(i.Composite,{id:`${g}`,render:(0,e.jsx)("div",{}),className:"dataviews-view-list__group",role:"grid",activeId:k,setActiveId:V,children:(0,e.jsx)(i.__experimentalVStack,{spacing:4,className:J("dataviews-view-list",p),children:Array.from(A.entries()).map(([t,n])=>(0,e.jsxs)(i.__experimentalVStack,{spacing:2,children:[(0,e.jsx)("h3",{className:"dataviews-view-list__group-header",children:(0,o.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,o.__)("%1$s: %2$s"),P.label,t)}),n.map(t=>{const n=C(t);return(0,e.jsx)(Ke,{view:v,idPrefix:n,actions:r,item:t,isSelected:t===b,onSelect:j,mediaField:w,titleField:x,descriptionField:y,otherFields:_,onDropdownTriggerKeyDown:F},n)})]},t))})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Composite,{id:g,render:(0,e.jsx)("div",{}),className:J("dataviews-view-list",p),role:v.infiniteScrollEnabled?"feed":"grid",activeId:k,setActiveId:V,children:l.map((t,n)=>{const i=C(t);return(0,e.jsx)(Ke,{view:v,idPrefix:i,actions:r,item:t,isSelected:t===b,onSelect:j,mediaField:w,titleField:x,descriptionField:y,otherFields:_,onDropdownTriggerKeyDown:F,posinset:v.infiniteScrollEnabled?n+1:void 0},i)})}),O&&d&&(0,e.jsx)("p",{className:"dataviews-loading-more",children:(0,e.jsx)(i.Spinner,{})})]})},icon:(0,o.isRTL)()?Z:X},{type:"pickerGrid",label:(0,o.__)("Grid"),component:function({actions:t,data:n,fields:r,getItemId:l,isLoading:s,onChangeSelection:o,selection:u,view:c,className:d,empty:f}){const{resizeObserverRef:m,paginationInfo:v,itemListLabel:p}=(0,a.useContext)(K),h=r.find(e=>e.id===c?.titleField),g=r.find(e=>e.id===c?.mediaField),b=r.find(e=>e.id===c?.descriptionField),x=c.fields??[],{regularFields:w,badgeFields:y}=x.reduce((e,t)=>{const n=r.find(e=>e.id===t);return n?(e[c.layout?.badgeFields?.includes(t)?"badgeFields":"regularFields"].push(n),e):e},{regularFields:[],badgeFields:[]}),_=!!n?.length,j=c.layout?.previewSize,C=function(e){return(0,a.useMemo)(()=>e?.every(e=>e.supportsBulk),[e])}(t),S="900px",k=c.groupByField?r.find(e=>e.id===c.groupByField):null,V=k?Te(n,k):null,I=c.infiniteScrollEnabled&&!V,E=c?.page??1,N=c?.perPage??0,M=I?v?.totalItems:void 0;return(0,e.jsxs)(e.Fragment,{children:[_&&k&&V&&(0,e.jsx)(i.Composite,{virtualFocus:!0,orientation:"horizontal",role:"listbox","aria-multiselectable":C,className:J("dataviews-view-picker-grid",d),"aria-label":p,render:({children:t,...n})=>(0,e.jsx)(i.__experimentalVStack,{spacing:4,children:t,...n}),children:Array.from(V.entries()).map(([t,i])=>(0,e.jsx)(Xe,{groupName:t,groupField:k,children:(0,e.jsx)(Be,{previewSize:j,style:{gridTemplateColumns:j&&`repeat(auto-fill, minmax(${j}px, 1fr))`},"aria-busy":s,ref:m,children:i.map(t=>{const i=(E-1)*N+n.indexOf(t)+1;return(0,e.jsx)(Ze,{view:c,multiselect:C,selection:u,onChangeSelection:o,getItemId:l,item:t,mediaField:g,titleField:h,descriptionField:b,regularFields:w,badgeFields:y,config:{sizes:S},posinset:i,setsize:M},l(t))})})},t))}),_&&!V&&(0,e.jsx)(i.Composite,{render:(0,e.jsx)(Be,{className:J("dataviews-view-picker-grid",d),previewSize:j,"aria-busy":s,ref:m}),virtualFocus:!0,orientation:"horizontal",role:"listbox","aria-multiselectable":C,"aria-label":p,children:n.map((t,n)=>{let i=I?n+1:void 0;return I||(i=(E-1)*N+n+1),(0,e.jsx)(Ze,{view:c,multiselect:C,selection:u,onChangeSelection:o,getItemId:l,item:t,mediaField:g,titleField:h,descriptionField:b,regularFields:w,badgeFields:y,config:{sizes:S},posinset:i,setsize:M},l(t))})}),!_&&(0,e.jsx)("div",{className:J({"dataviews-loading":s,"dataviews-no-results":!s}),children:s?(0,e.jsx)("p",{children:(0,e.jsx)(i.Spinner,{})}):f}),_&&s&&(0,e.jsx)("p",{className:"dataviews-loading-more",children:(0,e.jsx)(i.Spinner,{})})]})},icon:Y,viewConfigOptions:Je,isPicker:!0}],{Menu:tt}=le(i.privateApis);function nt({filters:t,view:n,onChangeView:i,setOpenedFilter:r,triggerProps:a}){const l=t.filter(e=>!e.isVisible);return(0,e.jsxs)(tt,{children:[(0,e.jsx)(tt.TriggerButton,{...a}),(0,e.jsx)(tt.Popover,{children:l.map(t=>(0,e.jsx)(tt.Item,{onClick:()=>{r(t.field),i({...n,page:1,filters:[...n.filters||[],{field:t.field,value:void 0,operator:t.operators[0]}]})},children:(0,e.jsx)(tt.ItemLabel,{children:t.name})},t.field))})]})}var it=(0,a.forwardRef)(function({filters:t,view:n,onChangeView:r,setOpenedFilter:a},l){if(!t.length||t.every(({isPrimary:e})=>e))return null;const s=t.filter(e=>!e.isVisible);return(0,e.jsx)(nt,{triggerProps:{render:(0,e.jsx)(i.Button,{accessibleWhenDisabled:!0,size:"compact",className:"dataviews-filters-button",variant:"tertiary",disabled:!s.length,ref:l}),children:(0,o.__)("Add filter")},filters:t,view:n,onChangeView:r,setOpenedFilter:a})});function rt({buttonRef:t,filtersCount:n,children:i}){return(0,a.useEffect)(()=>()=>{t.current?.focus()},[t]),(0,e.jsxs)(e.Fragment,{children:[i,!!n&&(0,e.jsx)("span",{className:"dataviews-filters-toggle__count",children:n})]})}var at=function(){const{filters:t,view:n,onChangeView:r,setOpenedFilter:l,isShowingFilter:s,setIsShowingFilter:u}=(0,a.useContext)(K),c=(0,a.useRef)(null),d=(0,a.useCallback)(e=>{r(e),u(!0)},[r,u]),f=!!t.filter(e=>e.isVisible).length;if(0===t.length)return null;const m={label:(0,o.__)("Add filter"),"aria-expanded":!1,isPressed:!1},v={label:(0,o._x)("Filter","verb"),"aria-expanded":s,isPressed:s,onClick:()=>{s||l(null),u(!s)}},p=(0,e.jsx)(i.Button,{ref:c,className:"dataviews-filters__visibility-toggle",size:"compact",icon:Ve,...f?v:m});return(0,e.jsx)("div",{className:"dataviews-filters__container-visibility-toggle",children:f?(0,e.jsx)(rt,{buttonRef:c,filtersCount:n.filters?.length,children:p}):(0,e.jsx)(nt,{filters:t,view:n,onChangeView:d,setOpenedFilter:l,triggerProps:{render:p}})})},lt=Object.defineProperty,st=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ft=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mt=(e,t)=>{for(var n in t||(t={}))ct.call(t,n)&&ft(e,n,t[n]);if(ut)for(var n of ut(t))dt.call(t,n)&&ft(e,n,t[n]);return e},vt=(e,t)=>st(e,ot(t)),pt=(e,t)=>{var n={};for(var i in e)ct.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&ut)for(var i of ut(e))t.indexOf(i)<0&&dt.call(e,i)&&(n[i]=e[i]);return n},ht=Object.defineProperty,gt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,_t=(e,t,n)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jt=(e,t)=>{for(var n in t||(t={}))wt.call(t,n)&&_t(e,n,t[n]);if(xt)for(var n of xt(t))yt.call(t,n)&&_t(e,n,t[n]);return e},Ct=(e,t)=>gt(e,bt(t)),St=(e,t)=>{var n={};for(var i in e)wt.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&xt)for(var i of xt(e))t.indexOf(i)<0&&yt.call(e,i)&&(n[i]=e[i]);return n};function kt(...e){}function Vt(e,t){return"function"==typeof Object.hasOwn?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t)}function It(...e){return(...t)=>{for(const n of e)"function"==typeof n&&n(...t)}}function Et(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function Nt(e){return e}function Mt(e,t){if(!e){if("string"!=typeof t)throw new Error("Invariant failed");throw new Error(t)}}function Ft(e){return e.disabled||!0===e["aria-disabled"]||"true"===e["aria-disabled"]}function Ot(e){const t={};for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}function Pt(...e){for(const t of e)if(void 0!==t)return t}var At=r(609),Lt=r.t(At,2);function Tt(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var zt,Dt="undefined"!=typeof window&&!!(null==(zt=window.document)?void 0:zt.createElement);function Bt(e){return e?"self"in e?e.document:e.ownerDocument||document:document}function Ht(e,t=!1){const{activeElement:n}=Bt(e);if(!(null==n?void 0:n.nodeName))return null;if("IFRAME"===n.tagName&&n.contentDocument)return Ht(n.contentDocument.body,t);if(t){const e=n.getAttribute("aria-activedescendant");if(e){const t=Bt(n).getElementById(e);if(t)return t}}return n}function Rt(e,t){return e===t||e.contains(t)}function qt(e){const t=e.tagName.toLowerCase();return"button"===t||!("input"!==t||!e.type)&&-1!==$t.indexOf(e.type)}var $t=["button","color","file","image","reset","submit"];function Wt(e){try{const t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName;return t||n||!1}catch(e){return!1}}function Ut(e){return e.isContentEditable||Wt(e)}function Kt(e){let t=0,n=0;if(Wt(e))t=e.selectionStart||0,n=e.selectionEnd||0;else if(e.isContentEditable){const i=Bt(e).getSelection();if((null==i?void 0:i.rangeCount)&&i.anchorNode&&Rt(e,i.anchorNode)&&i.focusNode&&Rt(e,i.focusNode)){const r=i.getRangeAt(0),a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.startContainer,r.startOffset),t=a.toString().length,a.setEnd(r.endContainer,r.endOffset),n=a.toString().length}}return{start:t,end:n}}function Gt(e,t){const n=null==e?void 0:e.getAttribute("role");return n&&-1!==["dialog","menu","listbox","tree","grid"].indexOf(n)?n:t}function Yt(e){if(!e)return null;const t=e=>"auto"===e||"scroll"===e;if(e.clientHeight&&e.scrollHeight>e.clientHeight){const{overflowY:n}=getComputedStyle(e);if(t(n))return e}else if(e.clientWidth&&e.scrollWidth>e.clientWidth){const{overflowX:n}=getComputedStyle(e);if(t(n))return e}return Yt(e.parentElement)||document.scrollingElement||document.body}function Zt(e,...t){/text|search|password|tel|url/i.test(e.type)&&e.setSelectionRange(...t)}function Xt(){return!!Dt&&/mac|iphone|ipad|ipod/i.test(navigator.platform)}function Qt(){return Dt&&Xt()&&/apple/i.test(navigator.vendor)}function Jt(e){return Boolean(e.currentTarget&&!Rt(e.currentTarget,e.target))}function en(e){return e.target===e.currentTarget}function tn(e,t){const n=new FocusEvent("blur",t),i=e.dispatchEvent(n),r=Ct(jt({},t),{bubbles:!0});return e.dispatchEvent(new FocusEvent("focusout",r)),i}function nn(e,t){const n=new MouseEvent("click",t);return e.dispatchEvent(n)}function rn(e,t){const n=t||e.currentTarget,i=e.relatedTarget;return!i||!Rt(n,i)}function an(e,t,n,i){const r=(e=>{if(i){const t=setTimeout(e,i);return()=>clearTimeout(t)}const t=requestAnimationFrame(e);return()=>cancelAnimationFrame(t)})(()=>{e.removeEventListener(t,a,!0),n()}),a=()=>{r(),n()};return e.addEventListener(t,a,{once:!0,capture:!0}),r}function ln(e,t,n,i=window){const r=[];try{i.document.addEventListener(e,t,n);for(const a of Array.from(i.frames))r.push(ln(e,t,n,a))}catch(e){}return()=>{try{i.document.removeEventListener(e,t,n)}catch(e){}for(const e of r)e()}}var sn=mt({},Lt),on=sn.useId,un=(sn.useDeferredValue,sn.useInsertionEffect),cn=Dt?At.useLayoutEffect:At.useEffect;function dn(e){const t=(0,At.useRef)(()=>{throw new Error("Cannot call an event handler while rendering.")});return un?un(()=>{t.current=e}):t.current=e,(0,At.useCallback)((...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}function fn(...e){return(0,At.useMemo)(()=>{if(e.some(Boolean))return t=>{for(const n of e)Tt(n,t)}},e)}function mn(e){if(on){const t=on();return e||t}const[t,n]=(0,At.useState)(e);return cn(()=>{if(e||t)return;const i=Math.random().toString(36).slice(2,8);n(`id-${i}`)},[e,t]),e||t}function vn(e,t){const n=(0,At.useRef)(!1);(0,At.useEffect)(()=>{if(n.current)return e();n.current=!0},t),(0,At.useEffect)(()=>()=>{n.current=!1},[])}function pn(e){return dn("function"==typeof e?e:()=>e)}function hn(e,t,n=[]){const i=(0,At.useCallback)(n=>(e.wrapElement&&(n=e.wrapElement(n)),t(n)),[...n,e.wrapElement]);return vt(mt({},e),{wrapElement:i})}var gn=!1,bn=!1,xn=0,wn=0;function yn(e){(function(e){const t=e.movementX||e.screenX-xn,n=e.movementY||e.screenY-wn;return xn=e.screenX,wn=e.screenY,t||n||!1})(e)&&(bn=!0)}function jn(){bn=!1}function Cn(e){const t=At.forwardRef((t,n)=>e(vt(mt({},t),{ref:n})));return t.displayName=e.displayName||e.name,t}function Sn(e,t){return At.memo(e,t)}function kn(t,n){const i=n,{wrapElement:r,render:a}=i,l=pt(i,["wrapElement","render"]),s=fn(n.ref,function(e){return function(e){return!!e&&!!(0,At.isValidElement)(e)&&("ref"in e.props||"ref"in e)}(e)?mt({},e.props).ref||e.ref:null}(a));let o;if(At.isValidElement(a)){const e=vt(mt({},a.props),{ref:s});o=At.cloneElement(a,function(e,t){const n=mt({},e);for(const i in t){if(!Vt(t,i))continue;if("className"===i){const i="className";n[i]=e[i]?`${e[i]} ${t[i]}`:t[i];continue}if("style"===i){const i="style";n[i]=e[i]?mt(mt({},e[i]),t[i]):t[i];continue}const r=t[i];if("function"==typeof r&&i.startsWith("on")){const t=e[i];if("function"==typeof t){n[i]=(...e)=>{r(...e),t(...e)};continue}}n[i]=r}return n}(l,e))}else o=a?a(l):(0,e.jsx)(t,mt({},l));return r?r(o):o}function Vn(e){const t=(t={})=>e(t);return t.displayName=e.name,t}function In(t=[],n=[]){const i=At.createContext(void 0),r=At.createContext(void 0),a=()=>At.useContext(i),l=n=>t.reduceRight((t,i)=>(0,e.jsx)(i,vt(mt({},n),{children:t})),(0,e.jsx)(i.Provider,mt({},n)));return{context:i,scopedContext:r,useContext:a,useScopedContext:(e=!1)=>{const t=At.useContext(r),n=a();return e?t:t||n},useProviderContext:()=>{const e=At.useContext(r),t=a();if(!e||e!==t)return t},ContextProvider:l,ScopedContextProvider:t=>(0,e.jsx)(l,vt(mt({},t),{children:n.reduceRight((n,i)=>(0,e.jsx)(i,vt(mt({},t),{children:n})),(0,e.jsx)(r.Provider,mt({},t)))}))}}var En=In(),Nn=En.useContext,Mn=(En.useScopedContext,En.useProviderContext,In([En.ContextProvider],[En.ScopedContextProvider])),Fn=Mn.useContext,On=(Mn.useScopedContext,Mn.useProviderContext),Pn=Mn.ContextProvider,An=Mn.ScopedContextProvider,Ln=(0,At.createContext)(void 0),Tn=(0,At.createContext)(void 0),zn=((0,At.createContext)(null),(0,At.createContext)(null),In([Pn],[An])),Dn=zn.useContext;function Bn(e,t){const n=e.__unstableInternals;return Mt(n,"Invalid store"),n[t]}function Hn(e,...t){let n=e,i=n,r=Symbol(),a=kt;const l=new Set,s=new Set,o=new Set,u=new Set,c=new Set,d=new WeakMap,f=new WeakMap,m=(e,t,n=u)=>(n.add(t),f.set(t,e),()=>{var e;null==(e=d.get(t))||e(),d.delete(t),f.delete(t),n.delete(t)}),v=(e,a,l=!1)=>{var o;if(!Vt(n,e))return;const m=(v=a,p=n[e],function(e){return"function"==typeof e}(v)?v(function(e){return"function"==typeof e}(p)?p():p):v);var v,p;if(m===n[e])return;if(!l)for(const n of t)null==(o=null==n?void 0:n.setState)||o.call(n,e,m);const h=n;n=Ct(jt({},n),{[e]:m});const g=Symbol();r=g,s.add(e);const b=(t,i,r)=>{var a;const l=f.get(t);l&&!l.some(t=>r?r.has(t):t===e)||(null==(a=d.get(t))||a(),d.set(t,t(n,i)))};for(const e of u)b(e,h);queueMicrotask(()=>{if(r!==g)return;const e=n;for(const e of c)b(e,i,s);i=e,s.clear()})},p={getState:()=>n,setState:v,__unstableInternals:{setup:e=>(o.add(e),()=>o.delete(e)),init:()=>{const e=l.size,i=Symbol();l.add(i);const r=()=>{l.delete(i),l.size||a()};if(e)return r;const s=(u=n,Object.keys(u)).map(e=>It(...t.map(t=>{var n;const i=null==(n=null==t?void 0:t.getState)?void 0:n.call(t);if(i&&Vt(i,e))return Wn(t,[e],t=>{v(e,t[e],!0)})})));var u;const c=[];for(const e of o)c.push(e());const d=t.map(qn);return a=It(...s,...c,...d),r},subscribe:(e,t)=>m(e,t),sync:(e,t)=>(d.set(t,t(n,n)),m(e,t)),batch:(e,t)=>(d.set(t,t(n,i)),m(e,t,c)),pick:e=>Hn(function(e,t){const n={};for(const i of t)Vt(e,i)&&(n[i]=e[i]);return n}(n,e),p),omit:e=>Hn(function(e,t){const n=jt({},e);for(const e of t)Vt(n,e)&&delete n[e];return n}(n,e),p)}};return p}function Rn(e,...t){if(e)return Bn(e,"setup")(...t)}function qn(e,...t){if(e)return Bn(e,"init")(...t)}function $n(e,...t){if(e)return Bn(e,"subscribe")(...t)}function Wn(e,...t){if(e)return Bn(e,"sync")(...t)}function Un(e,...t){if(e)return Bn(e,"batch")(...t)}function Kn(e,...t){if(e)return Bn(e,"omit")(...t)}function Gn(...e){var t;const n={};for(const i of e){const e=null==(t=null==i?void 0:i.getState)?void 0:t.call(i);e&&Object.assign(n,e)}const i=Hn(n,...e);return Object.assign({},...e,i)}zn.useScopedContext,zn.useProviderContext,zn.ContextProvider,zn.ScopedContextProvider;var Yn=r(888),{useSyncExternalStore:Zn}=Yn;function Xn(e,t=Nt){const n=At.useCallback(t=>e?$n(e,null,t):()=>{},[e]),i=()=>{const n="string"==typeof t?t:null,i="function"==typeof t?t:null,r=null==e?void 0:e.getState();return i?i(r):r&&n&&Vt(r,n)?r[n]:void 0};return Zn(n,i,i)}function Qn(e,t){const n=At.useRef({}),i=At.useCallback(t=>e?$n(e,null,t):()=>{},[e]),r=()=>{const i=null==e?void 0:e.getState();let r=!1;const a=n.current;for(const e in t){const n=t[e];if("function"==typeof n){const t=n(i);t!==a[e]&&(a[e]=t,r=!0)}if("string"==typeof n){if(!i)continue;if(!Vt(i,n))continue;const t=i[n];t!==a[e]&&(a[e]=t,r=!0)}}return r&&(n.current=mt({},a)),n.current};return Zn(i,r,r)}function Jn(e,t,n,i){const r=Vt(t,n)?t[n]:void 0,a=i?t[i]:void 0,l=function(e){const t=(0,At.useRef)(e);return cn(()=>{t.current=e}),t}({value:r,setValue:a});cn(()=>Wn(e,[n],(e,t)=>{const{value:i,setValue:r}=l.current;r&&e[n]!==t[n]&&e[n]!==i&&r(e[n])}),[e,n]),cn(()=>{if(void 0!==r)return e.setState(n,r),Un(e,[n],()=>{void 0!==r&&e.setState(n,r)})})}function ei(e,t,n){return function(e,t,n){return vn(t,[n.store,n.disclosure]),Jn(e,n,"open","setOpen"),Jn(e,n,"mounted","setMounted"),Jn(e,n,"animated"),Object.assign(e,{disclosure:n.disclosure})}(e,t,n)}function ti(e,t,n){return Jn(e=function(e,t,n){return vn(t,[n.store]),Jn(e,n,"items","setItems"),e}(e,t,n),n,"activeId","setActiveId"),Jn(e,n,"includesBaseElement"),Jn(e,n,"virtualFocus"),Jn(e,n,"orientation"),Jn(e,n,"rtl"),Jn(e,n,"focusLoop"),Jn(e,n,"focusWrap"),Jn(e,n,"focusShift"),e}function ni(e){const t=[];for(const n of e)t.push(...n);return t}function ii(e){return e.slice().reverse()}function ri(e={}){var t;e.store;const n=null==(t=e.store)?void 0:t.getState(),i=Pt(e.items,null==n?void 0:n.items,e.defaultItems,[]),r=new Map(i.map(e=>[e.id,e])),a={items:i,renderedItems:Pt(null==n?void 0:n.renderedItems,[])},l=null==(s=e.store)?void 0:s.__unstablePrivateStore;var s;const o=Hn({items:i,renderedItems:a.renderedItems},l),u=Hn(a,e.store),c=e=>{const t=function(e,t){const n=e.map((e,t)=>[t,e]);let i=!1;return n.sort(([e,n],[r,a])=>{const l=t(n),s=t(a);return l===s?0:l&&s?function(e,t){return Boolean(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}(l,s)?(e>r&&(i=!0),-1):(e<r&&(i=!0),1):0}),i?n.map(([e,t])=>t):e}(e,e=>e.element);o.setState("renderedItems",t),u.setState("renderedItems",t)};Rn(u,()=>qn(o)),Rn(o,()=>Un(o,["items"],e=>{u.setState("items",e.items)})),Rn(o,()=>Un(o,["renderedItems"],e=>{let t=!0,n=requestAnimationFrame(()=>{const{renderedItems:t}=u.getState();e.renderedItems!==t&&c(e.renderedItems)});if("function"!=typeof IntersectionObserver)return()=>cancelAnimationFrame(n);const i=function(e){var t;const n=e.find(e=>!!e.element),i=[...e].reverse().find(e=>!!e.element);let r=null==(t=null==n?void 0:n.element)?void 0:t.parentElement;for(;r&&(null==i?void 0:i.element);){if(i&&r.contains(i.element))return r;r=r.parentElement}return Bt(r).body}(e.renderedItems),r=new IntersectionObserver(()=>{t?t=!1:(cancelAnimationFrame(n),n=requestAnimationFrame(()=>c(e.renderedItems)))},{root:i});for(const t of e.renderedItems)t.element&&r.observe(t.element);return()=>{cancelAnimationFrame(n),r.disconnect()}}));const d=(e,t,n=!1)=>{let i;return t(t=>{const n=t.findIndex(({id:t})=>t===e.id),a=t.slice();if(-1!==n){i=t[n];const l=jt(jt({},i),e);a[n]=l,r.set(e.id,l)}else a.push(e),r.set(e.id,e);return a}),()=>{t(t=>{if(!i)return n&&r.delete(e.id),t.filter(({id:t})=>t!==e.id);const a=t.findIndex(({id:t})=>t===e.id);if(-1===a)return t;const l=t.slice();return l[a]=i,r.set(e.id,i),l})}},f=e=>d(e,e=>o.setState("items",e),!0);return Ct(jt({},u),{registerItem:f,renderItem:e=>It(f(e),d(e,e=>o.setState("renderedItems",e))),item:e=>{if(!e)return null;let t=r.get(e);if(!t){const{items:n}=o.getState();t=n.find(t=>t.id===e),t&&r.set(e,t)}return t||null},__unstablePrivateStore:o})}var ai={id:null};function li(e,t){return e.find(e=>t?!e.disabled&&e.id!==t:!e.disabled)}function si(e,t){return e.filter(e=>e.rowId===t)}function oi(e){const t=[];for(const n of e){const e=t.find(e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId});e?e.push(n):t.push([n])}return t}function ui(e){let t=0;for(const{length:n}of e)n>t&&(t=n);return t}function ci(e){return{id:"__EMPTY_ITEM__",disabled:!0,rowId:e}}var di=Qt()&&Dt&&!!navigator.maxTouchPoints;function fi(e={}){var t=e,{tag:n}=t,i=St(t,["tag"]);const r=Gn(i.store,function(e,...t){if(e)return Bn(e,"pick")(...t)}(n,["value","rtl"])),a=null==n?void 0:n.getState(),l=null==r?void 0:r.getState(),s=Pt(i.activeId,null==l?void 0:l.activeId,i.defaultActiveId,null),o=function(e={}){var t;const n=null==(t=e.store)?void 0:t.getState(),i=ri(e),r=Pt(e.activeId,null==n?void 0:n.activeId,e.defaultActiveId),a=Hn(Ct(jt({},i.getState()),{id:Pt(e.id,null==n?void 0:n.id,`id-${Math.random().toString(36).slice(2,8)}`),activeId:r,baseElement:Pt(null==n?void 0:n.baseElement,null),includesBaseElement:Pt(e.includesBaseElement,null==n?void 0:n.includesBaseElement,null===r),moves:Pt(null==n?void 0:n.moves,0),orientation:Pt(e.orientation,null==n?void 0:n.orientation,"both"),rtl:Pt(e.rtl,null==n?void 0:n.rtl,!1),virtualFocus:Pt(e.virtualFocus,null==n?void 0:n.virtualFocus,!1),focusLoop:Pt(e.focusLoop,null==n?void 0:n.focusLoop,!1),focusWrap:Pt(e.focusWrap,null==n?void 0:n.focusWrap,!1),focusShift:Pt(e.focusShift,null==n?void 0:n.focusShift,!1)}),i,e.store);Rn(a,()=>Wn(a,["renderedItems","activeId"],e=>{a.setState("activeId",t=>{var n;return void 0!==t?t:null==(n=li(e.renderedItems))?void 0:n.id})}));const l=(e="next",t={})=>{var n,i;const r=a.getState(),{skip:l=0,activeId:s=r.activeId,focusShift:o=r.focusShift,focusLoop:u=r.focusLoop,focusWrap:c=r.focusWrap,includesBaseElement:d=r.includesBaseElement,renderedItems:f=r.renderedItems,rtl:m=r.rtl}=t,v="up"===e||"down"===e,p="next"===e||"down"===e,h=p?m&&!v:!m||v,g=o&&!l;let b=v?ni(function(e,t,n){const i=ui(e);for(const r of e)for(let e=0;e<i;e+=1){const i=r[e];if(!i||n&&i.disabled){const i=0===e&&n?li(r):r[e-1];r[e]=i&&t!==i.id&&n?i:ci(null==i?void 0:i.rowId)}}return e}(oi(f),s,g)):f;if(b=h?ii(b):b,b=v?function(e){const t=oi(e),n=ui(t),i=[];for(let e=0;e<n;e+=1)for(const n of t){const t=n[e];t&&i.push(Ct(jt({},t),{rowId:t.rowId?`${e}`:void 0}))}return i}(b):b,null==s)return null==(n=li(b))?void 0:n.id;const x=b.find(e=>e.id===s);if(!x)return null==(i=li(b))?void 0:i.id;const w=b.some(e=>e.rowId),y=b.indexOf(x),_=b.slice(y+1),j=si(_,x.rowId);if(l){const e=function(e,t){return e.filter(e=>t?!e.disabled&&e.id!==t:!e.disabled)}(j,s),t=e.slice(l)[0]||e[e.length-1];return null==t?void 0:t.id}const C=u&&(v?"horizontal"!==u:"vertical"!==u),S=w&&c&&(v?"horizontal"!==c:"vertical"!==c),k=p?(!w||v)&&C&&d:!!v&&d;if(C){const e=function(e,t,n=!1){const i=e.findIndex(e=>e.id===t);return[...e.slice(i+1),...n?[ai]:[],...e.slice(0,i)]}(S&&!k?b:si(b,x.rowId),s,k),t=li(e,s);return null==t?void 0:t.id}if(S){const e=li(k?j:_,s);return k?(null==e?void 0:e.id)||null:null==e?void 0:e.id}const V=li(j,s);return!V&&k?null:null==V?void 0:V.id};return Ct(jt(jt({},i),a),{setBaseElement:e=>a.setState("baseElement",e),setActiveId:e=>a.setState("activeId",e),move:e=>{void 0!==e&&(a.setState("activeId",e),a.setState("moves",e=>e+1))},first:()=>{var e;return null==(e=li(a.getState().renderedItems))?void 0:e.id},last:()=>{var e;return null==(e=li(ii(a.getState().renderedItems)))?void 0:e.id},next:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("next",e)),previous:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("previous",e)),down:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("down",e)),up:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("up",e))})}(Ct(jt({},i),{activeId:s,includesBaseElement:Pt(i.includesBaseElement,null==l?void 0:l.includesBaseElement,!0),orientation:Pt(i.orientation,null==l?void 0:l.orientation,"vertical"),focusLoop:Pt(i.focusLoop,null==l?void 0:l.focusLoop,!0),focusWrap:Pt(i.focusWrap,null==l?void 0:l.focusWrap,!0),virtualFocus:Pt(i.virtualFocus,null==l?void 0:l.virtualFocus,!0)})),u=function(e={}){var t=e,{popover:n}=t,i=St(t,["popover"]);const r=Gn(i.store,Kn(n,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),a=null==r?void 0:r.getState(),l=function(e={}){return function(e={}){const t=Gn(e.store,Kn(e.disclosure,["contentElement","disclosureElement"])),n=null==t?void 0:t.getState(),i=Pt(e.open,null==n?void 0:n.open,e.defaultOpen,!1),r=Pt(e.animated,null==n?void 0:n.animated,!1),a=Hn({open:i,animated:r,animating:!!r&&i,mounted:i,contentElement:Pt(null==n?void 0:n.contentElement,null),disclosureElement:Pt(null==n?void 0:n.disclosureElement,null)},t);return Rn(a,()=>Wn(a,["animated","animating"],e=>{e.animated||a.setState("animating",!1)})),Rn(a,()=>$n(a,["open"],()=>{a.getState().animated&&a.setState("animating",!0)})),Rn(a,()=>Wn(a,["open","animating"],e=>{a.setState("mounted",e.open||e.animating)})),Ct(jt({},a),{disclosure:e.disclosure,setOpen:e=>a.setState("open",e),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",e=>!e),stopAnimation:()=>a.setState("animating",!1),setContentElement:e=>a.setState("contentElement",e),setDisclosureElement:e=>a.setState("disclosureElement",e)})}(e)}(Ct(jt({},i),{store:r})),s=Pt(i.placement,null==a?void 0:a.placement,"bottom"),o=Hn(Ct(jt({},l.getState()),{placement:s,currentPlacement:s,anchorElement:Pt(null==a?void 0:a.anchorElement,null),popoverElement:Pt(null==a?void 0:a.popoverElement,null),arrowElement:Pt(null==a?void 0:a.arrowElement,null),rendered:Symbol("rendered")}),l,r);return Ct(jt(jt({},l),o),{setAnchorElement:e=>o.setState("anchorElement",e),setPopoverElement:e=>o.setState("popoverElement",e),setArrowElement:e=>o.setState("arrowElement",e),render:()=>o.setState("rendered",Symbol("rendered"))})}(Ct(jt({},i),{placement:Pt(i.placement,null==l?void 0:l.placement,"bottom-start")})),c=Pt(i.value,null==l?void 0:l.value,i.defaultValue,""),d=Pt(i.selectedValue,null==l?void 0:l.selectedValue,null==a?void 0:a.values,i.defaultSelectedValue,""),f=Array.isArray(d),m=Ct(jt(jt({},o.getState()),u.getState()),{value:c,selectedValue:d,resetValueOnSelect:Pt(i.resetValueOnSelect,null==l?void 0:l.resetValueOnSelect,f),resetValueOnHide:Pt(i.resetValueOnHide,null==l?void 0:l.resetValueOnHide,f&&!n),activeValue:null==l?void 0:l.activeValue}),v=Hn(m,o,u,r);return di&&Rn(v,()=>Wn(v,["virtualFocus"],()=>{v.setState("virtualFocus",!1)})),Rn(v,()=>{if(n)return It(Wn(v,["selectedValue"],e=>{Array.isArray(e.selectedValue)&&n.setValues(e.selectedValue)}),Wn(n,["values"],e=>{v.setState("selectedValue",e.values)}))}),Rn(v,()=>Wn(v,["resetValueOnHide","mounted"],e=>{e.resetValueOnHide&&(e.mounted||v.setState("value",c))})),Rn(v,()=>Wn(v,["open"],e=>{e.open||(v.setState("activeId",s),v.setState("moves",0))})),Rn(v,()=>Wn(v,["moves","activeId"],(e,t)=>{e.moves===t.moves&&v.setState("activeValue",void 0)})),Rn(v,()=>Un(v,["moves","renderedItems"],(e,t)=>{if(e.moves===t.moves)return;const{activeId:n}=v.getState(),i=o.item(n);v.setState("activeValue",null==i?void 0:i.value)})),Ct(jt(jt(jt({},u),o),v),{tag:n,setValue:e=>v.setState("value",e),resetValue:()=>v.setState("value",m.value),setSelectedValue:e=>v.setState("selectedValue",e)})}function mi(e={}){e=function(e){const t=Dn();return function(e){const t=mn(e.id);return mt({id:t},e)}(e=vt(mt({},e),{tag:void 0!==e.tag?e.tag:t}))}(e);const[t,n]=function(e,t){const[n,i]=At.useState(()=>e(t));cn(()=>qn(n),[n]);const r=At.useCallback(e=>Xn(n,e),[n]);return[At.useMemo(()=>vt(mt({},n),{useState:r}),[n,r]),dn(()=>{i(n=>e(mt(mt({},t),n.getState())))})]}(fi,e);return function(e,t,n){return vn(t,[n.tag]),Jn(e,n,"value","setValue"),Jn(e,n,"selectedValue","setSelectedValue"),Jn(e,n,"resetValueOnHide"),Jn(e,n,"resetValueOnSelect"),Object.assign(ti(function(e,t,n){return vn(t,[n.popover]),Jn(e,n,"placement"),ei(e,t,n)}(e,t,n),t,n),{tag:n.tag})}(t,n,e)}var vi=In(),pi=(vi.useContext,vi.useScopedContext,vi.useProviderContext),hi=In([vi.ContextProvider],[vi.ScopedContextProvider]),gi=(hi.useContext,hi.useScopedContext,hi.useProviderContext,hi.ContextProvider),bi=hi.ScopedContextProvider,xi=((0,At.createContext)(void 0),(0,At.createContext)(void 0),In([gi],[bi])),wi=(xi.useContext,xi.useScopedContext,xi.useProviderContext),yi=xi.ContextProvider,_i=xi.ScopedContextProvider,ji=(0,At.createContext)(void 0),Ci=In([yi,Pn],[_i,An]),Si=Ci.useContext,ki=Ci.useScopedContext,Vi=Ci.useProviderContext,Ii=Ci.ContextProvider,Ei=Ci.ScopedContextProvider,Ni=(0,At.createContext)(void 0),Mi=(0,At.createContext)(!1);function Fi(t={}){const n=mi(t);return(0,e.jsx)(Ii,{value:n,children:t.children})}var Oi=Vn(function(e){var t=e,{store:n}=t,i=pt(t,["store"]);const r=Vi();Mt(n=n||r,!1);const a=n.useState(e=>{var t;return null==(t=e.baseElement)?void 0:t.id});return Ot(i=mt({htmlFor:a},i))}),Pi=Sn(Cn(function(e){return kn("label",Oi(e))}));function Ai(e,t){return t&&e.item(t)||null}var Li=Symbol("FOCUS_SILENTLY");function Ti(e,t,n){if(!t)return!1;if(t===n)return!1;const i=e.item(t.id);return!(!i||n&&i.element===n)}var zi=(0,At.createContext)(!0),Di="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], summary, iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function Bi(e){return!!e.matches(Di)&&!!function(e){if("function"==typeof e.checkVisibility)return e.checkVisibility();const t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)&&!e.closest("[inert]")}function Hi(e){const t=Ht(e);if(!t)return!1;if(t===e)return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id}function Ri(e){const t=Ht(e);if(!t)return!1;if(Rt(e,t))return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&"id"in e&&(n===e.id||!!e.querySelector(`#${CSS.escape(n)}`))}var qi=Qt(),$i=["text","search","url","tel","email","password","number","date","month","week","time","datetime","datetime-local"],Wi=Symbol("safariFocusAncestor");function Ui(e,t){e&&(e[Wi]=t)}function Ki(e){return!("input"!==e.tagName.toLowerCase()||!e.type||"radio"!==e.type&&"checkbox"!==e.type)}function Gi(e,t,n,i,r){return e?t?n&&!i?-1:void 0:n?r:r||0:r}function Yi(e,t){return dn(n=>{null==e||e(n),n.defaultPrevented||t&&(n.stopPropagation(),n.preventDefault())})}var Zi=!1,Xi=!0;function Qi(e){const t=e.target;t&&"hasAttribute"in t&&(t.hasAttribute("data-focus-visible")||(Xi=!1))}function Ji(e){e.metaKey||e.ctrlKey||e.altKey||(Xi=!0)}var er=Vn(function(e){var t=e,{focusable:n=!0,accessibleWhenDisabled:i,autoFocus:r,onFocusVisible:a}=t,l=pt(t,["focusable","accessibleWhenDisabled","autoFocus","onFocusVisible"]);const s=(0,At.useRef)(null);(0,At.useEffect)(()=>{n&&(Zi||(ln("mousedown",Qi,!0),ln("keydown",Ji,!0),Zi=!0))},[n]),qi&&(0,At.useEffect)(()=>{if(!n)return;const e=s.current;if(!e)return;if(!Ki(e))return;const t=function(e){return"labels"in e?e.labels:null}(e);if(!t)return;const i=()=>queueMicrotask(()=>e.focus());for(const e of t)e.addEventListener("mouseup",i);return()=>{for(const e of t)e.removeEventListener("mouseup",i)}},[n]);const o=n&&Ft(l),u=!!o&&!i,[c,d]=(0,At.useState)(!1);(0,At.useEffect)(()=>{n&&u&&c&&d(!1)},[n,u,c]),(0,At.useEffect)(()=>{if(!n)return;if(!c)return;const e=s.current;if(!e)return;if("undefined"==typeof IntersectionObserver)return;const t=new IntersectionObserver(()=>{Bi(e)||d(!1)});return t.observe(e),()=>t.disconnect()},[n,c]);const f=Yi(l.onKeyPressCapture,o),m=Yi(l.onMouseDownCapture,o),v=Yi(l.onClickCapture,o),p=l.onMouseDown,h=dn(e=>{if(null==p||p(e),e.defaultPrevented)return;if(!n)return;const t=e.currentTarget;if(!qi)return;if(Jt(e))return;if(!qt(t)&&!Ki(t))return;let i=!1;const r=()=>{i=!0};t.addEventListener("focusin",r,{capture:!0,once:!0});const a=function(e){for(;e&&!Bi(e);)e=e.closest(Di);return e||null}(t.parentElement);Ui(a,!0),an(t,"mouseup",()=>{t.removeEventListener("focusin",r,!0),Ui(a,!1),i||function(e){!Ri(e)&&Bi(e)&&e.focus()}(t)})}),g=(e,t)=>{if(t&&(e.currentTarget=t),!n)return;const i=e.currentTarget;i&&Hi(i)&&(null==a||a(e),e.defaultPrevented||(i.dataset.focusVisible="true",d(!0)))},b=l.onKeyDownCapture,x=dn(e=>{if(null==b||b(e),e.defaultPrevented)return;if(!n)return;if(c)return;if(e.metaKey)return;if(e.altKey)return;if(e.ctrlKey)return;if(!en(e))return;const t=e.currentTarget;an(t,"focusout",()=>g(e,t))}),w=l.onFocusCapture,y=dn(e=>{if(null==w||w(e),e.defaultPrevented)return;if(!n)return;if(!en(e))return void d(!1);const t=e.currentTarget;Xi||function(e){const{tagName:t,readOnly:n,type:i}=e;return"TEXTAREA"===t&&!n||"SELECT"===t&&!n||("INPUT"!==t||n?!!e.isContentEditable||!("combobox"!==e.getAttribute("role")||!e.dataset.name):$i.includes(i))}(e.target)?an(e.target,"focusout",()=>g(e,t)):d(!1)}),_=l.onBlur,j=dn(e=>{null==_||_(e),n&&rn(e)&&(e.currentTarget.removeAttribute("data-focus-visible"),d(!1))}),C=(0,At.useContext)(zi),S=dn(e=>{n&&r&&e&&C&&queueMicrotask(()=>{Hi(e)||Bi(e)&&e.focus()})}),k=function(e,t){const n=e=>{if("string"==typeof e)return e},[i,r]=(0,At.useState)(()=>n(t));return cn(()=>{const i=e&&"current"in e?e.current:e;r((null==i?void 0:i.tagName.toLowerCase())||n(t))},[e,t]),i}(s),V=n&&function(e){return!e||"button"===e||"summary"===e||"input"===e||"select"===e||"textarea"===e||"a"===e}(k),I=n&&function(e){return!e||"button"===e||"input"===e||"select"===e||"textarea"===e}(k),E=l.style,N=(0,At.useMemo)(()=>u?mt({pointerEvents:"none"},E):E,[u,E]);return Ot(l=vt(mt({"data-focus-visible":n&&c||void 0,"data-autofocus":r||void 0,"aria-disabled":o||void 0},l),{ref:fn(s,S,l.ref),style:N,tabIndex:Gi(n,u,V,I,l.tabIndex),disabled:!(!I||!u)||void 0,contentEditable:o?void 0:l.contentEditable,onKeyPressCapture:f,onClickCapture:v,onMouseDownCapture:m,onMouseDown:h,onKeyDownCapture:x,onFocusCapture:y,onBlur:j}))});function tr(e,t,n){return dn(i=>{var r;if(null==t||t(i),i.defaultPrevented)return;if(i.isPropagationStopped())return;if(!en(i))return;if(function(e){return"Shift"===e.key||"Control"===e.key||"Alt"===e.key||"Meta"===e.key}(i))return;if(function(e){const t=e.target;return!(t&&!Wt(t)||1!==e.key.length||e.ctrlKey||e.metaKey)}(i))return;const a=e.getState(),l=null==(r=Ai(e,a.activeId))?void 0:r.element;if(!l)return;const s=i,{view:o}=s,u=pt(s,["view"]);l!==(null==n?void 0:n.current)&&l.focus(),function(e,t,n){const i=new KeyboardEvent(t,n);return e.dispatchEvent(i)}(l,i.type,u)||i.preventDefault(),i.currentTarget.contains(l)&&i.stopPropagation()})}Cn(function(e){return kn("div",er(e))});var nr=Vn(function(t){var n=t,{store:i,composite:r=!0,focusOnMove:a=r,moveOnKeyPress:l=!0}=n,s=pt(n,["store","composite","focusOnMove","moveOnKeyPress"]);const o=On();Mt(i=i||o,!1);const u=(0,At.useRef)(null),c=(0,At.useRef)(null),d=function(e){const[t,n]=(0,At.useState)(!1),i=(0,At.useCallback)(()=>n(!0),[]),r=e.useState(t=>Ai(e,t.activeId));return(0,At.useEffect)(()=>{const e=null==r?void 0:r.element;t&&e&&(n(!1),e.focus({preventScroll:!0}))},[r,t]),i}(i),f=i.useState("moves"),[,m]=function(e){const[t,n]=(0,At.useState)(null);return cn(()=>{if(null==t)return;if(!e)return;let n=null;return e(e=>(n=e,t)),()=>{e(n)}},[t,e]),[t,n]}(r?i.setBaseElement:null);(0,At.useEffect)(()=>{var e;if(!i)return;if(!f)return;if(!r)return;if(!a)return;const{activeId:t}=i.getState(),n=null==(e=Ai(i,t))?void 0:e.element;var l;n&&("scrollIntoView"in(l=n)?(l.focus({preventScroll:!0}),l.scrollIntoView(jt({block:"nearest",inline:"nearest"},undefined))):l.focus())},[i,f,r,a]),cn(()=>{if(!i)return;if(!f)return;if(!r)return;const{baseElement:e,activeId:t}=i.getState();if(null!==t)return;if(!e)return;const n=c.current;c.current=null,n&&tn(n,{relatedTarget:e}),Hi(e)||e.focus()},[i,f,r]);const v=i.useState("activeId"),p=i.useState("virtualFocus");cn(()=>{var e;if(!i)return;if(!r)return;if(!p)return;const t=c.current;if(c.current=null,!t)return;const n=(null==(e=Ai(i,v))?void 0:e.element)||Ht(t);n!==t&&tn(t,{relatedTarget:n})},[i,v,p,r]);const h=tr(i,s.onKeyDownCapture,c),g=tr(i,s.onKeyUpCapture,c),b=s.onFocusCapture,x=dn(e=>{if(null==b||b(e),e.defaultPrevented)return;if(!i)return;const{virtualFocus:t}=i.getState();if(!t)return;const n=e.relatedTarget,r=function(e){const t=e[Li];return delete e[Li],t}(e.currentTarget);en(e)&&r&&(e.stopPropagation(),c.current=n)}),w=s.onFocus,y=dn(e=>{if(null==w||w(e),e.defaultPrevented)return;if(!r)return;if(!i)return;const{relatedTarget:t}=e,{virtualFocus:n}=i.getState();n?en(e)&&!Ti(i,t)&&queueMicrotask(d):en(e)&&i.setActiveId(null)}),_=s.onBlurCapture,j=dn(e=>{var t;if(null==_||_(e),e.defaultPrevented)return;if(!i)return;const{virtualFocus:n,activeId:r}=i.getState();if(!n)return;const a=null==(t=Ai(i,r))?void 0:t.element,l=e.relatedTarget,s=Ti(i,l),o=c.current;c.current=null,en(e)&&s?(l===a?o&&o!==l&&tn(o,e):a?tn(a,e):o&&tn(o,e),e.stopPropagation()):!Ti(i,e.target)&&a&&tn(a,e)}),C=s.onKeyDown,S=pn(l),k=dn(e=>{var t;if(null==C||C(e),e.nativeEvent.isComposing)return;if(e.defaultPrevented)return;if(!i)return;if(!en(e))return;const{orientation:n,renderedItems:r,activeId:a}=i.getState(),l=Ai(i,a);if(null==(t=null==l?void 0:l.element)?void 0:t.isConnected)return;const s="horizontal"!==n,o="vertical"!==n,u=r.some(e=>!!e.rowId);if(("ArrowLeft"===e.key||"ArrowRight"===e.key||"Home"===e.key||"End"===e.key)&&Wt(e.currentTarget))return;const c={ArrowUp:(u||s)&&(()=>{if(u){const e=function(e){return e.find(e=>!e.disabled)}(ni(ii(function(e){const t=[];for(const n of e){const e=t.find(e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId});e?e.push(n):t.push([n])}return t}(r))));return null==e?void 0:e.id}return null==i?void 0:i.last()}),ArrowRight:(u||o)&&i.first,ArrowDown:(u||s)&&i.first,ArrowLeft:(u||o)&&i.last,Home:i.first,End:i.last,PageUp:i.first,PageDown:i.last},d=c[e.key];if(d){const t=d();if(void 0!==t){if(!S(e))return;e.preventDefault(),i.move(t)}}});s=hn(s,t=>(0,e.jsx)(Pn,{value:i,children:t}),[i]);const V=i.useState(e=>{var t;if(i&&r&&e.virtualFocus)return null==(t=Ai(i,e.activeId))?void 0:t.id});s=vt(mt({"aria-activedescendant":V},s),{ref:fn(u,m,s.ref),onKeyDownCapture:h,onKeyUpCapture:g,onFocusCapture:x,onFocus:y,onBlurCapture:j,onKeyDown:k});const I=i.useState(e=>r&&(e.virtualFocus||null===e.activeId));return er(mt({focusable:I},s))}),ir=(Cn(function(e){return kn("div",nr(e))}),Vn(function(e){var t=e,{store:n}=t,i=pt(t,["store"]);const r=wi();return n=n||r,vt(mt({},i),{ref:fn(null==n?void 0:n.setAnchorElement,i.ref)})}));function rr(e,t,n){if(!n)return!1;const i=e.find(e=>!e.disabled&&e.value);return(null==i?void 0:i.value)===t}function ar(e,t){return!!t&&null!=e&&(e=Et(e),t.length>e.length&&0===t.toLowerCase().indexOf(e.toLowerCase()))}Cn(function(e){return kn("div",ir(e))});var lr=Vn(function(e){var t=e,{store:n,focusable:i=!0,autoSelect:r=!1,getAutoSelectId:a,setValueOnChange:l,showMinLength:s=0,showOnChange:o,showOnMouseDown:u,showOnClick:c=u,showOnKeyDown:d,showOnKeyPress:f=d,blurActiveItemOnClick:m,setValueOnClick:v=!0,moveOnKeyPress:p=!0,autoComplete:h="list"}=t,g=pt(t,["store","focusable","autoSelect","getAutoSelectId","setValueOnChange","showMinLength","showOnChange","showOnMouseDown","showOnClick","showOnKeyDown","showOnKeyPress","blurActiveItemOnClick","setValueOnClick","moveOnKeyPress","autoComplete"]);const b=Vi();Mt(n=n||b,!1);const x=(0,At.useRef)(null),[w,y]=(0,At.useReducer)(()=>[],[]),_=(0,At.useRef)(!1),j=(0,At.useRef)(!1),C=n.useState(e=>e.virtualFocus&&r),S="inline"===h||"both"===h,[k,V]=(0,At.useState)(S);!function(e,t){const n=(0,At.useRef)(!1);cn(()=>{n.current?S&&V(!0):n.current=!0},t),cn(()=>()=>{n.current=!1},[])}(0,[S]);const I=n.useState("value"),E=(0,At.useRef)();(0,At.useEffect)(()=>Wn(n,["selectedValue","activeId"],(e,t)=>{E.current=t.selectedValue}),[]);const N=n.useState(e=>{var t;if(S&&k){if(e.activeValue&&Array.isArray(e.selectedValue)){if(e.selectedValue.includes(e.activeValue))return;if(null==(t=E.current)?void 0:t.includes(e.activeValue))return}return e.activeValue}}),M=n.useState("renderedItems"),F=n.useState("open"),O=n.useState("contentElement"),P=(0,At.useMemo)(()=>{if(!S)return I;if(!k)return I;if(rr(M,N,C)){if(ar(I,N)){const e=(null==N?void 0:N.slice(I.length))||"";return I+e}return I}return N||I},[S,k,M,N,C,I]);(0,At.useEffect)(()=>{const e=x.current;if(!e)return;const t=()=>V(!0);return e.addEventListener("combobox-item-move",t),()=>{e.removeEventListener("combobox-item-move",t)}},[]),(0,At.useEffect)(()=>{if(!S)return;if(!k)return;if(!N)return;if(!rr(M,N,C))return;if(!ar(I,N))return;let e=kt;return queueMicrotask(()=>{const t=x.current;if(!t)return;const{start:n,end:i}=Kt(t),r=I.length,a=N.length;Zt(t,r,a),e=()=>{if(!Hi(t))return;const{start:e,end:l}=Kt(t);e===r&&l===a&&Zt(t,n,i)}}),()=>e()},[w,S,k,N,M,C,I]);const A=(0,At.useRef)(null),L=dn(a),T=(0,At.useRef)(null);(0,At.useEffect)(()=>{if(!F)return;if(!O)return;const e=Yt(O);if(!e)return;A.current=e;const t=()=>{_.current=!1},i=()=>{if(!n)return;if(!_.current)return;const{activeId:e}=n.getState();null!==e&&e!==T.current&&(_.current=!1)},r={passive:!0,capture:!0};return e.addEventListener("wheel",t,r),e.addEventListener("touchmove",t,r),e.addEventListener("scroll",i,r),()=>{e.removeEventListener("wheel",t,!0),e.removeEventListener("touchmove",t,!0),e.removeEventListener("scroll",i,!0)}},[F,O,n]),cn(()=>{I&&(j.current||(_.current=!0))},[I]),cn(()=>{"always"!==C&&F||(_.current=F)},[C,F]);const z=n.useState("resetValueOnSelect");vn(()=>{var e,t;const i=_.current;if(!n)return;if(!F)return;if(!i&&!z)return;const{baseElement:r,contentElement:a,activeId:l}=n.getState();if(!r||Hi(r)){if(null==a?void 0:a.hasAttribute("data-placing")){const e=new MutationObserver(y);return e.observe(a,{attributeFilter:["data-placing"]}),()=>e.disconnect()}if(C&&i){const t=L(M),i=void 0!==t?t:null!=(e=function(e){const t=e.find(e=>{var t;return!e.disabled&&"tab"!==(null==(t=e.element)?void 0:t.getAttribute("role"))});return null==t?void 0:t.id}(M))?e:n.first();T.current=i,n.move(null!=i?i:null)}else{const e=null==(t=n.item(l||n.first()))?void 0:t.element;e&&"scrollIntoView"in e&&e.scrollIntoView({block:"nearest",inline:"nearest"})}}},[n,F,w,I,C,z,L,M]),(0,At.useEffect)(()=>{if(!S)return;const e=x.current;if(!e)return;const t=[e,O].filter(e=>!!e),i=e=>{t.every(t=>rn(e,t))&&(null==n||n.setValue(P))};for(const e of t)e.addEventListener("focusout",i);return()=>{for(const e of t)e.removeEventListener("focusout",i)}},[S,O,n,P]);const D=e=>e.currentTarget.value.length>=s,B=g.onChange,H=pn(null!=o?o:D),R=pn(null!=l?l:!n.tag),q=dn(e=>{if(null==B||B(e),e.defaultPrevented)return;if(!n)return;const t=e.currentTarget,{value:i,selectionStart:r,selectionEnd:a}=t,l=e.nativeEvent;if(_.current=!0,function(e){return"input"===e.type}(l)&&(l.isComposing&&(_.current=!1,j.current=!0),S)){const e="insertText"===l.inputType||"insertCompositionText"===l.inputType,t=r===i.length;V(e&&t)}if(R(e)){const e=i===n.getState().value;n.setValue(i),queueMicrotask(()=>{Zt(t,r,a)}),S&&C&&e&&y()}H(e)&&n.show(),C&&_.current||n.setActiveId(null)}),$=g.onCompositionEnd,W=dn(e=>{_.current=!0,j.current=!1,null==$||$(e),e.defaultPrevented||C&&y()}),U=g.onMouseDown,K=pn(null!=m?m:()=>!!(null==n?void 0:n.getState().includesBaseElement)),G=pn(v),Y=pn(null!=c?c:D),Z=dn(e=>{null==U||U(e),e.defaultPrevented||e.button||e.ctrlKey||n&&(K(e)&&n.setActiveId(null),G(e)&&n.setValue(P),Y(e)&&an(e.currentTarget,"mouseup",n.show))}),X=g.onKeyDown,Q=pn(null!=f?f:D),J=dn(e=>{if(null==X||X(e),e.repeat||(_.current=!1),e.defaultPrevented)return;if(e.ctrlKey)return;if(e.altKey)return;if(e.shiftKey)return;if(e.metaKey)return;if(!n)return;const{open:t}=n.getState();t||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||Q(e)&&(e.preventDefault(),n.show())}),ee=g.onBlur,te=dn(e=>{_.current=!1,null==ee||ee(e),e.defaultPrevented}),ne=mn(g.id),ie=function(e){return"inline"===e||"list"===e||"both"===e||"none"===e}(h)?h:void 0,re=n.useState(e=>null===e.activeId);return g=vt(mt({id:ne,role:"combobox","aria-autocomplete":ie,"aria-haspopup":Gt(O,"listbox"),"aria-expanded":F,"aria-controls":null==O?void 0:O.id,"data-active-item":re||void 0,value:P},g),{ref:fn(x,g.ref),onChange:q,onCompositionEnd:W,onMouseDown:Z,onKeyDown:J,onBlur:te}),g=nr(vt(mt({store:n,focusable:i},g),{moveOnKeyPress:e=>!function(e,...t){const n="function"==typeof e?e(...t):e;return null!=n&&!n}(p,e)&&(S&&V(!0),!0)})),g=ir(mt({store:n},g)),mt({autoComplete:"off"},g)}),sr=Cn(function(e){return kn("input",lr(e))});const or=window.ReactDOM;function ur(e,t){const n=setTimeout(t,e);return()=>clearTimeout(n)}function cr(...e){return e.join(", ").split(", ").reduce((e,t)=>{const n=t.endsWith("ms")?1:1e3,i=Number.parseFloat(t||"0s")*n;return i>e?i:e},0)}function dr(e,t,n){return!(n||!1===t||e&&!t)}var fr=Vn(function(t){var n=t,{store:i,alwaysVisible:r}=n,a=pt(n,["store","alwaysVisible"]);const l=pi();Mt(i=i||l,!1);const s=(0,At.useRef)(null),o=mn(a.id),[u,c]=(0,At.useState)(null),d=i.useState("open"),f=i.useState("mounted"),m=i.useState("animated"),v=i.useState("contentElement"),p=Xn(i.disclosure,"contentElement");cn(()=>{s.current&&(null==i||i.setContentElement(s.current))},[i]),cn(()=>{let e;return null==i||i.setState("animated",t=>(e=t,!0)),()=>{void 0!==e&&(null==i||i.setState("animated",e))}},[i]),cn(()=>{if(m){if(null==v?void 0:v.isConnected)return function(e){let t=requestAnimationFrame(()=>{t=requestAnimationFrame(e)});return()=>cancelAnimationFrame(t)}(()=>{c(d?"enter":f?"leave":null)});c(null)}},[m,v,d,f]),cn(()=>{if(!i)return;if(!m)return;if(!u)return;if(!v)return;const e=()=>null==i?void 0:i.setState("animating",!1),t=()=>(0,or.flushSync)(e);if("leave"===u&&d)return;if("enter"===u&&!d)return;if("number"==typeof m)return ur(m,t);const{transitionDuration:n,animationDuration:r,transitionDelay:a,animationDelay:l}=getComputedStyle(v),{transitionDuration:s="0",animationDuration:o="0",transitionDelay:c="0",animationDelay:f="0"}=p?getComputedStyle(p):{},h=cr(a,l,c,f)+cr(n,r,s,o);return h?ur(Math.max(h-1e3/60,0),t):("enter"===u&&i.setState("animated",!1),void e())},[i,m,v,p,d,u]),a=hn(a,t=>(0,e.jsx)(bi,{value:i,children:t}),[i]);const h=dr(f,a.hidden,r),g=a.style,b=(0,At.useMemo)(()=>h?vt(mt({},g),{display:"none"}):g,[h,g]);return Ot(a=vt(mt({id:o,"data-open":d||void 0,"data-enter":"enter"===u||void 0,"data-leave":"leave"===u||void 0,hidden:h},a),{ref:fn(o?i.setContentElement:null,s,a.ref),style:b}))}),mr=Cn(function(e){return kn("div",fr(e))}),vr=(Cn(function(t){var n=t,{unmountOnHide:i}=n,r=pt(n,["unmountOnHide"]);const a=pi();return!1===Xn(r.store||a,e=>!i||(null==e?void 0:e.mounted))?null:(0,e.jsx)(mr,mt({},r))}),Vn(function(t){var n=t,{store:i,alwaysVisible:r}=n,a=pt(n,["store","alwaysVisible"]);const l=ki(!0),s=Si(),o=!!(i=i||s)&&i===l;Mt(i,!1);const u=(0,At.useRef)(null),c=mn(a.id),d=i.useState("mounted"),f=dr(d,a.hidden,r),m=f?vt(mt({},a.style),{display:"none"}):a.style,v=i.useState(e=>Array.isArray(e.selectedValue)),p=function(e,t,n){const i=function(e){const[t]=(0,At.useState)(e);return t}(n),[r,a]=(0,At.useState)(i);return(0,At.useEffect)(()=>{const n=e&&"current"in e?e.current:e;if(!n)return;const r=()=>{const e=n.getAttribute(t);a(null==e?i:e)},l=new MutationObserver(r);return l.observe(n,{attributeFilter:[t]}),r(),()=>l.disconnect()},[e,t,i]),r}(u,"role",a.role),h=("listbox"===p||"tree"===p||"grid"===p)&&v||void 0,[g,b]=(0,At.useState)(!1),x=i.useState("contentElement");cn(()=>{if(!d)return;const e=u.current;if(!e)return;if(x!==e)return;const t=()=>{b(!!e.querySelector("[role='listbox']"))},n=new MutationObserver(t);return n.observe(e,{subtree:!0,childList:!0,attributeFilter:["role"]}),t(),()=>n.disconnect()},[d,x]),g||(a=mt({role:"listbox","aria-multiselectable":h},a)),a=hn(a,t=>(0,e.jsx)(Ei,{value:i,children:(0,e.jsx)(ji.Provider,{value:p,children:t})}),[i,p]);const w=!c||l&&o?null:i.setContentElement;return Ot(a=vt(mt({id:c,hidden:f},a),{ref:fn(w,u,a.ref),style:m}))})),pr=Cn(function(e){return kn("div",vr(e))});function hr(e){const t=e.relatedTarget;return(null==t?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null}var gr=Symbol("composite-hover"),br=Vn(function(e){var t=e,{store:n,focusOnHover:i=!0,blurOnHoverEnd:r=!!i}=t,a=pt(t,["store","focusOnHover","blurOnHoverEnd"]);const l=Fn();Mt(n=n||l,!1);const s=((0,At.useEffect)(()=>{gn||(ln("mousemove",yn,!0),ln("mousedown",jn,!0),ln("mouseup",jn,!0),ln("keydown",jn,!0),ln("scroll",jn,!0),gn=!0)},[]),dn(()=>bn)),o=a.onMouseMove,u=pn(i),c=dn(e=>{if(null==o||o(e),!e.defaultPrevented&&s()&&u(e)){if(!Ri(e.currentTarget)){const e=null==n?void 0:n.getState().baseElement;e&&!Hi(e)&&e.focus()}null==n||n.setActiveId(e.currentTarget.id)}}),d=a.onMouseLeave,f=pn(r),m=dn(e=>{var t;null==d||d(e),e.defaultPrevented||s()&&(function(e){const t=hr(e);return!!t&&Rt(e.currentTarget,t)}(e)||function(e){let t=hr(e);if(!t)return!1;do{if(Vt(t,gr)&&t[gr])return!0;t=t.parentElement}while(t);return!1}(e)||u(e)&&f(e)&&(null==n||n.setActiveId(null),null==(t=null==n?void 0:n.getState().baseElement)||t.focus()))}),v=(0,At.useCallback)(e=>{e&&(e[gr]=!0)},[]);return Ot(a=vt(mt({},a),{ref:fn(v,a.ref),onMouseMove:c,onMouseLeave:m}))}),xr=(Sn(Cn(function(e){return kn("div",br(e))})),Vn(function(e){var t=e,{store:n,shouldRegisterItem:i=!0,getItem:r=Nt,element:a}=t,l=pt(t,["store","shouldRegisterItem","getItem","element"]);const s=Nn();n=n||s;const o=mn(l.id),u=(0,At.useRef)(a);return(0,At.useEffect)(()=>{const e=u.current;if(!o)return;if(!e)return;if(!i)return;const t=r({id:o,element:e});return null==n?void 0:n.renderItem(t)},[o,i,r,n]),Ot(l=vt(mt({},l),{ref:fn(u,l.ref)}))}));function wr(e){if(!e.isTrusted)return!1;const t=e.currentTarget;return"Enter"===e.key?qt(t)||"SUMMARY"===t.tagName||"A"===t.tagName:" "===e.key&&(qt(t)||"SUMMARY"===t.tagName||"INPUT"===t.tagName||"SELECT"===t.tagName)}Cn(function(e){return kn("div",xr(e))});var yr=Symbol("command"),_r=Vn(function(e){var t=e,{clickOnEnter:n=!0,clickOnSpace:i=!0}=t,r=pt(t,["clickOnEnter","clickOnSpace"]);const a=(0,At.useRef)(null),[l,s]=(0,At.useState)(!1);(0,At.useEffect)(()=>{a.current&&s(qt(a.current))},[]);const[o,u]=(0,At.useState)(!1),c=(0,At.useRef)(!1),d=Ft(r),[f,m]=function(e,t,n){const i=e.onLoadedMetadataCapture,r=(0,At.useMemo)(()=>Object.assign(()=>{},vt(mt({},i),{[t]:n})),[i,t,n]);return[null==i?void 0:i[t],{onLoadedMetadataCapture:r}]}(r,yr,!0),v=r.onKeyDown,p=dn(e=>{null==v||v(e);const t=e.currentTarget;if(e.defaultPrevented)return;if(f)return;if(d)return;if(!en(e))return;if(Wt(t))return;if(t.isContentEditable)return;const r=n&&"Enter"===e.key,a=i&&" "===e.key,l="Enter"===e.key&&!n,s=" "===e.key&&!i;if(l||s)e.preventDefault();else if(r||a){const n=wr(e);if(r){if(!n){e.preventDefault();const n=e,{view:i}=n,r=pt(n,["view"]),a=()=>nn(t,r);Dt&&/firefox\//i.test(navigator.userAgent)?an(t,"keyup",a):queueMicrotask(a)}}else a&&(c.current=!0,n||(e.preventDefault(),u(!0)))}}),h=r.onKeyUp,g=dn(e=>{if(null==h||h(e),e.defaultPrevented)return;if(f)return;if(d)return;if(e.metaKey)return;const t=i&&" "===e.key;if(c.current&&t&&(c.current=!1,!wr(e))){e.preventDefault(),u(!1);const t=e.currentTarget,n=e,{view:i}=n,r=pt(n,["view"]);queueMicrotask(()=>nn(t,r))}});return r=vt(mt(mt({"data-active":o||void 0,type:l?"button":void 0},m),r),{ref:fn(a,r.ref),onKeyDown:p,onKeyUp:g}),er(r)});function jr(e,t=!1){const{top:n}=e.getBoundingClientRect();return t?n+e.clientHeight:n}function Cr(e,t,n,i=!1){var r;if(!t)return;if(!n)return;const{renderedItems:a}=t.getState(),l=Yt(e);if(!l)return;const s=function(e,t=!1){const n=e.clientHeight,{top:i}=e.getBoundingClientRect(),r=1.5*Math.max(.875*n,n-40),a=t?n-r+i:r+i;return"HTML"===e.tagName?a+e.scrollTop:a}(l,i);let o,u;for(let e=0;e<a.length;e+=1){const a=o;if(o=n(e),!o)break;if(o===a)continue;const l=null==(r=Ai(t,o))?void 0:r.element;if(!l)continue;const c=jr(l,i)-s,d=Math.abs(c);if(i&&c<=0||!i&&c>=0){void 0!==u&&u<d&&(o=a);break}u=d}return o}Cn(function(e){return kn("button",_r(e))});var Sr=Vn(function(t){var n=t,{store:i,rowId:r,preventScrollOnKeyDown:a=!1,moveOnKeyPress:l=!0,tabbable:s=!1,getItem:o,"aria-setsize":u,"aria-posinset":c}=n,d=pt(n,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const f=Fn();i=i||f;const m=mn(d.id),v=(0,At.useRef)(null),p=(0,At.useContext)(Tn),h=Ft(d)&&!d.accessibleWhenDisabled,{rowId:g,baseElement:b,isActiveItem:x,ariaSetSize:w,ariaPosInSet:y,isTabbable:_}=Qn(i,{rowId:e=>r||(e&&(null==p?void 0:p.baseElement)&&p.baseElement===e.baseElement?p.id:void 0),baseElement:e=>(null==e?void 0:e.baseElement)||void 0,isActiveItem:e=>!!e&&e.activeId===m,ariaSetSize:e=>null!=u?u:e&&(null==p?void 0:p.ariaSetSize)&&p.baseElement===e.baseElement?p.ariaSetSize:void 0,ariaPosInSet(e){if(null!=c)return c;if(!e)return;if(!(null==p?void 0:p.ariaPosInSet))return;if(p.baseElement!==e.baseElement)return;const t=e.renderedItems.filter(e=>e.rowId===g);return p.ariaPosInSet+t.findIndex(e=>e.id===m)},isTabbable(e){if(!(null==e?void 0:e.renderedItems.length))return!0;if(e.virtualFocus)return!1;if(s)return!0;if(null===e.activeId)return!1;const t=null==i?void 0:i.item(e.activeId);return!!(null==t?void 0:t.disabled)||!(null==t?void 0:t.element)||e.activeId===m}}),j=(0,At.useCallback)(e=>{var t;const n=vt(mt({},e),{id:m||e.id,rowId:g,disabled:!!h,children:null==(t=e.element)?void 0:t.textContent});return o?o(n):n},[m,g,h,o]),C=d.onFocus,S=(0,At.useRef)(!1),k=dn(e=>{if(null==C||C(e),e.defaultPrevented)return;if(Jt(e))return;if(!m)return;if(!i)return;if(function(e,t){return!en(e)&&Ti(t,e.target)}(e,i))return;const{virtualFocus:t,baseElement:n}=i.getState();var r;(i.setActiveId(m),Ut(e.currentTarget)&&function(e,t=!1){if(Wt(e))e.setSelectionRange(t?e.value.length:0,e.value.length);else if(e.isContentEditable){const n=Bt(e).getSelection();null==n||n.selectAllChildren(e),t&&(null==n||n.collapseToEnd())}}(e.currentTarget),t)&&(en(e)&&(Ut(r=e.currentTarget)||"INPUT"===r.tagName&&!qt(r)||(null==n?void 0:n.isConnected)&&(Qt()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),S.current=!0,e.relatedTarget===n||Ti(i,e.relatedTarget)?function(e){e[Li]=!0,e.focus({preventScroll:!0})}(n):n.focus())))}),V=d.onBlurCapture,I=dn(e=>{if(null==V||V(e),e.defaultPrevented)return;const t=null==i?void 0:i.getState();(null==t?void 0:t.virtualFocus)&&S.current&&(S.current=!1,e.preventDefault(),e.stopPropagation())}),E=d.onKeyDown,N=pn(a),M=pn(l),F=dn(e=>{if(null==E||E(e),e.defaultPrevented)return;if(!en(e))return;if(!i)return;const{currentTarget:t}=e,n=i.getState(),r=i.item(m),a=!!(null==r?void 0:r.rowId),l="horizontal"!==n.orientation,s="vertical"!==n.orientation,o=()=>!(!a&&!s&&n.baseElement&&Wt(n.baseElement)),u={ArrowUp:(a||l)&&i.up,ArrowRight:(a||s)&&i.next,ArrowDown:(a||l)&&i.down,ArrowLeft:(a||s)&&i.previous,Home:()=>{if(o())return!a||e.ctrlKey?null==i?void 0:i.first():null==i?void 0:i.previous(-1)},End:()=>{if(o())return!a||e.ctrlKey?null==i?void 0:i.last():null==i?void 0:i.next(-1)},PageUp:()=>Cr(t,i,null==i?void 0:i.up,!0),PageDown:()=>Cr(t,i,null==i?void 0:i.down)}[e.key];if(u){if(Ut(t)){const n=Kt(t),i=s&&"ArrowLeft"===e.key,r=s&&"ArrowRight"===e.key,a=l&&"ArrowUp"===e.key,o=l&&"ArrowDown"===e.key;if(r||o){const{length:e}=function(e){if(Wt(e))return e.value;if(e.isContentEditable){const t=Bt(e).createRange();return t.selectNodeContents(e),t.toString()}return""}(t);if(n.end!==e)return}else if((i||a)&&0!==n.start)return}const n=u();if(N(e)||void 0!==n){if(!M(e))return;e.preventDefault(),i.move(n)}}}),O=(0,At.useMemo)(()=>({id:m,baseElement:b}),[m,b]);return d=hn(d,t=>(0,e.jsx)(Ln.Provider,{value:O,children:t}),[O]),d=vt(mt({id:m,"data-active-item":x||void 0},d),{ref:fn(v,d.ref),tabIndex:_?d.tabIndex:-1,onFocus:k,onBlurCapture:I,onKeyDown:F}),d=_r(d),d=xr(vt(mt({store:i},d),{getItem:j,shouldRegisterItem:!!m&&d.shouldRegisterItem})),Ot(vt(mt({},d),{"aria-setsize":w,"aria-posinset":y}))});function kr(e){var t;return null!=(t={menu:"menuitem",listbox:"option",tree:"treeitem"}[e])?t:"option"}Sn(Cn(function(e){return kn("button",Sr(e))}));var Vr=Vn(function(t){var n,i=t,{store:r,value:a,hideOnClick:l,setValueOnClick:s,selectValueOnClick:o=!0,resetValueOnSelect:u,focusOnHover:c=!1,moveOnKeyPress:d=!0,getItem:f}=i,m=pt(i,["store","value","hideOnClick","setValueOnClick","selectValueOnClick","resetValueOnSelect","focusOnHover","moveOnKeyPress","getItem"]);const v=ki();Mt(r=r||v,!1);const{resetValueOnSelectState:p,multiSelectable:h,selected:g}=Qn(r,{resetValueOnSelectState:"resetValueOnSelect",multiSelectable:e=>Array.isArray(e.selectedValue),selected:e=>function(e,t){if(null!=t)return null!=e&&(Array.isArray(e)?e.includes(t):e===t)}(e.selectedValue,a)}),b=(0,At.useCallback)(e=>{const t=vt(mt({},e),{value:a});return f?f(t):t},[a,f]);s=null!=s?s:!h,l=null!=l?l:null!=a&&!h;const x=m.onClick,w=pn(s),y=pn(o),_=pn(null!=(n=null!=u?u:p)?n:h),j=pn(l),C=dn(e=>{null==x||x(e),e.defaultPrevented||function(e){const t=e.currentTarget;if(!t)return!1;const n=t.tagName.toLowerCase();return!!e.altKey&&("a"===n||"button"===n&&"submit"===t.type||"input"===n&&"submit"===t.type)}(e)||function(e){const t=e.currentTarget;if(!t)return!1;const n=Xt();if(n&&!e.metaKey)return!1;if(!n&&!e.ctrlKey)return!1;const i=t.tagName.toLowerCase();return"a"===i||"button"===i&&"submit"===t.type||"input"===i&&"submit"===t.type}(e)||(null!=a&&(y(e)&&(_(e)&&(null==r||r.resetValue()),null==r||r.setSelectedValue(e=>Array.isArray(e)?e.includes(a)?e.filter(e=>e!==a):[...e,a]:a)),w(e)&&(null==r||r.setValue(a))),j(e)&&(null==r||r.hide()))}),S=m.onKeyDown,k=dn(e=>{if(null==S||S(e),e.defaultPrevented)return;const t=null==r?void 0:r.getState().baseElement;t&&(Hi(t)||(1===e.key.length||"Backspace"===e.key||"Delete"===e.key)&&(queueMicrotask(()=>t.focus()),Wt(t)&&(null==r||r.setValue(t.value))))});h&&null!=g&&(m=mt({"aria-selected":g},m)),m=hn(m,t=>(0,e.jsx)(Ni.Provider,{value:a,children:(0,e.jsx)(Mi.Provider,{value:null!=g&&g,children:t})}),[a,g]);const V=(0,At.useContext)(ji);m=vt(mt({role:kr(V),children:a},m),{onClick:C,onKeyDown:k});const I=pn(d);return m=Sr(vt(mt({store:r},m),{getItem:b,moveOnKeyPress:e=>{if(!I(e))return!1;const t=new Event("combobox-item-move"),n=null==r?void 0:r.getState().baseElement;return null==n||n.dispatchEvent(t),!0}})),br(mt({store:r,focusOnHover:c},m))}),Ir=Sn(Cn(function(e){return kn("div",Vr(e))}));function Er(e){return Et(e).toLowerCase()}var Nr=Vn(function(t){var n=t,{store:i,value:r,userValue:a}=n,l=pt(n,["store","value","userValue"]);const s=ki();i=i||s;const o=(0,At.useContext)(Ni),u=null!=r?r:o,c=Xn(i,e=>null!=a?a:null==e?void 0:e.value),d=(0,At.useMemo)(()=>{if(u)return c?function(t,n){if(!t)return t;if(!n)return t;const i=(r=n,Array.isArray(r)?r:void 0!==r?[r]:[]).filter(Boolean).map(Er);var r;const a=[],l=(t,n=!1)=>(0,e.jsx)("span",{"data-autocomplete-value":n?"":void 0,"data-user-value":n?void 0:"",children:t},a.length),s=function(e){return e.sort(([e],[t])=>e-t)}(function(e){return e.filter(([e,t],n,i)=>!i.some(([i,r],a)=>a!==n&&i<=e&&i+r>=e+t))}(function(e,t){const n=[];for(const i of t){let t=0;const r=i.length;for(;-1!==e.indexOf(i,t);){const a=e.indexOf(i,t);-1!==a&&n.push([a,r]),t=a+1}}return n}(Er(t),new Set(i))));if(!s.length)return a.push(l(t,!0)),a;const[o]=s[0],u=[t.slice(0,o),...s.flatMap(([e,n],i)=>{var r;const a=t.slice(e,e+n),l=null==(r=s[i+1])?void 0:r[0];return[a,t.slice(e+n,l)]})];return u.forEach((e,t)=>{e&&a.push(l(e,t%2==0))}),a}(u,c):u},[u,c]);return Ot(l=mt({children:d},l))}),Mr=Cn(function(e){return kn("span",Nr(e))}),Fr=r(731),Or=r.n(Fr),Pr=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M16.5 7.5 10 13.9l-2.5-2.4-1 1 3.5 3.6 7.5-7.6z"})}),Ar=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})});const Lr=[],Tr=(e,t)=>e.singleSelection?t?.value:Array.isArray(t?.value)?t.value:!Array.isArray(t?.value)&&t?.value?[t.value]:Lr,zr=[];function Dr({elements:e,getElements:t}){const n=Array.isArray(e)&&e.length>0?e:zr,[i,r]=(0,a.useState)(n),[l,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!t)return void r(n);let e=!1;return s(!0),t().then(t=>{if(!e){const e=Array.isArray(t)&&t.length>0?t:n;r(e)}}).catch(()=>{e||r(n)}).finally(()=>{e||s(!1)}),()=>{e=!0}},[t,n]),{elements:i,isLoading:l}}function Br(e=""){return Or()(e.trim().toLowerCase())}const Hr=(e,t,n)=>e.singleSelection?n:Array.isArray(t?.value)?t.value.includes(n)?t.value.filter(e=>e!==n):[...t.value,n]:[n];function Rr(e,t){return`${e}-${t}`}const qr=({selected:t})=>(0,e.jsx)("span",{className:J("dataviews-filters__search-widget-listitem-multi-selection",{"is-selected":t}),children:t&&(0,e.jsx)(i.Icon,{icon:Pr})}),$r=({selected:t})=>(0,e.jsx)("span",{className:J("dataviews-filters__search-widget-listitem-single-selection",{"is-selected":t})});function Wr({view:t,filter:n,onChangeView:r}){const l=(0,c.useInstanceId)(Wr,"dataviews-filter-list-box"),[s,u]=(0,a.useState)(1===n.operators?.length?void 0:null),d=t.filters?.find(e=>e.field===n.field),f=Tr(n,d);return(0,e.jsx)(i.Composite,{virtualFocus:!0,focusLoop:!0,activeId:s,setActiveId:u,role:"listbox",className:"dataviews-filters__search-widget-listbox","aria-label":(0,o.sprintf)(
/* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */
/* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */
(0,o.__)("List of: %1$s"),n.name),onFocusVisible:()=>{!s&&n.elements.length&&u(Rr(l,n.elements[0].value))},render:(0,e.jsx)(i.Composite.Typeahead,{}),children:n.elements.map(a=>(0,e.jsxs)(i.Composite.Hover,{render:(0,e.jsx)(i.Composite.Item,{id:Rr(l,a.value),render:(0,e.jsx)("div",{"aria-label":a.label,role:"option",className:"dataviews-filters__search-widget-listitem"}),onClick:()=>{const e=d?[...(t.filters??[]).map(e=>e.field===n.field?{...e,operator:d.operator||n.operators[0],value:Hr(n,d,a.value)}:e)]:[...t.filters??[],{field:n.field,operator:n.operators[0],value:Hr(n,d,a.value)}];r({...t,page:1,filters:e})}}),children:[n.singleSelection&&(0,e.jsx)($r,{selected:f===a.value}),!n.singleSelection&&(0,e.jsx)(qr,{selected:f.includes(a.value)}),(0,e.jsx)("span",{children:a.label})]},a.value))})}function Ur({view:t,filter:n,onChangeView:r}){const[l,s]=(0,a.useState)(""),u=(0,a.useDeferredValue)(l),c=t.filters?.find(e=>e.field===n.field),d=Tr(n,c),f=(0,a.useMemo)(()=>{const e=Br(u);return n.elements.filter(t=>Br(t.label).includes(e))},[n.elements,u]);return(0,e.jsxs)(Fi,{selectedValue:d,setSelectedValue:e=>{const i=c?[...(t.filters??[]).map(t=>t.field===n.field?{...t,operator:c.operator||n.operators[0],value:e}:t)]:[...t.filters??[],{field:n.field,operator:n.operators[0],value:e}];r({...t,page:1,filters:i})},setValue:s,children:[(0,e.jsxs)("div",{className:"dataviews-filters__search-widget-filter-combobox__wrapper",children:[(0,e.jsx)(Pi,{render:(0,e.jsx)(i.VisuallyHidden,{children:(0,o.__)("Search items")}),children:(0,o.__)("Search items")}),(0,e.jsx)(sr,{autoSelect:"always",placeholder:(0,o.__)("Search"),className:"dataviews-filters__search-widget-filter-combobox__input"}),(0,e.jsx)("div",{className:"dataviews-filters__search-widget-filter-combobox__icon",children:(0,e.jsx)(i.Icon,{icon:Ar})})]}),(0,e.jsxs)(pr,{className:"dataviews-filters__search-widget-filter-combobox-list",alwaysVisible:!0,children:[f.map(t=>(0,e.jsxs)(Ir,{resetValueOnSelect:!1,value:t.value,className:"dataviews-filters__search-widget-listitem",hideOnClick:!1,setValueOnClick:!1,focusOnHover:!0,children:[n.singleSelection&&(0,e.jsx)($r,{selected:d===t.value}),!n.singleSelection&&(0,e.jsx)(qr,{selected:d.includes(t.value)}),(0,e.jsxs)("span",{children:[(0,e.jsx)(Mr,{className:"dataviews-filters__search-widget-filter-combobox-item-value",value:t.label}),!!t.description&&(0,e.jsx)("span",{className:"dataviews-filters__search-widget-listitem-description",children:t.description})]})]},t.value)),!f.length&&(0,e.jsx)("p",{children:(0,o.__)("No results found")})]})]})}function Kr(t){const{elements:n,isLoading:r}=Dr({elements:t.filter.elements,getElements:t.filter.getElements});if(r)return(0,e.jsx)("div",{className:"dataviews-filters__search-widget-no-elements",children:(0,e.jsx)(i.Spinner,{})});if(0===n.length)return(0,e.jsx)("div",{className:"dataviews-filters__search-widget-no-elements",children:(0,o.__)("No elements found")});const a=n.length>10?Ur:Wr;return(0,e.jsx)(a,{...t,filter:{...t.filter,elements:n}})}var Gr=r(252),Yr=r.n(Gr);function Zr({filter:t,view:n,onChangeView:r,fields:l}){const s=n.filters?.find(e=>e.field===t.field),o=Tr(t,s),u=(0,a.useMemo)(()=>{const e=l.find(e=>e.id===t.field);return e?{...e,isValid:{required:!1,custom:()=>null},getValue:({item:t})=>t[e.id],setValue:({value:t})=>({[e.id]:t})}:e},[l,t.field]),d=(0,a.useMemo)(()=>(n.filters??[]).reduce((e,t)=>(e[t.field]=t.value,e),{}),[n.filters]),f=(0,c.useEvent)(e=>{if(!u||!s)return;const i=u.getValue({item:e});Yr()(i,o)||r({...n,filters:(n.filters??[]).map(e=>e.field===t.field?{...e,operator:s.operator||t.operators[0],value:""===i?void 0:i}:e)})});return u&&u.Edit&&s?(0,e.jsx)(i.Flex,{className:"dataviews-filters__user-input-widget",gap:2.5,direction:"column",children:(0,e.jsx)(u.Edit,{hideLabelFromVision:!0,data:d,field:u,operator:s.operator,onChange:f})}):null}const Xr="Enter",Qr=" ",Jr=({activeElements:t,filterInView:n,filter:i})=>{if(void 0===t||0===t.length)return i.name;const r={Name:(0,e.jsx)("span",{className:"dataviews-filters__summary-filter-text-name"}),Value:(0,e.jsx)("span",{className:"dataviews-filters__summary-filter-text-value"})};if(n?.operator===h)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is any: Admin, Editor". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is any: Admin, Editor". */
(0,o.__)("<Name>%1$s is any: </Name><Value>%2$s</Value>"),i.name,t.map(e=>e.label).join(", ")),r);if(n?.operator===g)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is none: Admin, Editor". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is none: Admin, Editor". */
(0,o.__)("<Name>%1$s is none: </Name><Value>%2$s</Value>"),i.name,t.map(e=>e.label).join(", ")),r);if(n?.operator===b)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is all: Admin, Editor". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is all: Admin, Editor". */
(0,o.__)("<Name>%1$s is all: </Name><Value>%2$s</Value>"),i.name,t.map(e=>e.label).join(", ")),r);if(n?.operator===x)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is not all: Admin, Editor". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is not all: Admin, Editor". */
(0,o.__)("<Name>%1$s is not all: </Name><Value>%2$s</Value>"),i.name,t.map(e=>e.label).join(", ")),r);if(n?.operator===v)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is: Admin". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is: Admin". */
(0,o.__)("<Name>%1$s is: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===p)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is not: Admin". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Author is not: Admin". */
(0,o.__)("<Name>%1$s is not: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===w)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is less than: 10". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is less than: 10". */
(0,o.__)("<Name>%1$s is less than: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===y)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is greater than: 10". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is greater than: 10". */
(0,o.__)("<Name>%1$s is greater than: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===_)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is less than or equal to: 10". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is less than or equal to: 10". */
(0,o.__)("<Name>%1$s is less than or equal to: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===j)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is greater than or equal to: 10". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Price is greater than or equal to: 10". */
(0,o.__)("<Name>%1$s is greater than or equal to: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===I)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Title contains: Mars". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Title contains: Mars". */
(0,o.__)("<Name>%1$s contains: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===E)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Description doesn't contain: photo". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Description doesn't contain: photo". */
(0,o.__)("<Name>%1$s doesn't contain: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===N)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Title starts with: Mar". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Title starts with: Mar". */
(0,o.__)("<Name>%1$s starts with: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===C)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is before: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is before: 2024-01-01". */
(0,o.__)("<Name>%1$s is before: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===S)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is after: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is after: 2024-01-01". */
(0,o.__)("<Name>%1$s is after: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===k)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is on or before: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is on or before: 2024-01-01". */
(0,o.__)("<Name>%1$s is on or before: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===V)return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is on or after: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is on or after: 2024-01-01". */
(0,o.__)("<Name>%1$s is on or after: </Name><Value>%2$s</Value>"),i.name,t[0].label),r);if(n?.operator===M){const{label:e}=t[0];return(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Min value. 3: Max value. e.g.: "Item count between (inc): 10 and 180". */
/* translators: 1: Filter name. 2: Min value. 3: Max value. e.g.: "Item count between (inc): 10 and 180". */
(0,o.__)("<Name>%1$s between (inc): </Name><Value>%2$s and %3$s</Value>"),i.name,e[0],e[1]),r)}return n?.operator===F?(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is: 2024-01-01". */
(0,o.__)("<Name>%1$s is: </Name><Value>%2$s</Value>"),i.name,t[0].label),r):n?.operator===O?(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is not: 2024-01-01". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is not: 2024-01-01". */
(0,o.__)("<Name>%1$s is not: </Name><Value>%2$s</Value>"),i.name,t[0].label),r):n?.operator===P?(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is in the past: 1 days". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is in the past: 1 days". */
(0,o.__)("<Name>%1$s is in the past: </Name><Value>%2$s</Value>"),i.name,`${t[0].value.value} ${t[0].value.unit}`),r):n?.operator===A?(0,a.createInterpolateElement)((0,o.sprintf)(
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is over: 1 days ago". */
/* translators: 1: Filter name. 2: Filter value. e.g.: "Date is over: 1 days ago". */
(0,o.__)("<Name>%1$s is over: </Name><Value>%2$s</Value> ago"),i.name,`${t[0].value.value} ${t[0].value.unit}`),r):(0,o.sprintf)(
/* translators: 1: Filter name e.g.: "Unknown status for Author". */
/* translators: 1: Filter name e.g.: "Unknown status for Author". */
(0,o.__)("Unknown status for %1$s"),i.name)};function ea({filter:t,view:n,onChangeView:r}){const a=t.operators?.map(e=>({value:e,label:z[e]?.label})),l=n.filters?.find(e=>e.field===t.field),s=l?.operator||t.operators[0];return a.length>1&&(0,e.jsxs)(i.__experimentalHStack,{spacing:2,justify:"flex-start",className:"dataviews-filters__summary-operators-container",children:[(0,e.jsx)(i.FlexItem,{className:"dataviews-filters__summary-operators-filter-name",children:t.name}),(0,e.jsx)(i.SelectControl,{className:"dataviews-filters__summary-operators-filter-select",label:(0,o.__)("Conditions"),value:s,options:a,onChange:e=>{const i=e,a=l?.operator,s=l?[...(n.filters??[]).map(e=>{if(e.field===t.field){const t=[M,P,A],n=a&&(t.includes(a)||t.includes(i));return{...e,value:n?void 0:e.value,operator:i}}return e})]:[...n.filters??[],{field:t.field,operator:i,value:void 0}];r({...n,page:1,filters:s})},size:"small",variant:"minimal",__nextHasNoMarginBottom:!0,hideLabelFromVision:!0})]})}function ta({addFilterRef:t,openedFilter:n,fields:r,...l}){const s=(0,a.useRef)(null),{filter:u,view:c,onChangeView:d}=l,f=c.filters?.find(e=>e.field===u.field);let m=[];const{elements:v}=Dr({elements:u.elements,getElements:u.getElements});v.length>0?m=v.filter(e=>u.singleSelection?e.value===f?.value:f?.value?.includes(e.value)):void 0!==f?.value&&(m=[{value:f.value,label:f.value}]);const p=u.isPrimary,h=f?.isLocked,g=!h&&void 0!==f?.value,b=!h&&(!p||g);return(0,e.jsx)(i.Dropdown,{defaultOpen:n===u.field,contentClassName:"dataviews-filters__summary-popover",popoverProps:{placement:"bottom-start",role:"dialog"},onClose:()=>{s.current?.focus()},renderToggle:({isOpen:n,onToggle:r})=>(0,e.jsxs)("div",{className:"dataviews-filters__summary-chip-container",children:[(0,e.jsx)(i.Tooltip,{text:(0,o.sprintf)(
/* translators: 1: Filter name. */
/* translators: 1: Filter name. */
(0,o.__)("Filter by: %1$s"),u.name.toLowerCase()),placement:"top",children:(0,e.jsx)("div",{className:J("dataviews-filters__summary-chip",{"has-reset":b,"has-values":g,"is-not-clickable":h}),role:"button",tabIndex:h?-1:0,onClick:()=>{h||r()},onKeyDown:e=>{!h&&[Xr,Qr].includes(e.key)&&(r(),e.preventDefault())},"aria-disabled":h,"aria-pressed":n,"aria-expanded":n,ref:s,children:(0,e.jsx)(Jr,{activeElements:m,filterInView:f,filter:u})})}),b&&(0,e.jsx)(i.Tooltip,{text:p?(0,o.__)("Reset"):(0,o.__)("Remove"),placement:"top",children:(0,e.jsx)("button",{className:J("dataviews-filters__summary-chip-remove",{"has-values":g}),onClick:()=>{d({...c,page:1,filters:c.filters?.filter(e=>e.field!==u.field)}),p?s.current?.focus():t.current?.focus()},children:(0,e.jsx)(i.Icon,{icon:he})})})]}),renderContent:()=>(0,e.jsxs)(i.__experimentalVStack,{spacing:0,justify:"flex-start",children:[(0,e.jsx)(ea,{...l}),l.filter.hasElements?(0,e.jsx)(Kr,{...l,filter:{...l.filter,elements:v}}):(0,e.jsx)(Zr,{...l,fields:r})]})})}function na({filters:t,view:n,onChangeView:r}){const a=!n.search&&!n.filters?.some(e=>{return!(e.isLocked||void 0===e.value&&(n=e.field,t.some(e=>e.field===n&&e.isPrimary)));var n});return(0,e.jsx)(i.Button,{disabled:a,accessibleWhenDisabled:!0,size:"compact",variant:"tertiary",className:"dataviews-filters__reset-button",onClick:()=>{r({...n,page:1,search:"",filters:n.filters?.filter(e=>!!e.isLocked)||[]})},children:(0,o.__)("Reset")})}var ia=function(e,t){return(0,a.useMemo)(()=>{const n=[];return e.forEach(e=>{if(!1===e.filterBy||!e.hasElements&&!e.Edit)return;const i=e.filterBy.operators,r=!!e.filterBy?.isPrimary,a=t.filters?.some(t=>t.field===e.id&&!!t.isLocked)??!1;n.push({field:e.id,name:e.label,elements:e.elements,getElements:e.getElements,hasElements:e.hasElements,singleSelection:i.some(e=>T.includes(e)),operators:i,isVisible:a||r||!!t.filters?.some(t=>t.field===e.id&&L.includes(t.operator)),isPrimary:r,isLocked:a})}),n.sort((e,t)=>e.isLocked&&!t.isLocked?-1:!e.isLocked&&t.isLocked?1:e.isPrimary&&!t.isPrimary?-1:!e.isPrimary&&t.isPrimary?1:e.name.localeCompare(t.name)),n},[e,t])},ra=(0,a.memo)(function({className:t}){const{fields:n,view:r,onChangeView:l,openedFilter:s,setOpenedFilter:o}=(0,a.useContext)(K),u=(0,a.useRef)(null),c=ia(n,r),d=(0,e.jsx)(it,{filters:c,view:r,onChangeView:l,ref:u,setOpenedFilter:o},"add-filter"),f=c.filter(e=>e.isVisible);if(0===f.length)return null;const m=[...f.map(t=>(0,e.jsx)(ta,{filter:t,view:r,fields:n,onChangeView:l,addFilterRef:u,openedFilter:s},t.field)),d];return m.push((0,e.jsx)(na,{filters:c,view:r,onChangeView:l},"reset-filters")),(0,e.jsx)(i.__experimentalHStack,{justify:"flex-start",style:{width:"fit-content"},wrap:!0,className:t,children:m})}),aa=function(t){const{isShowingFilter:n}=(0,a.useContext)(K);return n?(0,e.jsx)(ra,{...t}):null};function la({className:t}){const{actions:n=[],data:i,fields:r,getItemId:l,getItemLevel:s,isLoading:u,view:c,onChangeView:d,selection:f,onChangeSelection:m,setOpenedFilter:v,onClickItem:p,isItemClickable:h,renderItemLink:g,defaultLayouts:b,empty:x=(0,e.jsx)("p",{children:(0,o.__)("No results")})}=(0,a.useContext)(K),w=et.find(e=>e.type===c.type&&b[e.type])?.component;return(0,e.jsx)(w,{className:t,actions:n,data:i,fields:r,getItemId:l,getItemLevel:s,isLoading:u,onChangeView:d,onChangeSelection:m,selection:f,setOpenedFilter:v,onClickItem:p,renderItemLink:g,isItemClickable:h,view:c,empty:x})}var sa=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})}),oa=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})});function ua(){const{view:t,onChangeView:n,paginationInfo:{totalItems:r=0,totalPages:l}}=(0,a.useContext)(K);if(!r||!l||t.infiniteScrollEnabled)return null;const s=t.page??1,u=Array.from(Array(l)).map((e,t)=>{const n=t+1;return{value:n.toString(),label:n.toString(),"aria-label":s===n?(0,o.sprintf)(
// translators: 1: current page number. 2: total number of pages.
// translators: 1: current page number. 2: total number of pages.
(0,o.__)("Page %1$d of %2$d"),s,l):n.toString()}});return!!r&&1!==l&&(0,e.jsxs)(i.__experimentalHStack,{expanded:!1,className:"dataviews-pagination",justify:"end",spacing:6,children:[(0,e.jsx)(i.__experimentalHStack,{justify:"flex-start",expanded:!1,spacing:1,className:"dataviews-pagination__page-select",children:(0,a.createInterpolateElement)((0,o.sprintf)(
// translators: 1: Current page number, 2: Total number of pages.
// translators: 1: Current page number, 2: Total number of pages.
(0,o._x)("<div>Page</div>%1$s<div>of %2$d</div>","paging"),"<CurrentPage />",l),{div:(0,e.jsx)("div",{"aria-hidden":!0}),CurrentPage:(0,e.jsx)(i.SelectControl,{"aria-label":(0,o.__)("Current page"),value:s.toString(),options:u,onChange:e=>{n({...t,page:+e})},size:"small",__nextHasNoMarginBottom:!0,variant:"minimal"})})}),(0,e.jsxs)(i.__experimentalHStack,{expanded:!1,spacing:1,children:[(0,e.jsx)(i.Button,{onClick:()=>n({...t,page:s-1}),disabled:1===s,accessibleWhenDisabled:!0,label:(0,o.__)("Previous page"),icon:(0,o.isRTL)()?sa:oa,showTooltip:!0,size:"compact",tooltipPosition:"top"}),(0,e.jsx)(i.Button,{onClick:()=>n({...t,page:s+1}),disabled:s>=l,accessibleWhenDisabled:!0,label:(0,o.__)("Next page"),icon:(0,o.isRTL)()?oa:sa,showTooltip:!0,size:"compact",tooltipPosition:"top"})]})]})}var ca=(0,a.memo)(ua);const da=[];function fa(){const{view:t,paginationInfo:{totalItems:n=0,totalPages:r},data:l,actions:s=da}=(0,a.useContext)(K),o=xe(s,l)&&[$,W].includes(t.type);return!n||!r||r<=1&&!o?null:!!n&&(0,e.jsxs)(i.__experimentalHStack,{expanded:!1,justify:"end",className:"dataviews-footer",children:[o&&(0,e.jsx)(ke,{}),(0,e.jsx)(ca,{})]})}var ma=(0,a.memo)(function({label:t}){const{view:n,onChangeView:r}=(0,a.useContext)(K),[l,s,u]=(0,c.useDebouncedInput)(n.search);(0,a.useEffect)(()=>{s(n.search??"")},[n.search,s]);const d=(0,a.useRef)(r),f=(0,a.useRef)(n);(0,a.useEffect)(()=>{d.current=r,f.current=n},[r,n]),(0,a.useEffect)(()=>{u!==f.current?.search&&d.current({...f.current,page:1,search:u})},[u]);const m=t||(0,o.__)("Search");return(0,e.jsx)(i.SearchControl,{className:"dataviews-search",__nextHasNoMarginBottom:!0,onChange:s,value:l,label:m,placeholder:m,size:"compact"})}),va=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z"})}),pa=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),ha=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),ga=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M3.99961 13C4.67043 13.3354 4.6703 13.3357 4.67017 13.3359L4.67298 13.3305C4.67621 13.3242 4.68184 13.3135 4.68988 13.2985C4.70595 13.2686 4.7316 13.2218 4.76695 13.1608C4.8377 13.0385 4.94692 12.8592 5.09541 12.6419C5.39312 12.2062 5.84436 11.624 6.45435 11.0431C7.67308 9.88241 9.49719 8.75 11.9996 8.75C14.502 8.75 16.3261 9.88241 17.5449 11.0431C18.1549 11.624 18.6061 12.2062 18.9038 12.6419C19.0523 12.8592 19.1615 13.0385 19.2323 13.1608C19.2676 13.2218 19.2933 13.2686 19.3093 13.2985C19.3174 13.3135 19.323 13.3242 19.3262 13.3305L19.3291 13.3359C19.3289 13.3357 19.3288 13.3354 19.9996 13C20.6704 12.6646 20.6703 12.6643 20.6701 12.664L20.6697 12.6632L20.6688 12.6614L20.6662 12.6563L20.6583 12.6408C20.6517 12.6282 20.6427 12.6108 20.631 12.5892C20.6078 12.5459 20.5744 12.4852 20.5306 12.4096C20.4432 12.2584 20.3141 12.0471 20.1423 11.7956C19.7994 11.2938 19.2819 10.626 18.5794 9.9569C17.1731 8.61759 14.9972 7.25 11.9996 7.25C9.00203 7.25 6.82614 8.61759 5.41987 9.9569C4.71736 10.626 4.19984 11.2938 3.85694 11.7956C3.68511 12.0471 3.55605 12.2584 3.4686 12.4096C3.42484 12.4852 3.39142 12.5459 3.36818 12.5892C3.35656 12.6108 3.34748 12.6282 3.34092 12.6408L3.33297 12.6563L3.33041 12.6614L3.32948 12.6632L3.32911 12.664C3.32894 12.6643 3.32879 12.6646 3.99961 13ZM11.9996 16C13.9326 16 15.4996 14.433 15.4996 12.5C15.4996 10.567 13.9326 9 11.9996 9C10.0666 9 8.49961 10.567 8.49961 12.5C8.49961 14.433 10.0666 16 11.9996 16Z"})}),ba=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})});const xa=window.wp.warning;var wa=r.n(xa);function ya(){const t=(0,a.useContext)(K),{view:n,onChangeView:r}=t,l=n.infiniteScrollEnabled??!1;return t.hasInfiniteScrollHandler?(0,e.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,o.__)("Enable infinite scroll"),help:(0,o.__)("Automatically load more content as you scroll, instead of showing pagination links."),checked:l,onChange:e=>{r({...n,infiniteScrollEnabled:e})}}):null}const{Menu:_a}=le(i.privateApis),ja={className:"dataviews-config__popover",placement:"bottom-end",offset:9};function Ca(){const{view:t,onChangeView:n,defaultLayouts:r}=(0,a.useContext)(K),l=Object.keys(r);if(l.length<=1)return null;const s=et.find(e=>t.type===e.type);return(0,e.jsxs)(_a,{children:[(0,e.jsx)(_a.TriggerButton,{render:(0,e.jsx)(i.Button,{size:"compact",icon:s?.icon,label:(0,o.__)("Layout")})}),(0,e.jsx)(_a.Popover,{children:l.map(i=>{const a=et.find(e=>e.type===i);return a?(0,e.jsx)(_a.RadioItem,{value:i,name:"view-actions-available-view",checked:i===t.type,hideOnClick:!0,onChange:e=>{switch(e.target.value){case"list":case"grid":case"table":case"pickerGrid":const i={...t};return"layout"in i&&delete i.layout,n({...i,type:e.target.value,...r[e.target.value]})}wa()("Invalid dataview")},children:(0,e.jsx)(_a.ItemLabel,{children:a.label})},i):null})})]})}function Sa(){const{view:t,fields:n,onChangeView:r}=(0,a.useContext)(K),l=(0,a.useMemo)(()=>n.filter(e=>!1!==e.enableSorting).map(e=>({label:e.label,value:e.id})),[n]);return(0,e.jsx)(i.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Sort by"),value:t.sort?.field,options:l,onChange:e=>{r({...t,sort:{direction:t?.sort?.direction||"desc",field:e},showLevels:!1})}})}function ka(){const{view:t,fields:n,onChangeView:r}=(0,a.useContext)(K);if(0===n.filter(e=>!1!==e.enableSorting).length)return null;let l=t.sort?.direction;return!l&&t.sort?.field&&(l="desc"),(0,e.jsx)(i.__experimentalToggleGroupControl,{className:"dataviews-view-config__sort-direction",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:(0,o.__)("Order"),value:l,onChange:e=>{"asc"!==e&&"desc"!==e?wa()("Invalid direction"):r({...t,sort:{direction:e,field:t.sort?.field||n.find(e=>!1!==e.enableSorting)?.id||""},showLevels:!1})},children:D.map(t=>(0,e.jsx)(i.__experimentalToggleGroupControlOptionIcon,{value:t,icon:q[t],label:R[t]},t))})}function Va(){const{view:t,config:n,onChangeView:r}=(0,a.useContext)(K),{infiniteScrollEnabled:l}=t;return!n||!n.perPageSizes||n.perPageSizes.length<2||n.perPageSizes.length>6||l?null:(0,e.jsx)(i.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:(0,o.__)("Items per page"),value:t.perPage||10,disabled:!t?.sort?.field,onChange:e=>{const n="number"==typeof e||void 0===e?e:parseInt(e,10);r({...t,perPage:n,page:1})},children:n.perPageSizes.map(t=>(0,e.jsx)(i.__experimentalToggleGroupControlOption,{value:t,label:t.toString()},t))})}function Ia({previewOptions:t,onChangePreviewOption:n,onMenuOpenChange:r,activeOption:a}){return(0,e.jsxs)(_a,{onOpenChange:r,children:[(0,e.jsx)(_a.TriggerButton,{render:(0,e.jsx)(i.Button,{className:"dataviews-field-control__field-preview-options-button",size:"compact",icon:ne,label:(0,o.__)("Preview")})}),(0,e.jsx)(_a.Popover,{children:t?.map(({id:t,label:i})=>(0,e.jsx)(_a.RadioItem,{value:t,checked:t===a,onChange:()=>{n?.(t),(e=>{setTimeout(()=>{const t=document.querySelector(`.dataviews-field-control__field-${e} .dataviews-field-control__field-preview-options-button`);t instanceof HTMLElement&&t.focus()},50)})(t)},children:(0,e.jsx)(_a.ItemLabel,{children:i})},t))})]})}function Ea({field:t,label:n,description:r,isVisible:l,isFirst:s,isLast:u,canMove:c=!0,onToggleVisibility:d,onMoveUp:f,onMoveDown:m,previewOptions:v,onChangePreviewOption:p}){const[h,g]=(0,a.useState)(!1);return(0,e.jsx)(i.__experimentalItem,{children:(0,e.jsxs)(i.__experimentalHStack,{expanded:!0,className:J("dataviews-field-control__field",`dataviews-field-control__field-${t.id}`,{"is-interacting":h}),justify:"flex-start",children:[(0,e.jsx)("span",{className:"dataviews-field-control__icon",children:!c&&!t.enableHiding&&(0,e.jsx)(i.Icon,{icon:va})}),(0,e.jsxs)("span",{className:"dataviews-field-control__label-sub-label-container",children:[(0,e.jsx)("span",{className:"dataviews-field-control__label",children:n||t.label}),r&&(0,e.jsx)("span",{className:"dataviews-field-control__sub-label",children:r})]}),(0,e.jsxs)(i.__experimentalHStack,{justify:"flex-end",expanded:!1,className:"dataviews-field-control__actions",children:[l&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Button,{disabled:s||!c,accessibleWhenDisabled:!0,size:"compact",onClick:f,icon:pa,label:s||!c?(0,o.__)("This field can't be moved up"):(0,o.sprintf)(
/* translators: %s: field label */
/* translators: %s: field label */
(0,o.__)("Move %s up"),t.label)}),(0,e.jsx)(i.Button,{disabled:u||!c,accessibleWhenDisabled:!0,size:"compact",onClick:m,icon:ha,label:u||!c?(0,o.__)("This field can't be moved down"):(0,o.sprintf)(
/* translators: %s: field label */
/* translators: %s: field label */
(0,o.__)("Move %s down"),t.label)})]}),d&&(0,e.jsx)(i.Button,{className:"dataviews-field-control__field-visibility-button",disabled:!t.enableHiding,accessibleWhenDisabled:!0,size:"compact",onClick:()=>{d(),setTimeout(()=>{const e=document.querySelector(`.dataviews-field-control__field-${t.id} .dataviews-field-control__field-visibility-button`);e instanceof HTMLElement&&e.focus()},50)},icon:l?Ne:ga,label:l?(0,o.sprintf)(
/* translators: %s: field label */
/* translators: %s: field label */
(0,o._x)("Hide %s","field"),t.label):(0,o.sprintf)(
/* translators: %s: field label */
/* translators: %s: field label */
(0,o._x)("Show %s","field"),t.label)}),v&&(0,e.jsx)(Ia,{previewOptions:v,onChangePreviewOption:p,onMenuOpenChange:g,activeOption:t.id})]})]})})}function Na({index:t,field:n,view:i,onChangeView:r}){const a=i.fields??[],l=void 0!==t&&a.includes(n.id);return(0,e.jsx)(Ea,{field:n,isVisible:l,isFirst:void 0!==t&&t<1,isLast:void 0!==t&&t===a.length-1,onToggleVisibility:()=>{r({...i,fields:l?a.filter(e=>e!==n.id):[...a,n.id]})},onMoveUp:void 0!==t?()=>{r({...i,fields:[...a.slice(0,t-1)??[],n.id,a[t-1],...a.slice(t+1)]})}:void 0,onMoveDown:void 0!==t?()=>{r({...i,fields:[...a.slice(0,t)??[],a[t+1],n.id,...a.slice(t+2)]})}:void 0})}function Ma(e){return!!e}function Fa(){const{view:t,fields:n,onChangeView:r}=(0,a.useContext)(K),l=[t?.titleField,t?.mediaField,t?.descriptionField].filter(Boolean),s=t.fields??[],u=n.filter(e=>!s.includes(e.id)&&!l.includes(e.id)&&"media"!==e.type&&!1!==e.enableHiding);let c=s.map(e=>n.find(t=>t.id===e)).filter(Ma);if(!c?.length&&!u?.length)return null;const d=n.find(e=>e.id===t.titleField),f=n.find(e=>e.id===t.mediaField),m=n.find(e=>e.id===t.descriptionField),v=n.filter(e=>"media"===e.type);let p;if(v.length>1){const n=Ma(f)&&(t.showMedia??!0);p=Ma(f)&&(0,e.jsx)(Ea,{field:f,label:(0,o.__)("Preview"),description:f.label,isVisible:n,onToggleVisibility:()=>{r({...t,showMedia:!n})},canMove:!1,previewOptions:v.map(e=>({label:e.label,id:e.id})),onChangePreviewOption:e=>r({...t,mediaField:e})},f.id)}const h=[{field:d,isVisibleFlag:"showTitle"},{field:f,isVisibleFlag:"showMedia",ui:p},{field:m,isVisibleFlag:"showDescription"}].filter(({field:e})=>Ma(e));let g=h.filter(({field:e,isVisibleFlag:n})=>Ma(e)&&(t[n]??!0));1===g.length&&(g=g.map(e=>({...e,field:{...e.field,enableHiding:!1}}))),0===g.length&&1===c.length&&(c=[{...c[0],enableHiding:!1}]);const b=h.filter(({field:e,isVisibleFlag:n})=>Ma(e)&&!(t[n]??1));return(0,e.jsxs)(i.__experimentalVStack,{className:"dataviews-field-control",spacing:6,children:[(0,e.jsx)(i.__experimentalVStack,{className:"dataviews-view-config__properties",spacing:0,children:(g.length>0||!!c?.length)&&(0,e.jsxs)(i.__experimentalItemGroup,{isBordered:!0,isSeparated:!0,children:[g.map(({field:n,isVisibleFlag:i,ui:a})=>a??(0,e.jsx)(Ea,{field:n,isVisible:!0,onToggleVisibility:()=>{r({...t,[i]:!1})},canMove:!1},n.id)),c.map((n,i)=>(0,e.jsx)(Na,{field:n,view:t,onChangeView:r,index:i},n.id))]})}),(!!u?.length||!!b.length)&&(0,e.jsxs)(i.__experimentalVStack,{spacing:4,children:[(0,e.jsx)(i.BaseControl.VisualLabel,{style:{margin:0},children:(0,o.__)("Hidden")}),(0,e.jsx)(i.__experimentalVStack,{className:"dataviews-view-config__properties",spacing:0,children:(0,e.jsxs)(i.__experimentalItemGroup,{isBordered:!0,isSeparated:!0,children:[b.length>0&&b.map(({field:n,isVisibleFlag:i,ui:a})=>a??(0,e.jsx)(Ea,{field:n,isVisible:!1,onToggleVisibility:()=>{r({...t,[i]:!0})},canMove:!1},n.id)),u.map(n=>(0,e.jsx)(Na,{field:n,view:t,onChangeView:r},n.id))]})})]})]})}function Oa({title:t,description:n,children:r}){return(0,e.jsxs)(i.__experimentalGrid,{columns:12,className:"dataviews-settings-section",gap:4,children:[(0,e.jsxs)("div",{className:"dataviews-settings-section__sidebar",children:[(0,e.jsx)(i.__experimentalHeading,{level:2,className:"dataviews-settings-section__title",children:t}),n&&(0,e.jsx)(i.__experimentalText,{variant:"muted",className:"dataviews-settings-section__description",children:n})]}),(0,e.jsx)(i.__experimentalGrid,{columns:8,gap:4,className:"dataviews-settings-section__content",children:r})]})}function Pa(){const{view:t}=(0,a.useContext)(K),n=(0,c.useInstanceId)(Aa,"dataviews-view-config-dropdown"),r=et.find(e=>e.type===t.type);return(0,e.jsx)(i.Dropdown,{expandOnMobile:!0,popoverProps:{...ja,id:n},renderToggle:({onToggle:t,isOpen:r})=>(0,e.jsx)(i.Button,{size:"compact",icon:ba,label:(0,o._x)("View options","View is used as a noun"),onClick:t,"aria-expanded":r?"true":"false","aria-controls":n}),renderContent:()=>(0,e.jsx)(i.__experimentalDropdownContentWrapper,{paddingSize:"medium",className:"dataviews-config__popover-content-wrapper",children:(0,e.jsxs)(i.__experimentalVStack,{className:"dataviews-view-config",spacing:6,children:[(0,e.jsxs)(Oa,{title:(0,o.__)("Appearance"),children:[(0,e.jsxs)(i.__experimentalHStack,{expanded:!0,className:"is-divided-in-two",children:[(0,e.jsx)(Sa,{}),(0,e.jsx)(ka,{})]}),!!r?.viewConfigOptions&&(0,e.jsx)(r.viewConfigOptions,{}),(0,e.jsx)(ya,{}),(0,e.jsx)(Va,{})]}),(0,e.jsx)(Oa,{title:(0,o.__)("Properties"),children:(0,e.jsx)(Fa,{})})]})})})}function Aa(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ca,{}),(0,e.jsx)(Pa,{})]})}var La=(0,a.memo)(Aa);function Ta({item:e,field:t}){const{elements:n,isLoading:i}=Dr({elements:t.elements,getElements:t.getElements}),r=t.getValue({item:e});return i||0===n.length?r:n?.find(e=>e.value===r)?.label||t.getValue({item:e})}const za=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var Da={sort:function(e,t,n){return"asc"===n?e.localeCompare(t):t.localeCompare(e)},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return[void 0,"",null].includes(n)||za.test(n)?null:(0,o.__)("Value must be a valid email address.")}},Edit:"email",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[v,p,I,E,N,h,g,b,x]}},Ba={sort:function(e,t,n){return"asc"===n?e-t:t-e},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return[void 0,"",null].includes(n)||Number.isInteger(n)?null:(0,o.__)("Value must be an integer.")}},Edit:"integer",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[v,p,w,y,_,j,M],validOperators:[v,p,w,y,_,j,M,h,g,b,x]}},Ha={sort:function(e,t,n){return"asc"===n?e-t:t-e},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return function(e){return""===e||null==e}(n)||Number.isFinite(n)?null:(0,o.__)("Value must be a number.")}},Edit:"number",render:({item:e,field:t})=>{t.hasElements;const n=t.getValue({item:e});return[null,void 0].includes(n)?null:Number(n).toFixed(2)},enableSorting:!0,filterBy:{defaultOperators:[v,p,w,y,_,j,M],validOperators:[v,p,w,y,_,j,M,h,g,b,x]}},Ra={sort:function(e,t,n){return"asc"===n?e.localeCompare(t):t.localeCompare(e)},isValid:{elements:!0,custom:()=>null},Edit:"text",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[v,p,I,E,N,h,g,b,x]}},qa={sort:function(e,t,n){const i=new Date(e).getTime(),r=new Date(t).getTime();return"asc"===n?i-r:r-i},isValid:{elements:!0,custom:()=>null},Edit:"datetime",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[F,O,C,S,k,V,P,A],validOperators:[F,O,C,S,k,V,P,A]}};const $a=window.wp.date;var Wa={sort:function(e,t,n){const i=new Date(e).getTime(),r=new Date(t).getTime();return"asc"===n?i-r:r-i},Edit:"date",isValid:{elements:!0,custom:()=>null},render:({item:t,field:n})=>{if(n.hasElements)return(0,e.jsx)(Ta,{item:t,field:n});const i=n.getValue({item:t});return i?(r=i,(0,$a.dateI18n)((0,$a.getSettings)().formats.date,(0,$a.getDate)(r))):"";var r},enableSorting:!0,filterBy:{defaultOperators:[F,O,C,S,k,V,P,A,M],validOperators:[F,O,C,S,k,V,P,A,M]}},Ua={sort:function(e,t,n){const i=Boolean(e);return i===Boolean(t)?0:"asc"===n?i?1:-1:i?-1:1},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return[void 0,"",null].includes(n)||[!0,!1].includes(n)?null:(0,o.__)("Value must be true, false, or undefined")}},Edit:"checkbox",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):!0===n.getValue({item:t})?(0,o.__)("True"):!1===n.getValue({item:t})?(0,o.__)("False"):null,enableSorting:!0,filterBy:{defaultOperators:[v,p],validOperators:[v,p]}},Ka={sort:function(){return 0},isValid:{elements:!0,custom:()=>null},Edit:null,render:()=>null,enableSorting:!1,filterBy:!1};const Ga={sort:function(e,t,n){const i=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[];if(i.length!==r.length)return"asc"===n?i.length-r.length:r.length-i.length;const a=i.join(","),l=r.join(",");return"asc"===n?a.localeCompare(l):l.localeCompare(a)},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return[void 0,"",null].includes(n)||Array.isArray(n)?n.every(e=>"string"==typeof e)?null:(0,o.__)("Every value must be a string."):(0,o.__)("Value must be an array.")}},Edit:"array",render:function({item:e,field:t}){return(t.getValue({item:e})||[]).join(", ")},enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[h,g,b,x]}};var Ya=Ga,Za={sort:function(e,t,n){return 0},isValid:{elements:!0,custom:()=>null},Edit:"password",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):"••••••••",enableSorting:!1,filterBy:!1},Xa={sort:function(e,t,n){return"asc"===n?e.localeCompare(t):t.localeCompare(e)},isValid:{elements:!0,custom:()=>null},Edit:"telephone",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[v,p,I,E,N,h,g,b,x]}},Qa={grad:.9,turn:360,rad:360/(2*Math.PI)},Ja=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},el=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},tl=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},nl=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},il=function(e){return{r:tl(e.r,0,255),g:tl(e.g,0,255),b:tl(e.b,0,255),a:tl(e.a)}},rl=function(e){return{r:el(e.r),g:el(e.g),b:el(e.b),a:el(e.a,3)}},al=/^#([0-9a-f]{3,8})$/i,ll=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},sl=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=Math.max(t,n,i),l=a-Math.min(t,n,i),s=l?a===t?(n-i)/l:a===n?2+(i-t)/l:4+(t-n)/l:0;return{h:60*(s<0?s+6:s),s:a?l/a*100:0,v:a/255*100,a:r}},ol=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var a=Math.floor(t),l=i*(1-n),s=i*(1-(t-a)*n),o=i*(1-(1-t+a)*n),u=a%6;return{r:255*[i,s,l,l,o,i][u],g:255*[o,i,i,s,l,l][u],b:255*[l,l,o,i,i,s][u],a:r}},ul=function(e){return{h:nl(e.h),s:tl(e.s,0,100),l:tl(e.l,0,100),a:tl(e.a)}},cl=function(e){return{h:el(e.h),s:el(e.s),l:el(e.l),a:el(e.a,3)}},dl=function(e){return ol((n=(t=e).s,{h:t.h,s:(n*=((i=t.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}));var t,n,i},fl=function(e){return{h:(t=sl(e)).h,s:(r=(200-(n=t.s))*(i=t.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,i,r},ml=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vl=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pl=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hl=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gl={string:[[function(e){var t=al.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?el(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?el(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=pl.exec(e)||hl.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:il({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ml.exec(e)||vl.exec(e);if(!t)return null;var n,i,r=ul({h:(n=t[1],i=t[2],void 0===i&&(i="deg"),Number(n)*(Qa[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return dl(r)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=void 0===r?1:r;return Ja(t)&&Ja(n)&&Ja(i)?il({r:Number(t),g:Number(n),b:Number(i),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,i=e.l,r=e.a,a=void 0===r?1:r;if(!Ja(t)||!Ja(n)||!Ja(i))return null;var l=ul({h:Number(t),s:Number(n),l:Number(i),a:Number(a)});return dl(l)},"hsl"],[function(e){var t=e.h,n=e.s,i=e.v,r=e.a,a=void 0===r?1:r;if(!Ja(t)||!Ja(n)||!Ja(i))return null;var l=function(e){return{h:nl(e.h),s:tl(e.s,0,100),v:tl(e.v,0,100),a:tl(e.a)}}({h:Number(t),s:Number(n),v:Number(i),a:Number(a)});return ol(l)},"hsv"]]},bl=function(e,t){for(var n=0;n<t.length;n++){var i=t[n][0](e);if(i)return[i,t[n][1]]}return[null,void 0]},xl=function(e,t){var n=fl(e);return{h:n.h,s:tl(n.s+100*t,0,100),l:n.l,a:n.a}},wl=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},yl=function(e,t){var n=fl(e);return{h:n.h,s:n.s,l:tl(n.l+100*t,0,100),a:n.a}},_l=function(){function e(e){this.parsed=function(e){return"string"==typeof e?bl(e.trim(),gl.string):"object"==typeof e&&null!==e?bl(e,gl.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return el(wl(this.rgba),2)},e.prototype.isDark=function(){return wl(this.rgba)<.5},e.prototype.isLight=function(){return wl(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=rl(this.rgba)).r,n=e.g,i=e.b,a=(r=e.a)<1?ll(el(255*r)):"","#"+ll(t)+ll(n)+ll(i)+a;var e,t,n,i,r,a},e.prototype.toRgb=function(){return rl(this.rgba)},e.prototype.toRgbString=function(){return t=(e=rl(this.rgba)).r,n=e.g,i=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+i+", "+r+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,r},e.prototype.toHsl=function(){return cl(fl(this.rgba))},e.prototype.toHslString=function(){return t=(e=cl(fl(this.rgba))).h,n=e.s,i=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+r+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,r},e.prototype.toHsv=function(){return e=sl(this.rgba),{h:el(e.h),s:el(e.s),v:el(e.v),a:el(e.a,3)};var e},e.prototype.invert=function(){return jl({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),jl(xl(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),jl(xl(this.rgba,-e))},e.prototype.grayscale=function(){return jl(xl(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),jl(yl(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),jl(yl(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?jl({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):el(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=fl(this.rgba);return"number"==typeof e?jl({h:e,s:t.s,l:t.l,a:t.a}):el(t.h)},e.prototype.isEqual=function(e){return this.toHex()===jl(e).toHex()},e}(),jl=function(e){return e instanceof _l?e:new _l(e)},Cl={sort:function(e,t,n){const i=jl(e),r=jl(t);if(!i.isValid()&&!r.isValid())return 0;if(!i.isValid())return"asc"===n?1:-1;if(!r.isValid())return"asc"===n?-1:1;const a=i.toHsl(),l=r.toHsl();return a.h!==l.h?"asc"===n?a.h-l.h:l.h-a.h:a.s!==l.s?"asc"===n?a.s-l.s:l.s-a.s:"asc"===n?a.l-l.l:l.l-a.l},isValid:{elements:!0,custom:(e,t)=>{const n=t.getValue({item:e});return[void 0,"",null].includes(n)||jl(n).isValid()?null:(0,o.__)("Value must be a valid color.")}},Edit:"color",render:({item:t,field:n})=>{if(n.hasElements)return(0,e.jsx)(Ta,{item:t,field:n});const i=n.getValue({item:t});return i&&jl(i).isValid()?(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,e.jsx)("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:i,border:"1px solid #ddd",flexShrink:0}}),(0,e.jsx)("span",{children:i})]}):i},enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[v,p]}},Sl={sort:function(e,t,n){return"asc"===n?e.localeCompare(t):t.localeCompare(e)},isValid:{elements:!0,custom:()=>null},Edit:"url",render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[h,g],validOperators:[v,p,I,E,N,h,g,b,x]}};function kl(e,t){let n;return e?.required&&t?.required?n=t?.required?.message?t.required:void 0:e?.elements&&t?.elements?n=t.elements:t?.custom&&(n=t.custom),n}const{ValidatedCheckboxControl:Vl}=le(i.privateApis);Math.pow(10,8);const Il=6048e5,El=Symbol.for("constructDateFrom");function Nl(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&El in e?e[El](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ml(e,t){return Nl(t||e,e)}function Fl(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Ml(e)));var t}const Ol={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Pl(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Al={date:Pl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Pl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Pl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ll={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Tl(e){return(t,n)=>{let i;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=n?.width?String(n.width):t;i=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=n?.width?String(n.width):e.defaultWidth;i=e.values[r]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}function zl(e){return(t,n={})=>{const i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;const l=a[0],s=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(s,e=>e.test(l)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(s,e=>e.test(l));let u;return u=e.valueCallback?e.valueCallback(o):o,u=n.valueCallback?n.valueCallback(u):u,{value:u,rest:t.slice(l.length)}}}var Dl;const Bl={code:"en-US",formatDistance:(e,t,n)=>{let i;const r=Ol[e];return i="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Al,formatRelative:(e,t,n,i)=>Ll[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Tl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Tl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Tl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Tl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Tl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Dl={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(Dl.matchPattern);if(!n)return null;const i=n[0],r=e.match(Dl.parsePattern);if(!r)return null;let a=Dl.valueCallback?Dl.valueCallback(r[0]):r[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(i.length)}}),era:zl({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:zl({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:zl({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:zl({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:zl({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Hl={};function Rl(){return Hl}function ql(e){const t=Ml(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function $l(e,t){const n=Ml(e,t?.in);return n.setHours(0,0,0,0),n}function Wl(e,t){const n=Ml(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ul(e,t){const n=Ml(e,t?.in);return function(e,t,n){const[i,r]=function(e,...t){const n=Nl.bind(null,e||t.find(e=>"object"==typeof e));return t.map(n)}(n?.in,e,t),a=$l(i),l=$l(r),s=+a-ql(a),o=+l-ql(l);return Math.round((s-o)/864e5)}(n,Wl(n))+1}function Kl(e,t){const n=Rl(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Ml(e,t?.in),a=r.getDay(),l=(a<i?7:0)+a-i;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Gl(e,t){return Kl(e,{...t,weekStartsOn:1})}function Yl(e,t){const n=Ml(e,t?.in),i=n.getFullYear(),r=Nl(n,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=Gl(r),l=Nl(n,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const s=Gl(l);return n.getTime()>=a.getTime()?i+1:n.getTime()>=s.getTime()?i:i-1}function Zl(e,t){const n=Ml(e,t?.in),i=+Gl(n)-+function(e,t){const n=Yl(e,t),i=Nl(t?.in||e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Gl(i)}(n);return Math.round(i/Il)+1}function Xl(e,t){const n=Ml(e,t?.in),i=n.getFullYear(),r=Rl(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=Nl(t?.in||e,0);l.setFullYear(i+1,0,a),l.setHours(0,0,0,0);const s=Kl(l,t),o=Nl(t?.in||e,0);o.setFullYear(i,0,a),o.setHours(0,0,0,0);const u=Kl(o,t);return+n>=+s?i+1:+n>=+u?i:i-1}function Ql(e,t){const n=Ml(e,t?.in),i=+Kl(n,t)-+function(e,t){const n=Rl(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=Xl(e,t),a=Nl(t?.in||e,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),Kl(a,t)}(n,t);return Math.round(i/Il)+1}function Jl(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const es={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Jl("yy"===t?i%100:i,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Jl(n+1,2)},d:(e,t)=>Jl(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Jl(e.getHours()%12||12,t.length),H:(e,t)=>Jl(e.getHours(),t.length),m:(e,t)=>Jl(e.getMinutes(),t.length),s:(e,t)=>Jl(e.getSeconds(),t.length),S(e,t){const n=t.length,i=e.getMilliseconds();return Jl(Math.trunc(i*Math.pow(10,n-3)),t.length)}},ts={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),i=t>0?t:1-t;return n.ordinalNumber(i,{unit:"year"})}return es.y(e,t)},Y:function(e,t,n,i){const r=Xl(e,i),a=r>0?r:1-r;return"YY"===t?Jl(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):Jl(a,t.length)},R:function(e,t){return Jl(Yl(e),t.length)},u:function(e,t){return Jl(e.getFullYear(),t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Jl(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Jl(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return es.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Jl(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const r=Ql(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):Jl(r,t.length)},I:function(e,t,n){const i=Zl(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):Jl(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):es.d(e,t)},D:function(e,t,n){const i=Ul(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):Jl(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const r=e.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Jl(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const r=e.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Jl(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return Jl(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let r;switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let r;switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return es.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):es.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):Jl(i,t.length)},k:function(e,t,n){let i=e.getHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):Jl(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):es.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):es.s(e,t)},S:function(e,t){return es.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return is(i);case"XXXX":case"XX":return rs(i);default:return rs(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return is(i);case"xxxx":case"xx":return rs(i);default:return rs(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ns(i,":");default:return"GMT"+rs(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ns(i,":");default:return"GMT"+rs(i,":")}},t:function(e,t,n){return Jl(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Jl(+e,t.length)}};function ns(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),r=Math.trunc(i/60),a=i%60;return 0===a?n+String(r):n+String(r)+t+Jl(a,2)}function is(e,t){return e%60==0?(e>0?"-":"+")+Jl(Math.abs(e)/60,2):rs(e,t)}function rs(e,t=""){const n=e>0?"-":"+",i=Math.abs(e);return n+Jl(Math.trunc(i/60),2)+t+Jl(i%60,2)}const as=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ls=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ss={p:ls,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return as(e,t);let a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",as(i,t)).replace("{{time}}",ls(r,t))}},os=/^D+$/,us=/^Y+$/,cs=["D","DD","YY","YYYY"],ds=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ms=/^'([^]*?)'?$/,vs=/''/g,ps=/[a-zA-Z]/;function hs(e,t,n){const i=Rl(),r=n?.locale??i.locale??Bl,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=Ml(e,n?.in);if(!Fl(s))throw new RangeError("Invalid time value");let o=t.match(fs).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,ss[t])(e,r.formatLong):e}).join("").match(ds).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:gs(e)};if(ts[t])return{isToken:!0,value:e};if(t.match(ps))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});r.localize.preprocessor&&(o=r.localize.preprocessor(s,o));const u={firstWeekContainsDate:a,weekStartsOn:l,locale:r};return o.map(i=>{if(!i.isToken)return i.value;const a=i.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return us.test(e)}(a)||!n?.useAdditionalDayOfYearTokens&&function(e){return os.test(e)}(a))&&function(e,t,n){const i=function(e,t,n){const i="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(i),cs.includes(e))throw new RangeError(i)}(a,t,String(e)),(0,ts[a[0]])(s,a,r.localize,u)}).join("")}function gs(e){const t=e.match(ms);return t?t[1].replace(vs,"'"):e}const bs={[P]:[{value:"days",label:(0,o.__)("Days")},{value:"weeks",label:(0,o.__)("Weeks")},{value:"months",label:(0,o.__)("Months")},{value:"years",label:(0,o.__)("Years")}],[A]:[{value:"days",label:(0,o.__)("Days ago")},{value:"weeks",label:(0,o.__)("Weeks ago")},{value:"months",label:(0,o.__)("Months ago")},{value:"years",label:(0,o.__)("Years ago")}]};function xs({className:t,data:n,field:r,onChange:l,hideLabelFromVision:s,operator:u}){const c=bs[u===P?"inThePast":"over"],{id:d,label:f,getValue:m,setValue:v}=r,p=m({item:n}),{value:h="",unit:g=c[0].value}=p&&"object"==typeof p?p:{},b=(0,a.useCallback)(e=>l(v({item:n,value:{value:Number(e),unit:g}})),[l,v,n,g]),x=(0,a.useCallback)(e=>l(v({item:n,value:{value:h,unit:e}})),[l,v,n,h]);return(0,e.jsx)(i.BaseControl,{id:d,__nextHasNoMarginBottom:!0,className:J(t,"dataviews-controls__relative-date"),label:f,hideLabelFromVision:s,children:(0,e.jsxs)(i.__experimentalHStack,{spacing:2.5,children:[(0,e.jsx)(i.__experimentalNumberControl,{__next40pxDefaultSize:!0,className:"dataviews-controls__relative-date-number",spinControls:"none",min:1,step:1,value:h,onChange:b}),(0,e.jsx)(i.SelectControl,{className:"dataviews-controls__relative-date-unit",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,o.__)("Unit"),value:g,options:c,onChange:x,hideLabelFromVision:!0})]})})}const{DateCalendar:ws,ValidatedInputControl:ys}=le(i.privateApis),_s=e=>{if(!e)return null;const t=(0,$a.getDate)(e);return t&&Fl(t)?t:null};function js({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{id:u,label:c,description:d,setValue:f,getValue:m,isValid:v}=n,p=m({item:t}),h="string"==typeof p?p:void 0,[g,b]=(0,a.useState)(()=>_s(h)||new Date),x=(0,a.useRef)(null),w=(0,a.useRef)(),y=(0,a.useRef)(null),_=(0,a.useCallback)(e=>r(f({item:t,value:e})),[t,r,f]);(0,a.useEffect)(()=>()=>{w.current&&clearTimeout(w.current)},[]);const j=(0,a.useCallback)(e=>{let t;if(e){let n=e;if(h){const t=_s(h);t&&(n=new Date(e),n.setHours(t.getHours()),n.setMinutes(t.getMinutes()))}t=n.toISOString(),_(t),w.current&&clearTimeout(w.current)}else _(void 0);y.current=x.current&&x.current.ownerDocument.activeElement,w.current=setTimeout(()=>{x.current&&(x.current.focus(),x.current.blur(),_(t),y.current&&y.current instanceof HTMLElement&&y.current.focus())},0)},[_,h]),C=(0,a.useCallback)(e=>{if(e){const t=new Date(e);_(t.toISOString());const n=_s(t.toISOString());n&&b(n)}else _(void 0)},[_]),{timezone:{string:S},l10n:{startOfWeek:k}}=(0,$a.getSettings)(),V=v?.required&&!l?`${c} (${(0,o.__)("Required")})`:c;return(0,e.jsx)(i.BaseControl,{__nextHasNoMarginBottom:!0,id:u,label:V,help:d,hideLabelFromVision:l,children:(0,e.jsxs)(i.__experimentalVStack,{spacing:4,children:[(0,e.jsx)(ws,{style:{width:"100%"},selected:h&&_s(h)||void 0,onSelect:j,month:g,onMonthChange:b,timeZone:S||void 0,weekStartsOn:k}),(0,e.jsx)(ys,{ref:x,__next40pxDefaultSize:!0,required:!!v?.required,customValidity:kl(v,s),type:"datetime-local",label:(0,o.__)("Date time"),hideLabelFromVision:!0,value:h?(I=_s(h)||void 0,I?"string"==typeof I?I:hs(I,"yyyy-MM-dd'T'HH:mm"):""):"",onChange:C})]})});var I}function Cs(e,t,n){return function(e,t,n){const i=Ml(e,n?.in);return isNaN(t)?Nl(n?.in||e,NaN):t?(i.setDate(i.getDate()+t),i):i}(e,-t,n)}function Ss(e,t,n){const i=Ml(e,n?.in);if(isNaN(t))return Nl(n?.in||e,NaN);if(!t)return i;const r=i.getDate(),a=Nl(n?.in||e,i.getTime());return a.setMonth(i.getMonth()+t+1,0),r>=a.getDate()?a:(i.setFullYear(a.getFullYear(),a.getMonth(),r),i)}function ks(e,t){const n=Ml(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Vs(e,t,n){return function(e,t,n){return Ss(e,12*t,n)}(e,-t,n)}var Is=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.218 5.377a.25.25 0 0 0-.436 0l-7.29 12.96a.25.25 0 0 0 .218.373h14.58a.25.25 0 0 0 .218-.372l-7.29-12.96Zm-1.743-.735c.669-1.19 2.381-1.19 3.05 0l7.29 12.96a1.75 1.75 0 0 1-1.525 2.608H4.71a1.75 1.75 0 0 1-1.525-2.608l7.29-12.96ZM12.75 17.46h-1.5v-1.5h1.5v1.5Zm-1.5-3h1.5v-5h-1.5v5Z"})});const{DateCalendar:Es,DateRangeCalendar:Ns}=le(i.privateApis),Ms=[{id:"today",label:(0,o.__)("Today"),getValue:()=>(0,$a.getDate)(null)},{id:"yesterday",label:(0,o.__)("Yesterday"),getValue:()=>Cs((0,$a.getDate)(null),1)},{id:"past-week",label:(0,o.__)("Past week"),getValue:()=>Cs((0,$a.getDate)(null),7)},{id:"past-month",label:(0,o.__)("Past month"),getValue:()=>{return Ss((0,$a.getDate)(null),-1,e);var e}}],Fs=[{id:"last-7-days",label:(0,o.__)("Last 7 days"),getValue:()=>{const e=(0,$a.getDate)(null);return[Cs(e,7),e]}},{id:"last-30-days",label:(0,o.__)("Last 30 days"),getValue:()=>{const e=(0,$a.getDate)(null);return[Cs(e,30),e]}},{id:"month-to-date",label:(0,o.__)("Month to date"),getValue:()=>{const e=(0,$a.getDate)(null);return[ks(e),e]}},{id:"last-year",label:(0,o.__)("Last year"),getValue:()=>{const e=(0,$a.getDate)(null);return[Vs(e,1),e]}},{id:"year-to-date",label:(0,o.__)("Year to date"),getValue:()=>{const e=(0,$a.getDate)(null);return[Wl(e),e]}}],Os=e=>{if(!e)return null;const t=(0,$a.getDate)(e);return t&&Fl(t)?t:null},Ps=e=>e?"string"==typeof e?e:hs(e,"yyyy-MM-dd"):"";function As({field:t,validity:n,inputRefs:r,isTouched:l,setIsTouched:s,children:o}){const{isValid:u}=t,[c,d]=(0,a.useState)(void 0),f=(0,a.useCallback)(()=>{const e=Array.isArray(r)?r:[r];for(const t of e){const e=t.current;if(e&&!e.validity.valid)return void d({type:"invalid",message:e.validationMessage})}d(void 0)},[r]);return(0,a.useEffect)(()=>{if(l){const e=setTimeout(()=>{n?d(kl(u,n)):f()},0);return()=>clearTimeout(e)}},[l,u,n,f]),(0,e.jsxs)("div",{onBlur:e=>{l||e.relatedTarget&&e.currentTarget.contains(e.relatedTarget)||s(!0)},children:[o,(0,e.jsx)("div",{"aria-live":"polite",children:c&&(0,e.jsxs)("p",{className:J("components-validated-control__indicator","invalid"===c.type?"is-invalid":void 0,"valid"===c.type?"is-valid":void 0),children:[(0,e.jsx)(i.Icon,{className:"components-validated-control__indicator-icon",icon:Is,size:16,fill:"currentColor"}),c.message]})})]})}function Ls({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{id:u,label:c,setValue:d,getValue:f,isValid:m}=n,[v,p]=(0,a.useState)(null),h=f({item:t}),g="string"==typeof h?h:void 0,[b,x]=(0,a.useState)(()=>Os(g)||new Date),[w,y]=(0,a.useState)(!1),_=(0,a.useRef)(null),j=(0,a.useCallback)(e=>r(d({item:t,value:e})),[t,r,d]),C=(0,a.useCallback)(e=>{const t=e?hs(e,"yyyy-MM-dd"):void 0;j(t),p(null),y(!0)},[j]),S=(0,a.useCallback)(e=>{const t=e.getValue(),n=Ps(t);x(t),j(n),p(e.id),y(!0)},[j]),k=(0,a.useCallback)(e=>{if(j(e),e){const t=Os(e);t&&x(t)}p(null),y(!0)},[j]),{timezone:{string:V},l10n:{startOfWeek:I}}=(0,$a.getSettings)(),E=m?.required?`${c} (${(0,o.__)("Required")})`:c;return(0,e.jsx)(As,{field:n,validity:s,inputRefs:_,isTouched:w,setIsTouched:y,children:(0,e.jsx)(i.BaseControl,{__nextHasNoMarginBottom:!0,id:u,className:"dataviews-controls__date",label:E,hideLabelFromVision:l,children:(0,e.jsxs)(i.__experimentalVStack,{spacing:4,children:[(0,e.jsxs)(i.__experimentalHStack,{spacing:2,wrap:!0,justify:"flex-start",children:[Ms.map(t=>{const n=v===t.id;return(0,e.jsx)(i.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:n,size:"small",onClick:()=>S(t),children:t.label},t.id)}),(0,e.jsx)(i.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:!v,size:"small",disabled:!!v,accessibleWhenDisabled:!1,children:(0,o.__)("Custom")})]}),(0,e.jsx)(i.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:_,type:"date",label:(0,o.__)("Date"),hideLabelFromVision:!0,value:g,onChange:k,required:!!n.isValid?.required}),(0,e.jsx)(Es,{style:{width:"100%"},selected:g&&Os(g)||void 0,onSelect:C,month:b,onMonthChange:x,timeZone:V||void 0,weekStartsOn:I})]})})})}function Ts({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{id:u,label:c,getValue:d,setValue:f}=n;let m;const v=d({item:t});Array.isArray(v)&&2===v.length&&v.every(e=>"string"==typeof e)&&(m=v);const p=(0,a.useCallback)(e=>{r(f({item:t,value:e}))},[t,r,f]),[h,g]=(0,a.useState)(null),b=(0,a.useMemo)(()=>{if(!m)return{from:void 0,to:void 0};const[e,t]=m;return{from:Os(e)||void 0,to:Os(t)||void 0}},[m]),[x,w]=(0,a.useState)(()=>b.from||new Date),[y,_]=(0,a.useState)(!1),j=(0,a.useRef)(null),C=(0,a.useRef)(null),S=(0,a.useCallback)((e,t)=>{e&&t?p([Ps(e),Ps(t)]):e||t||p(void 0)},[p]),k=(0,a.useCallback)(e=>{S(e?.from,e?.to),g(null),_(!0)},[S]),V=(0,a.useCallback)(e=>{const[t,n]=e.getValue();w(t),S(t,n),g(e.id),_(!0)},[S]),I=(0,a.useCallback)((e,t)=>{const[n,i]=m||[void 0,void 0];if(S("from"===e?t:n,"to"===e?t:i),t){const e=Os(t);e&&w(e)}g(null),_(!0)},[m,S]),{timezone:E,l10n:N}=(0,$a.getSettings)(),M=n.isValid?.required?`${c} (${(0,o.__)("Required")})`:c;return(0,e.jsx)(As,{field:n,validity:s,inputRefs:[j,C],isTouched:y,setIsTouched:_,children:(0,e.jsx)(i.BaseControl,{__nextHasNoMarginBottom:!0,id:u,className:"dataviews-controls__date",label:M,hideLabelFromVision:l,children:(0,e.jsxs)(i.__experimentalVStack,{spacing:4,children:[(0,e.jsxs)(i.__experimentalHStack,{spacing:2,wrap:!0,justify:"flex-start",children:[Fs.map(t=>{const n=h===t.id;return(0,e.jsx)(i.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:n,size:"small",onClick:()=>V(t),children:t.label},t.id)}),(0,e.jsx)(i.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:!h,size:"small",accessibleWhenDisabled:!1,disabled:!!h,children:(0,o.__)("Custom")})]}),(0,e.jsxs)(i.__experimentalHStack,{spacing:2,children:[(0,e.jsx)(i.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:j,type:"date",label:(0,o.__)("From"),hideLabelFromVision:!0,value:m?.[0],onChange:e=>I("from",e),required:!!n.isValid?.required}),(0,e.jsx)(i.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:C,type:"date",label:(0,o.__)("To"),hideLabelFromVision:!0,value:m?.[1],onChange:e=>I("to",e),required:!!n.isValid?.required})]}),(0,e.jsx)(Ns,{style:{width:"100%"},selected:b,onSelect:k,month:x,onMonthChange:w,timeZone:E.string||void 0,weekStartsOn:N.startOfWeek})]})})})}var zs=(0,e.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(d.Path,{d:"M12.5939 21C14.1472 21 16.1269 20.5701 17.0711 20.1975L16.6447 18.879C16.0964 19.051 14.3299 19.6242 12.6548 19.6242C7.4467 19.6242 4.67513 16.8726 4.67513 12C4.67513 7.21338 7.50762 4.34713 12.2893 4.34713C17.132 4.34713 19.4162 7.55732 19.4162 10.7675C19.4162 14.035 19.0508 15.4968 17.4975 15.4968C16.5838 15.4968 16.0964 14.7803 16.0964 13.9777V7.5H14.4822V8.30255H14.3909C14.1777 7.67198 12.9898 7.12739 11.467 7.2707C9.18274 7.5 7.4467 9.27707 7.4467 11.8567C7.4467 14.5796 8.81726 16.672 11.467 16.758C13.203 16.8153 14.1168 16.0127 14.4822 15.1815H14.5736C14.7563 16.414 16.401 16.8439 17.467 16.8439C20.6954 16.8439 21 13.5764 21 10.7962C21 6.86943 18.0761 3 12.3807 3C6.50254 3 3 6.3535 3 11.9427C3 17.7325 6.38071 21 12.5939 21ZM11.7107 15.2962C9.73096 15.2962 9.03046 13.6051 9.03046 11.7707C9.03046 10.1083 10.0355 8.67516 11.7716 8.67516C13.599 8.67516 14.5736 9.36306 14.5736 11.7707C14.5736 14.1497 13.7513 15.2962 11.7107 15.2962Z"})});const{ValidatedInputControl:Ds}=le(i.privateApis);function Bs({data:t,field:n,onChange:i,hideLabelFromVision:r,type:l,prefix:s,suffix:o,validity:u}){const{label:c,placeholder:d,description:f,getValue:m,setValue:v,isValid:p}=n,h=m({item:t}),g=(0,a.useCallback)(e=>i(v({item:t,value:e})),[t,v,i]);return(0,e.jsx)(Ds,{required:!!p?.required,customValidity:kl(p,u),label:c,placeholder:d,value:h??"",help:f,onChange:g,hideLabelFromVision:r,type:l,prefix:s,suffix:o,__next40pxDefaultSize:!0})}var Hs=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),Rs=(0,e.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,e.jsx)(d.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});const{ValidatedNumberControl:qs}=le(i.privateApis);function $s(e){if(""===e||void 0===e)return"";const t=Number(e);return Number.isFinite(t)?t:""}function Ws({value:t,onChange:n,hideLabelFromVision:r,step:l}){const[s="",u=""]=t,c=(0,a.useCallback)(e=>n([$s(e),u]),[n,u]),d=(0,a.useCallback)(e=>n([s,$s(e)]),[n,s]);return(0,e.jsx)(i.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,o.__)("The max. value must be greater than the min. value."),children:(0,e.jsxs)(i.Flex,{direction:"row",gap:4,children:[(0,e.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Min."),value:s,max:u?Number(u)-l:void 0,onChange:c,__next40pxDefaultSize:!0,hideLabelFromVision:r,step:l}),(0,e.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Max."),value:u,min:s?Number(s)+l:void 0,onChange:d,__next40pxDefaultSize:!0,hideLabelFromVision:r,step:l})]})})}function Us({data:t,field:n,onChange:i,hideLabelFromVision:r,operator:l,decimals:s,validity:o}){const u=Math.pow(10,-1*Math.abs(s)),{label:c,description:d,getValue:f,setValue:m,isValid:v}=n,p=f({item:t})??"",h=(0,a.useCallback)(e=>{i(m({item:t,value:["",void 0].includes(e)?void 0:Number(e)}))},[t,i,m]),g=(0,a.useCallback)(e=>{i(m({item:t,value:e}))},[t,i,m]);if(l===M){let t=["",""];return Array.isArray(p)&&2===p.length&&p.every(e=>"number"==typeof e||""===e)&&(t=p),(0,e.jsx)(Ws,{value:t,onChange:g,hideLabelFromVision:r,step:u})}return(0,e.jsx)(qs,{required:!!v?.required,customValidity:kl(v,o),label:c,help:d,value:p,onChange:h,__next40pxDefaultSize:!0,hideLabelFromVision:r,step:u})}const{ValidatedRadioControl:Ks}=le(i.privateApis),{ValidatedSelectControl:Gs}=le(i.privateApis),{ValidatedToggleControl:Ys}=le(i.privateApis),{ValidatedTextareaControl:Zs}=le(i.privateApis),{ValidatedToggleGroupControl:Xs}=le(i.privateApis),{ValidatedFormTokenField:Qs}=le(i.privateApis),{ValidatedInputControl:Js,Picker:eo}=le(i.privateApis),to=({color:t,onColorChange:n})=>{const r=t&&jl(t).isValid()?t:"#ffffff";return(0,e.jsx)(i.Dropdown,{renderToggle:({onToggle:t,isOpen:n})=>(0,e.jsx)(i.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,e.jsx)("button",{type:"button",onClick:t,style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:r,border:"1px solid #ddd",cursor:"pointer",outline:n?"2px solid #007cba":"none",outlineOffset:"2px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,margin:0},"aria-label":"Open color picker"})}),renderContent:()=>(0,e.jsx)("div",{style:{padding:"16px"},children:(0,e.jsx)(eo,{color:jl(r),onChange:n,enableAlpha:!0})})})};function no(e){return Array.isArray(e.elements)&&e.elements.length>0||"function"==typeof e.getElements}const io={array:function({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{label:o,placeholder:u,getValue:c,setValue:d,isValid:f}=n,m=c({item:t}),{elements:v,isLoading:p}=Dr({elements:n.elements,getElements:n.getElements}),h=(0,a.useMemo)(()=>Array.isArray(m)?m.map(e=>{const t=v?.find(t=>t.value===e);return t||{value:e,label:e}}):[],[m,v]),g=(0,a.useCallback)(e=>{const n=e.map(e=>"object"==typeof e&&"value"in e?e.value:e);r(d({item:t,value:n}))},[r,d,t]);return p?(0,e.jsx)(i.Spinner,{}):(0,e.jsx)(Qs,{required:!!f?.required,customValidity:kl(f,s),label:l?void 0:o,value:h,onChange:g,placeholder:u,suggestions:v?.map(e=>e.value),__experimentalValidateInput:e=>!n.isValid?.elements||!v||v.some(t=>t.value===e||t.label===e),__experimentalExpandOnFocus:v&&v.length>0,__experimentalShowHowTo:!n.isValid?.elements,displayTransform:e=>{if("object"==typeof e&&"label"in e)return e.label;if("string"==typeof e&&v){const t=v.find(t=>t.value===e);return t?.label||e}return e},__experimentalRenderItem:({item:t})=>{if("string"==typeof t&&v){const n=v.find(e=>e.value===t);return(0,e.jsx)("span",{children:n?.label||t})}return(0,e.jsx)("span",{children:t})}})},checkbox:function({field:t,onChange:n,data:i,hideLabelFromVision:r,validity:l}){const{getValue:s,setValue:o,label:u,description:c,isValid:d}=t,f=(0,a.useCallback)(()=>{n(o({item:i,value:!s({item:i})}))},[i,s,n,o]);return(0,e.jsx)(Vl,{required:!!t.isValid?.required,customValidity:kl(d,l),hidden:r,label:u,help:c,checked:s({item:i}),onChange:f})},color:function({data:t,field:n,onChange:i,hideLabelFromVision:r,validity:l}){const{label:s,placeholder:o,description:u,setValue:c,isValid:d}=n,f=n.getValue({item:t})||"",m=(0,a.useCallback)(e=>{i(c({item:t,value:e.toHex()}))},[t,i,c]),v=(0,a.useCallback)(e=>{i(c({item:t,value:e||""}))},[t,i,c]);return(0,e.jsx)(Js,{required:!!n.isValid?.required,customValidity:kl(d,l),label:s,placeholder:o,value:f,help:u,onChange:v,hideLabelFromVision:r,type:"text",prefix:(0,e.jsx)(to,{color:f,onColorChange:m})})},datetime:function({data:t,field:n,onChange:i,hideLabelFromVision:r,operator:a,validity:l}){return a===P||a===A?(0,e.jsx)(xs,{className:"dataviews-controls__datetime",data:t,field:n,onChange:i,hideLabelFromVision:r,operator:a}):(0,e.jsx)(js,{data:t,field:n,onChange:i,hideLabelFromVision:r,validity:l})},date:function({data:t,field:n,onChange:i,hideLabelFromVision:r,operator:a,validity:l}){return a===P||a===A?(0,e.jsx)(xs,{className:"dataviews-controls__date",data:t,field:n,onChange:i,hideLabelFromVision:r,operator:a}):a===M?(0,e.jsx)(Ts,{data:t,field:n,onChange:i,hideLabelFromVision:r,validity:l}):(0,e.jsx)(Ls,{data:t,field:n,onChange:i,hideLabelFromVision:r,validity:l})},email:function({data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l}){return(0,e.jsx)(Bs,{data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l,type:"email",prefix:(0,e.jsx)(i.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,e.jsx)(i.Icon,{icon:zs})})})},telephone:function({data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l}){return(0,e.jsx)(Bs,{data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l,type:"tel",prefix:(0,e.jsx)(i.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,e.jsx)(i.Icon,{icon:Hs})})})},url:function({data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l}){return(0,e.jsx)(Bs,{data:t,field:n,onChange:r,hideLabelFromVision:a,validity:l,type:"url",prefix:(0,e.jsx)(i.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,e.jsx)(i.Icon,{icon:Rs})})})},integer:function(t){return(0,e.jsx)(Us,{...t,decimals:0})},number:function(t){return(0,e.jsx)(Us,{...t,decimals:2})},password:function({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const[u,c]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>{c(e=>!e)},[]);return(0,e.jsx)(Bs,{data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s,type:u?"text":"password",suffix:(0,e.jsx)(i.__experimentalInputControlSuffixWrapper,{variant:"control",children:(0,e.jsx)(i.Button,{icon:u?Ne:ga,onClick:d,size:"small",label:u?(0,o.__)("Hide password"):(0,o.__)("Show password")})})})},radio:function({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{label:o,description:u,getValue:c,setValue:d,isValid:f}=n,{elements:m,isLoading:v}=Dr({elements:n.elements,getElements:n.getElements}),p=c({item:t}),h=(0,a.useCallback)(e=>r(d({item:t,value:e})),[t,r,d]);return v?(0,e.jsx)(i.Spinner,{}):(0,e.jsx)(Ks,{required:!!n.isValid?.required,customValidity:kl(f,s),label:o,help:u,onChange:h,options:m,selected:p,hideLabelFromVision:l})},select:function({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{type:o,label:u,description:c,getValue:d,setValue:f,isValid:m}=n,v="array"===o,p=d({item:t})??(v?[]:""),h=(0,a.useCallback)(e=>r(f({item:t,value:e})),[t,r,f]),{elements:g,isLoading:b}=Dr({elements:n.elements,getElements:n.getElements});return b?(0,e.jsx)(i.Spinner,{}):(0,e.jsx)(Gs,{required:!!n.isValid?.required,customValidity:kl(m,s),label:u,value:p,help:c,options:g,onChange:h,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:l,multiple:v})},text:function({data:t,field:n,onChange:i,hideLabelFromVision:r,config:l,validity:s}){const{prefix:o,suffix:u}=l||{};return(0,e.jsx)(Bs,{data:t,field:n,onChange:i,hideLabelFromVision:r,validity:s,prefix:o?(0,a.createElement)(o):void 0,suffix:u?(0,a.createElement)(u):void 0})},toggle:function({field:t,onChange:n,data:i,hideLabelFromVision:r,validity:l}){const{label:s,description:o,getValue:u,setValue:c,isValid:d}=t,f=(0,a.useCallback)(()=>{n(c({item:i,value:!u({item:i})}))},[n,c,i,u]);return(0,e.jsx)(Ys,{required:!!d.required,customValidity:kl(d,l),hidden:r,__nextHasNoMarginBottom:!0,label:s,help:o,checked:u({item:i}),onChange:f})},textarea:function({data:t,field:n,onChange:i,hideLabelFromVision:r,config:l,validity:s}){const{rows:o=4}=l||{},{label:u,placeholder:c,description:d,setValue:f,isValid:m}=n,v=n.getValue({item:t}),p=(0,a.useCallback)(e=>i(f({item:t,value:e})),[t,i,f]);return(0,e.jsx)(Zs,{required:!!m?.required,customValidity:kl(m,s),label:u,placeholder:c,value:v??"",help:d,onChange:p,rows:o,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:r})},toggleGroup:function({data:t,field:n,onChange:r,hideLabelFromVision:l,validity:s}){const{getValue:o,setValue:u,isValid:c}=n,d=o({item:t}),f=(0,a.useCallback)(e=>r(u({item:t,value:e})),[t,r,u]),{elements:m,isLoading:v}=Dr({elements:n.elements,getElements:n.getElements});if(v)return(0,e.jsx)(i.Spinner,{});if(0===m.length)return null;const p=m.find(e=>e.value===d);return(0,e.jsx)(Xs,{required:!!n.isValid?.required,customValidity:kl(c,s),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,label:n.label,help:p?.description||n.description,onChange:f,value:d,hideLabelFromVision:l,children:m.map(t=>(0,e.jsx)(i.__experimentalToggleGroupControlOption,{label:t.label,value:t.value},t.value))})}};function ro(e){return e&&"object"==typeof e&&"string"==typeof e.control}function ao(t){const{control:n,...i}=t,r=lo(n);return function(t){return(0,e.jsx)(r,{...t,config:i})}}function lo(e){if(Object.keys(io).includes(e))return io[e];throw"Control "+e+" not found"}const so=e=>e.id,oo=()=>!0,uo=[],co=et.filter(e=>!e.isPicker);function fo({header:t,search:n=!0,searchLabel:r}){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i.__experimentalHStack,{alignment:"top",justify:"space-between",className:"dataviews__view-actions",spacing:1,children:[(0,e.jsxs)(i.__experimentalHStack,{justify:"start",expanded:!1,className:"dataviews__search",children:[n&&(0,e.jsx)(ma,{label:r}),(0,e.jsx)(at,{})]}),(0,e.jsxs)(i.__experimentalHStack,{spacing:1,expanded:!1,style:{flexShrink:0},children:[(0,e.jsx)(La,{}),t]})]}),(0,e.jsx)(aa,{className:"dataviews-filters__container"}),(0,e.jsx)(la,{}),(0,e.jsx)(fa,{})]})}const mo=function({view:t,onChangeView:n,fields:i,search:r=!0,searchLabel:l,actions:s=uo,data:o,getItemId:u=so,getItemLevel:d,isLoading:f=!1,paginationInfo:m,defaultLayouts:h,selection:g,onChangeSelection:b,onClickItem:x,renderItemLink:w,isItemClickable:y=oo,header:_,children:j,config:C={perPageSizes:[10,20,50,100]},empty:S}){const{infiniteScrollHandler:k}=m,V=(0,a.useRef)(null),[I,E]=(0,a.useState)(0),N=(0,c.useResizeObserver)(e=>{E(e[0].borderBoxSize[0].inlineSize)},{box:"border-box"}),[F,O]=(0,a.useState)([]),P=void 0===g||void 0===b,A=P?F:g,[z,D]=(0,a.useState)(null),B=(0,a.useMemo)(()=>function(t){return t.map(t=>{const n="email"===(i=t.type)?Da:"integer"===i?Ba:"number"===i?Ha:"text"===i?Ra:"datetime"===i?qa:"date"===i?Wa:"boolean"===i?Ua:"media"===i?Ka:"array"===i?Ya:"password"===i?Za:"telephone"===i?Xa:"color"===i?Cl:"url"===i?Sl:{sort:(e,t,n)=>"number"==typeof e&&"number"==typeof t?"asc"===n?e-t:t-e:"asc"===n?e.localeCompare(t):t.localeCompare(e),isValid:{elements:!0,custom:()=>null},Edit:null,render:({item:t,field:n})=>n.hasElements?(0,e.jsx)(Ta,{item:t,field:n}):n.getValue({item:t}),enableSorting:!0,filterBy:{defaultOperators:[v,p],validOperators:L}};var i;const r=t.getValue||(a=t.id,({item:e})=>{const t=a.split(".");let n=e;for(const e of t)n=n.hasOwnProperty(e)?n[e]:void 0;return n});var a;const l=t.setValue||(e=>({value:t})=>{const n=e.split("."),i={};let r=i;for(const e of n.slice(0,-1))r[e]={},r=r[e];return r[n.at(-1)]=t,i})(t.id),s=t.sort??function(e,t,i){return n.sort(r({item:e}),r({item:t}),i)},o={...n.isValid,...t.isValid},u=function(e,t){return"function"==typeof e.Edit?e.Edit:"string"==typeof e.Edit?lo(e.Edit):ro(e.Edit)?ao(e.Edit):no(e)&&"array"!==e.type?lo("select"):"string"==typeof t.Edit?lo(t.Edit):ro(t.Edit)?ao(t.Edit):t.Edit}(t,n),c=t.render??function({item:e,field:t}){return n.render({item:e,field:t})},d=function(e,t){if(!1===e.filterBy)return!1;if("object"==typeof e.filterBy){let n=e.filterBy.operators;n&&Array.isArray(n)||(n=t.filterBy?t.filterBy.defaultOperators:[]);let i=L;return"object"==typeof t.filterBy&&(i=t.filterBy.validOperators),n=n.filter(e=>i.includes(e)),no(e)&&n.includes(M)&&(n=n.filter(e=>e!==M)),n.some(e=>T.includes(e))&&(n=n.filter(e=>[...T,M].includes(e))),0!==n.length&&{isPrimary:!!e.filterBy.isPrimary,operators:n}}if(!1===t.filterBy)return!1;let n=t.filterBy.defaultOperators;return no(e)&&n.includes(M)&&(n=n.filter(e=>e!==M)),{operators:n}}(t,n);return{...t,label:t.label||t.id,header:t.header||t.label||t.id,getValue:r,setValue:l,render:c,sort:s,isValid:o,Edit:u,hasElements:no(t),enableHiding:t.enableHiding??!0,enableSorting:t.enableSorting??n.enableSorting??!0,filterBy:d,readOnly:t.readOnly??n.readOnly??!1}})}(i),[i]),H=(0,a.useMemo)(()=>A.filter(e=>o.some(t=>u(t)===e)),[A,o,u]),R=ia(B,t),q=(0,a.useMemo)(()=>(R||[]).some(e=>e.isPrimary||e.isLocked),[R]),[$,W]=(0,a.useState)(q);(0,a.useEffect)(()=>{q&&!$&&W(!0)},[q,$]),(0,a.useEffect)(()=>{if(!t.infiniteScrollEnabled||!V.current)return;const e=(0,c.throttle)(e=>{const t=e.target,n=t.scrollTop,i=t.scrollHeight;n+t.clientHeight>=i-100&&k?.()},100),n=V.current;return n.addEventListener("scroll",e),()=>{n.removeEventListener("scroll",e),e.cancel()}},[k,t.infiniteScrollEnabled]);const U=(0,a.useMemo)(()=>Object.fromEntries(Object.entries(h).filter(([e])=>co.some(t=>t.type===e))),[h]);return U[t.type]?(0,e.jsx)(K.Provider,{value:{view:t,onChangeView:n,fields:B,actions:s,data:o,isLoading:f,paginationInfo:m,selection:H,onChangeSelection:function(e){const t="function"==typeof e?e(A):e;P&&O(t),b&&b(t)},openedFilter:z,setOpenedFilter:D,getItemId:u,getItemLevel:d,isItemClickable:y,onClickItem:x,renderItemLink:w,containerWidth:I,containerRef:V,resizeObserverRef:N,defaultLayouts:U,filters:R,isShowingFilter:$,setIsShowingFilter:W,config:C,empty:S,hasInfiniteScrollHandler:!!k},children:(0,e.jsx)("div",{className:"dataviews-wrapper",ref:V,children:j??(0,e.jsx)(fo,{header:_,search:r,searchLabel:l})})}):null};mo.BulkActionToolbar=ke,mo.Filters=ra,mo.FiltersToggled=aa,mo.FiltersToggle=at,mo.Layout=la,mo.LayoutSwitcher=Ca,mo.Pagination=ua,mo.Search=ma,mo.ViewConfig=Pa,mo.Footer=fa;var vo=mo;const po={1:(0,o.__)("Monday","rrze-faudir"),2:(0,o.__)("Tuesday","rrze-faudir"),3:(0,o.__)("Wednesday","rrze-faudir"),4:(0,o.__)("Thursday","rrze-faudir"),5:(0,o.__)("Friday","rrze-faudir"),6:(0,o.__)("Saturday","rrze-faudir"),7:(0,o.__)("Sunday","rrze-faudir")},ho={phone:"",mail:"",url:"",street:"",zip:"",city:""},go=[],bo=["name","street","zip","city","phone","mail","url","officeHours"],xo=JSON.parse('{"UU":"rrze-faudir/service"}');(0,t.registerBlockType)(xo.UU,{icon:{src:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,e.jsx)("path",{d:"M440-120v-80h320v-284q0-117-81.5-198.5T480-764q-117 0-198.5 81.5T200-484v244h-40q-33 0-56.5-23.5T80-320v-80q0-21 10.5-39.5T120-469l3-53q8-68 39.5-126t79-101q47.5-43 109-67T480-840q68 0 129 24t109 66.5Q766-707 797-649t40 126l3 52q19 9 29.5 27t10.5 38v92q0 20-10.5 38T840-249v49q0 33-23.5 56.5T760-120H440Zm-80-280q-17 0-28.5-11.5T320-440q0-17 11.5-28.5T360-480q17 0 28.5 11.5T400-440q0 17-11.5 28.5T360-400Zm240 0q-17 0-28.5-11.5T560-440q0-17 11.5-28.5T600-480q17 0 28.5 11.5T640-440q0 17-11.5 28.5T600-400Zm-359-62q-7-106 64-182t177-76q89 0 156.5 56.5T720-519q-91-1-167.5-49T435-698q-16 80-67.5 142.5T241-462Z"})})},edit:function({attributes:t,setAttributes:r}){var l;const c=(0,n.useBlockProps)(),{orgid:d,contact:f=ho,name:m="",visibleFields:v,officeHours:p=go}=t,h=v&&v.length>0?v:bo,[g,b]=(0,a.useState)({type:"table",fields:["label","value","visibility"],perPage:10,filters:[],page:1,layout:{enableMoving:!1}}),[x,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!d)return void r({contact:Object.assign({},ho),name:"",officeHours:[]});const e=new AbortController;return s()({path:`/rrze-faudir/v1/organization?orgid=${encodeURIComponent(d)}`,signal:e.signal}).then(e=>{var t,n,i,a,l,s,o,u,c,d,f;console.log(e);const m=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.address)&&void 0!==n?n:{},v={phone:null!==(i=null==m?void 0:m.phone)&&void 0!==i?i:"",mail:null!==(a=null==m?void 0:m.mail)&&void 0!==a?a:"",url:null!==(l=null==m?void 0:m.url)&&void 0!==l?l:"",street:null!==(s=null==m?void 0:m.street)&&void 0!==s?s:"",zip:null!==(o=null==m?void 0:m.zip)&&void 0!==o?o:"",city:null!==(u=null==m?void 0:m.city)&&void 0!==u?u:""},p=null!==(d=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.name)&&void 0!==d?d:"",h=Array.isArray(null===(f=null==e?void 0:e.data)||void 0===f?void 0:f.officeHours)?e.data.officeHours.map(e=>{var t,n,i;return{weekday:null!==(t=null==e?void 0:e.weekday)&&void 0!==t?t:"",from:null!==(n=null==e?void 0:e.from)&&void 0!==n?n:"",to:null!==(i=null==e?void 0:e.to)&&void 0!==i?i:""}}):[];r({contact:v,name:p,officeHours:h})}).catch(e=>{"AbortError"!==(null==e?void 0:e.name)&&(console.error("FAUdir organization request failed",e),r({contact:Object.assign({},ho),name:"",officeHours:[]}))}),()=>e.abort()},[d]);const y=(0,a.useMemo)(()=>Object.assign(Object.assign({},ho),f),[f]),{phone:_,mail:j,url:C,street:S,zip:k,city:V}=y,I=(0,a.useMemo)(()=>Array.isArray(p)?p.filter(e=>e&&(e.weekday||e.from||e.to)):[],[p]),E=(0,a.useMemo)(()=>I.map(e=>(e=>{var t,n,i;if(!e)return"";const r=e.weekday,a="number"==typeof r?null!==(t=po[r])&&void 0!==t?t:`${r}`:null!=r?r:"",l=null!==(n=e.from)&&void 0!==n?n:"",s=null!==(i=e.to)&&void 0!==i?i:"";let o="";return o=l&&s?`${l} – ${s}`:l||s||"",[a,o].filter(Boolean).join(": ")})(e)).filter(Boolean),[I]),N=(0,a.useCallback)(e=>{const t=h.includes(e)?h.filter(t=>t!==e):[...h,e];r({visibleFields:t})},[h,r]),M=(0,a.useCallback)(e=>h.includes(e),[h]),F=(0,a.useMemo)(()=>[{id:"name",label:(0,o.__)("Name","rrze-faudir"),value:m||""},{id:"street",label:(0,o.__)("Street","rrze-faudir"),value:S||""},{id:"zip",label:(0,o.__)("ZIP","rrze-faudir"),value:k||""},{id:"city",label:(0,o.__)("City","rrze-faudir"),value:V||""},{id:"phone",label:(0,o.__)("Phone","rrze-faudir"),value:_||""},{id:"mail",label:(0,o.__)("Email","rrze-faudir"),value:j||""},{id:"url",label:(0,o.__)("Website","rrze-faudir"),value:C||""},{id:"officeHours",label:(0,o.__)("Office hours","rrze-faudir"),value:E.length?E.join("\n"):""}],[m,S,k,V,_,j,C,E]),O=(0,a.useMemo)(()=>[{id:"label",label:(0,o.__)("Field","rrze-faudir"),enableHiding:!1,enableSorting:!1,getValue:({item:e})=>e.label},{id:"value",label:(0,o.__)("API value","rrze-faudir"),enableSorting:!1,enableHiding:!1,render:({item:t})=>t.value?t.value:(0,e.jsx)("span",{className:"rrze-faudir__dataviews-empty",children:(0,o.__)("No data","rrze-faudir")})},{id:"visibility",label:(0,o.__)("Display","rrze-faudir"),enableSorting:!1,enableHiding:!1,render:({item:t})=>(0,e.jsx)(i.ToggleControl,{label:t.label,"aria-label":(0,o.sprintf)((0,o.__)("Toggle %s","rrze-faudir"),t.label),checked:M(t.id),onChange:()=>N(t.id)})}],[M,N]),P=(0,a.useMemo)(()=>({totalItems:F.length,totalPages:1}),[F.length]),A=["phone","mail","url"].some(e=>M(e)&&y[e]),L=["street","zip","city"].some(e=>M(e)&&y[e]),T=M("officeHours"),z=(0,e.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,e.jsx)(i.Path,{d:"M440-240q116 0 198-81.5T720-520q0-116-82-198t-198-82q-117 0-198.5 82T160-520q0 117 81.5 198.5T440-240Zm0-280Zm0 160q-83 0-147.5-44.5T200-520q28-70 92.5-115T440-680q82 0 146.5 45T680-520q-29 71-93.5 115.5T440-360Zm0-60q55 0 101-26.5t72-73.5q-26-46-72-73t-101-27q-56 0-102 27t-72 73q26 47 72 73.5T440-420Zm0-40q25 0 42.5-17t17.5-43q0-25-17.5-42.5T440-580q-26 0-43 17.5T380-520q0 26 17 43t43 17Zm0 300q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T80-520q0-74 28.5-139.5t77-114.5q48.5-49 114-77.5T440-880q74 0 139.5 28.5T694-774q49 49 77.5 114.5T800-520q0 64-21 121t-58 104l159 159-57 56-159-158q-47 37-104 57.5T440-160Z"})});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.BlockControls,{children:[(0,e.jsx)(n.MediaReplaceFlow,{mediaId:t.imageId,mediaURL:t.imageURL,allowedTypes:["image"],accept:"image/*",onSelect:e=>{return t=this,n=void 0,a=function*(){var t;console.log(e);const n=(i=e)&&i.url?{url:i.url,id:i.id,alt:null==i?void 0:i.alt,height:i.height,width:i.width}:{url:""};var i;r({imageURL:n.url,imageId:null!==(t=n.id)&&void 0!==t?t:null,imageWidth:n.width,imageHeight:n.height})},new((i=void 0)||(i=Promise))(function(e,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(l,s)}o((a=a.apply(t,n||[])).next())});var t,n,i,a},onToggleFeaturedImage:()=>{},name:C?(0,o.__)("Replace"):(0,o.__)("Add media"),onReset:()=>{},onError:()=>{}}),(0,e.jsx)(i.ToolbarGroup,{children:(0,e.jsx)(i.ToolbarGroup,{children:(0,e.jsx)(i.ToolbarItem,{children:()=>(0,e.jsx)(i.ToolbarButton,{label:(0,o.__)("Manage Data Visibility","rrze-faudir"),icon:z,onClick:()=>w(!0)})})})})]}),x&&(0,e.jsxs)(i.Modal,{size:"large",onRequestClose:()=>w(!1),children:[(0,e.jsx)(i.Notice,{isDismissible:!1,spokenMessage:(0,o.__)("Please be aware, that all data displayed within the service block is in sync with the Portal FAUdir. You cannot change contact details from within your web page.","rrze-faudir"),status:"info",children:(0,o.__)("The data displayed below is in sync with FAUdir and cannot be changed from within your website. Contact data can only be edited within the FAUdir Portal.","rrze-faudir")}),(0,e.jsx)(vo,{data:F,fields:O,view:g,onChangeView:()=>{},paginationInfo:P,defaultLayouts:{table:{showMedia:!1}},getItemId:e=>e.id,empty:(0,e.jsx)("p",{children:(0,o.__)("No API data fetched yet.","rrze-faudir")}),search:!1,children:(0,e.jsx)(vo.Layout,{})})]}),(0,e.jsx)(n.InspectorControls,{children:(0,e.jsx)(i.PanelBody,{title:(0,o.__)("Organization","rrze-faudir"),initialOpen:!0,children:(0,e.jsx)(u,{attributes:t,setAttributes:r})})}),(0,e.jsxs)("article",Object.assign({},c,{className:`rrze-elements-blocks_service_card ${null!==(l=c.className)&&void 0!==l?l:""}`,"aria-labelledby":"service-title",children:[(0,e.jsx)("figure",{className:"rrze-elements-blocks_service__figure",children:(0,e.jsx)("img",{className:"rrze-elements-blocks_service__image",src:t.imageURL,width:t.imageWidth,alt:"",height:t.imageHeight})}),m&&M("name")&&(0,e.jsxs)("header",{className:"rrze-elements-blocks_service__meta_headline",children:[(0,e.jsx)("h2",{id:"service-title",className:"meta-headline",children:m}),(0,e.jsx)(n.RichText,{value:t.displayText,tagName:"p",placeholder:(0,o.__)("Add your service description...","rrze-faudir"),onChange:e=>r({displayText:e})})]}),L&&(0,e.jsxs)("section",{className:"rrze-elements-blocks_service__information","aria-labelledby":"addr-h",children:[(0,e.jsx)("h3",{id:"addr-h",children:"Adresse"}),(0,e.jsxs)("address",{children:[S&&M("street")&&(0,e.jsxs)("span",{children:[S,(0,e.jsx)("br",{})]}),(k||V)&&(0,e.jsx)("span",{children:[M("zip")?k:null,M("city")?V:null].filter(Boolean).join(" ")})]})]}),T&&0!==E.length&&(0,e.jsxs)("section",{"aria-labelledby":"hours-h",children:[(0,e.jsx)("h3",{id:"hours-h",children:(0,o.__)("Office hours","rrze-faudir")}),(0,e.jsx)("ul",{children:E.map((t,n)=>(0,e.jsx)("li",{children:t},`office-hour-${n}`))})]}),A&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("section",{"aria-labelledby":"contact-h",children:[(0,e.jsx)("h3",{id:"contact-h",children:(0,o.__)("Contact","rrze-faudir")}),(0,e.jsxs)("address",{children:[_&&M("phone")&&(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:`tel:${_.replace(/\s+/g,"")}`,children:_})}),j&&M("mail")&&(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:`mailto:${j}`,children:j})}),C&&M("url")&&(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:C,target:"_blank",rel:"noreferrer",children:C})})]})]})})]}))]})},save:function(){return null}})})()})();