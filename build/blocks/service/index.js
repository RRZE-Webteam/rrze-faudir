(()=>{"use strict";var e={n:r=>{var i=r&&r.__esModule?()=>r.default:()=>r;return e.d(i,{a:i}),i},d:(r,i)=>{for(var l in i)e.o(i,l)&&!e.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:i[l]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.ReactJSXRuntime,i=window.wp.blocks,l=window.wp.blockEditor,t=window.wp.components,n=window.wp.element,s=window.wp.apiFetch;var d=e.n(s);const o=window.wp.i18n;function a({attributes:e,setAttributes:i,label:l,helpText:s}){const[d,a]=(0,n.useState)(e.orgid||""),[c,h]=(0,n.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.__experimentalHeading,{level:3,children:(0,o.__)("Select organization by FAUdir Identifier","rrze-faudir")}),(0,r.jsx)(t.TextControl,{label:l||(0,o.__)("Via FAUdir-ID or FAUdir-URL","rrze-faudir"),value:d,onChange:e=>{const r=e.trim(),l=r.match(/^https?:\/\/faudir\.fau\.de\/public\/org\/([^/]+)\/?$/);let t=l?l[1]:r;t?(i({orgid:t}),h("")):(i({orgid:""}),h((0,o.__)("Please enter a valid FAUdir-URL or the FAUdir-identifier.","rrze-faudir"))),a(e)},type:"text",help:c||s||(0,o.__)('Please enter either the complete FAUdir-URL ("https://faudir.fau.de/public/org/…"), or the FAUdir-Identifier (the last part of the URL after "org/".',"rrze-faudir")})]})}const c={phone:"",mail:"",url:"",street:"",zip:"",city:""},h=JSON.parse('{"UU":"rrze-faudir/service"}');(0,i.registerBlockType)(h.UU,{icon:{src:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,r.jsx)("path",{d:"M440-120v-80h320v-284q0-117-81.5-198.5T480-764q-117 0-198.5 81.5T200-484v244h-40q-33 0-56.5-23.5T80-320v-80q0-21 10.5-39.5T120-469l3-53q8-68 39.5-126t79-101q47.5-43 109-67T480-840q68 0 129 24t109 66.5Q766-707 797-649t40 126l3 52q19 9 29.5 27t10.5 38v92q0 20-10.5 38T840-249v49q0 33-23.5 56.5T760-120H440Zm-80-280q-17 0-28.5-11.5T320-440q0-17 11.5-28.5T360-480q17 0 28.5 11.5T400-440q0 17-11.5 28.5T360-400Zm240 0q-17 0-28.5-11.5T560-440q0-17 11.5-28.5T600-480q17 0 28.5 11.5T640-440q0 17-11.5 28.5T600-400Zm-359-62q-7-106 64-182t177-76q89 0 156.5 56.5T720-519q-91-1-167.5-49T435-698q-16 80-67.5 142.5T241-462Z"})})},edit:function({attributes:e,setAttributes:i}){var s;const o=(0,l.useBlockProps)(),{orgid:h,contact:u=c,name:v}=e;(0,n.useEffect)(()=>{if(!h)return void i({contact:Object.assign({},c),name:""});const e=new AbortController;return d()({path:`/rrze-faudir/v1/organization?orgid=${encodeURIComponent(h)}`,signal:e.signal}).then(e=>{var r,l,t,n,s,d,o,a,c,h;console.log(e);const u=null!==(l=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.address)&&void 0!==l?l:{},v={phone:null!==(t=null==u?void 0:u.phone)&&void 0!==t?t:"",mail:null!==(n=null==u?void 0:u.mail)&&void 0!==n?n:"",url:null!==(s=null==u?void 0:u.url)&&void 0!==s?s:"",street:null!==(d=null==u?void 0:u.street)&&void 0!==d?d:"",zip:null!==(o=null==u?void 0:u.zip)&&void 0!==o?o:"",city:null!==(a=null==u?void 0:u.city)&&void 0!==a?a:""},m=null!==(h=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.name)&&void 0!==h?h:"";i({contact:v,name:m})}).catch(e=>{"AbortError"!==(null==e?void 0:e.name)&&(console.error("FAUdir organization request failed",e),i({contact:Object.assign({},c),name:""}))}),()=>e.abort()},[h]);const{phone:m,mail:p,url:x,street:j,zip:b,city:g}=(0,n.useMemo)(()=>{var e,r,i,l,t,n;return{phone:null!==(e=null==u?void 0:u.phone)&&void 0!==e?e:"",mail:null!==(r=null==u?void 0:u.mail)&&void 0!==r?r:"",url:null!==(i=null==u?void 0:u.url)&&void 0!==i?i:"",street:null!==(l=null==u?void 0:u.street)&&void 0!==l?l:"",zip:null!==(t=null==u?void 0:u.zip)&&void 0!==t?t:"",city:null!==(n=null==u?void 0:u.city)&&void 0!==n?n:""}},[u]),f=!!(m||p||x);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.InspectorControls,{children:(0,r.jsx)(t.PanelBody,{children:(0,r.jsx)(a,{attributes:e,setAttributes:i})})}),(0,r.jsxs)("article",Object.assign({},o,{className:`rrze-elements-blocks_service_card ${null!==(s=o.className)&&void 0!==s?s:""}`,"aria-labelledby":"service-title",children:[(0,r.jsx)("figure",{className:"rrze-elements-blocks_service__figure",children:(0,r.jsx)("img",{className:"rrze-elements-blocks_service__image",src:"./",alt:"",width:"640",height:"360"})}),v&&(0,r.jsxs)("header",{className:"rrze-elements-blocks_service__meta_headline",children:[(0,r.jsx)("h2",{id:"service-title",className:"meta-headline",children:v}),(0,r.jsx)("p",{className:"lede",children:"Wir helfen bei der Wahl des Studiums gerne weiter."})]}),(j||b||g)&&(0,r.jsxs)("section",{className:"rrze-elements-blocks_service__information","aria-labelledby":"addr-h",children:[(0,r.jsx)("h3",{id:"addr-h",children:"Adresse"}),(0,r.jsxs)("address",{children:[j&&(0,r.jsxs)("span",{children:[j,(0,r.jsx)("br",{})]}),(b||g)&&(0,r.jsx)("span",{children:[b,g].filter(Boolean).join(" ")})]})]}),(0,r.jsxs)("section",{"aria-labelledby":"hours-h",children:[(0,r.jsx)("h3",{id:"hours-h",children:"Sprechzeiten"}),(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:["Mo., Di. und Do.,",(0,r.jsx)("time",{dateTime:"10:00",children:"10.00"}),"–",(0,r.jsx)("time",{dateTime:"16:00",children:"16.00 Uhr"})]})})]}),f&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{"aria-labelledby":"contact-h",children:[(0,r.jsx)("h3",{id:"contact-h",children:"Kontakt"}),(0,r.jsxs)("address",{children:[m&&(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:`tel:${m.replace(/\s+/g,"")}`,children:m})}),p&&(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:`mailto:${p}`,children:p})}),x&&(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:x,target:"_blank",rel:"noreferrer",children:x})})]})]})})]}))]})},save:function(){return null}})})();