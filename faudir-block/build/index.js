(()=>{"use strict";var e,r={192:(e,r,t)=>{const o=window.wp.blocks,a=window.wp.i18n,l=window.wp.blockEditor,i=window.wp.components,s=window.wp.element,n=window.wp.serverSideRender;var d=t.n(n);const c=window.wp.apiFetch;var u=t.n(c);const f=window.ReactJSXRuntime,_=JSON.parse('{"UU":"rrze-faudir/block"}');(0,o.registerBlockType)(_.UU,{edit:function({attributes:e,setAttributes:r}){const[t,o]=(0,s.useState)([]),[n,c]=(0,s.useState)([]),[_,p]=(0,s.useState)(!0),[h,g]=(0,s.useState)(!1),[m,b]=(0,s.useState)(""),{selectedCategory:x="",selectedPosts:k=[],showCategory:j="",showPosts:v="",selectedPersonIds:C="",selectedFormat:z="kompakt",selectedFields:w=[],groupId:y="",functionField:F="",organizationNr:P="",url:S=""}=e,O={display_name:(0,a.__)("Display Name","rrze-faudir"),academic_title:(0,a.__)("Academic Title","rrze-faudir"),first_name:(0,a.__)("First Name","rrze-faudir"),last_name:(0,a.__)("Last Name","rrze-faudir"),academic_suffix:(0,a.__)("Academic Suffix","rrze-faudir"),email:(0,a.__)("Email","rrze-faudir"),phone:(0,a.__)("Phone","rrze-faudir"),organization:(0,a.__)("Organization","rrze-faudir"),function:(0,a.__)("Function","rrze-faudir"),url:(0,a.__)("Url","rrze-faudir"),kompaktButton:(0,a.__)("Kompakt Button","rrze-faudir"),content:(0,a.__)("Content","rrze-faudir"),teasertext:(0,a.__)("Teasertext","rrze-faudir"),socialmedia:(0,a.__)("Social Media","rrze-faudir"),workplaces:(0,a.__)("Workplaces","rrze-faudir"),room:(0,a.__)("Room","rrze-faudir"),floor:(0,a.__)("Floor","rrze-faudir"),street:(0,a.__)("Street","rrze-faudir"),zip:(0,a.__)("Zip","rrze-faudir"),city:(0,a.__)("City","rrze-faudir"),faumap:(0,a.__)("Fau Map","rrze-faudir"),officehours:(0,a.__)("Office Hours","rrze-faudir"),consultationhours:(0,a.__)("Consultation Hours","rrze-faudir")},I={card:["display_name","academic_title","first_name","last_name","academic_suffix","email","phone","function","socialmedia"],table:["display_name","academic_title","first_name","last_name","academic_suffix","email","phone","url","socialmedia"],list:["display_name","academic_title","first_name","last_name","academic_suffix","email","phone","url","teasertext"],kompakt:Object.keys(O),page:Object.keys(O)};(0,s.useEffect)((()=>{w.length||u()({path:"/wp/v2/settings/rrze_faudir_options"}).then((e=>{e?.default_output_fields&&r({selectedFields:e.default_output_fields})})).catch((e=>{console.error("Error fetching default fields:",e)}))}),[]),(0,s.useEffect)((()=>{u()({path:"/wp/v2/custom_taxonomy?per_page=100"}).then((e=>{o(e),p(!1)})).catch((e=>{console.error("Error fetching categories:",e),p(!1)}))}),[]),(0,s.useEffect)((()=>{g(!0),u()({path:"/wp/v2/custom_person?per_page=100&_fields=id,title,meta"}).then((e=>{c(e),g(!1)})).catch((e=>{console.error("Error fetching posts:",e),g(!1)}))}),[]),console.log("Edit component rendering with attributes:",e);const E={selectedPersonIds:e.selectedPersonIds,selectedFields:e.selectedFields,selectedFormat:e.selectedFormat,selectedCategory:e.selectedCategory,groupId:e.groupId,functionField:e.functionField,organizationNr:e.organizationNr,url:e.url};return console.log("Block attributes:",E),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.InspectorControls,{children:(0,f.jsxs)(i.PanelBody,{title:(0,a.__)("Settings","faudir-block"),children:[(0,f.jsx)(i.ToggleControl,{label:(0,a.__)("Show Category","faudir-block"),checked:j,onChange:()=>r({showCategory:!j})}),j&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h4",{children:(0,a.__)("Select Category","faudir-block")}),t.map((e=>(0,f.jsx)(i.CheckboxControl,{label:e.name,checked:x===e.name,onChange:()=>r({selectedCategory:e.name})},e.id)))]}),(0,f.jsx)(i.ToggleControl,{label:(0,a.__)("Show Persons","faudir-block"),checked:v,onChange:()=>r({showPosts:!v})}),v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h4",{children:(0,a.__)("Select Persons","faudir-block")}),h?(0,f.jsx)("p",{children:(0,a.__)("Loading persons...","faudir-block")}):n.length>0?n.map((e=>(0,f.jsx)(i.CheckboxControl,{label:e.title.rendered,checked:k.includes(e.id),onChange:()=>(e=>{const t=k.includes(e)?k.filter((r=>r!==e)):[...k,e],o=t.map((e=>{const r=n.find((r=>r.id===e));return r?.meta?.person_id||null})).filter(Boolean);r({selectedPosts:t,selectedPersonIds:o})})(e.id,e.meta)},e.id))):(0,f.jsx)("p",{children:(0,a.__)("No posts available.","faudir-block")})]}),(0,f.jsx)(i.SelectControl,{label:(0,a.__)("Select Format","faudir-block"),value:z||"list",options:[{value:"list",label:(0,a.__)("List","faudir-block")},{value:"table",label:(0,a.__)("Table","faudir-block")},{value:"card",label:(0,a.__)("Card","faudir-block")},{value:"kompakt",label:(0,a.__)("Kompakt","faudir-block")},{value:"page",label:(0,a.__)("Page","faudir-block")}],onChange:e=>{r({selectedFormat:e}),w.length||u()({path:"/wp/v2/settings/rrze_faudir_options"}).then((t=>{if(t?.default_output_fields){const o=I[e]||[],a=t.default_output_fields.filter((e=>o.includes(e)));r({selectedFields:a.length?a:o})}else r({selectedFields:I[e]||[]})})).catch((t=>{console.error("Error fetching default fields:",t),r({selectedFields:I[e]||[]})}))}}),Object.keys(I).map((e=>z===e?(0,f.jsxs)("div",{children:[(0,f.jsx)("h4",{children:(0,a.__)("Select Fields","faudir-block")}),I[e].map((e=>(0,f.jsx)(i.CheckboxControl,{label:O[e],checked:w.includes(e),onChange:()=>(e=>{const t=w.includes(e)?w.filter((r=>r!==e)):[...w,e];r({selectedFields:t})})(e)},e)))]},e):null)),(0,f.jsx)(i.TextControl,{label:(0,a.__)("Group Id","rrze-faudir"),value:y,onChange:e=>r({groupId:e})}),(0,f.jsx)(i.TextControl,{label:(0,a.__)("Function","rrze-faudir"),value:F,onChange:e=>r({functionField:e})}),(0,f.jsx)(i.TextControl,{label:(0,a.__)("Organization Nr","rrze-faudir"),value:P,onChange:e=>r({organizationNr:e})}),(0,f.jsx)(i.TextControl,{label:(0,a.__)("Custom url","rrze-faudir"),value:S,onChange:e=>r({url:e})}),"kompakt"===z&&(0,f.jsx)(i.TextControl,{label:(0,a.__)("Button Text","rrze-faudir"),value:m,onChange:e=>b(e)})]})}),(0,f.jsx)("div",{...(0,l.useBlockProps)(),children:e.selectedPersonIds&&e.selectedPersonIds.length>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"#f8f9fa"},children:[(0,f.jsx)("strong",{children:"Selected Person IDs:"})," ",e.selectedPersonIds.join(", ")]}),(0,f.jsx)(d(),{block:"rrze-faudir/block",attributes:e,EmptyResponsePlaceholder:()=>(0,f.jsxs)("div",{style:{padding:"20px",backgroundColor:"#fff3cd",color:"#856404"},children:[(0,f.jsx)("p",{children:"No content returned from server."}),(0,f.jsxs)("details",{children:[(0,f.jsx)("summary",{children:"Debug Information"}),(0,f.jsx)("pre",{children:JSON.stringify(e,null,2)})]})]}),ErrorResponsePlaceholder:({response:r})=>(0,f.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f8d7da",color:"#721c24"},children:[(0,f.jsx)("p",{children:(0,f.jsx)("strong",{children:"Error loading content:"})}),(0,f.jsx)("p",{children:r?.errorMsg||"Unknown error occurred"}),(0,f.jsxs)("details",{children:[(0,f.jsx)("summary",{children:"Debug Information"}),(0,f.jsx)("pre",{children:"Block: rrze-faudir/block"}),(0,f.jsxs)("pre",{children:["Response: ",JSON.stringify(r,null,2)]}),(0,f.jsxs)("pre",{children:["Attributes: ",JSON.stringify(e,null,2)]})]})]})})]}):(0,f.jsx)("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",textAlign:"center"},children:(0,f.jsx)("p",{children:"Please select persons to display using the sidebar controls."})})})]})},save:()=>null})}},t={};function o(e){var a=t[e];if(void 0!==a)return a.exports;var l=t[e]={exports:{}};return r[e](l,l.exports,o),l.exports}o.m=r,e=[],o.O=(r,t,a,l)=>{if(!t){var i=1/0;for(c=0;c<e.length;c++){for(var[t,a,l]=e[c],s=!0,n=0;n<t.length;n++)(!1&l||i>=l)&&Object.keys(o.O).every((e=>o.O[e](t[n])))?t.splice(n--,1):(s=!1,l<i&&(i=l));if(s){e.splice(c--,1);var d=a();void 0!==d&&(r=d)}}return r}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[t,a,l]},o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={57:0,350:0};o.O.j=r=>0===e[r];var r=(r,t)=>{var a,l,[i,s,n]=t,d=0;if(i.some((r=>0!==e[r]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(n)var c=n(o)}for(r&&r(t);d<i.length;d++)l=i[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},t=globalThis.webpackChunkblock_faudir=globalThis.webpackChunkblock_faudir||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var a=o.O(void 0,[350],(()=>o(192)));a=o.O(a)})();